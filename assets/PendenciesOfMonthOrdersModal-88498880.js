import{n as r,bE as d,aK as i,am as n,w as o,bF as l,ap as c,K as p,bG as u,N as m,$ as f,D as _}from"./index-fae63e1f.js";import{d as g}from"./DailyCash-da8f8b01.js";import{V as h}from"./vue-load-image-65c59e9a.js";import"./_PaginatorFragment-c01a3fe7.js";import"./PaymentExpense-9583d97d.js";const v={components:{VueLoadImage:h},props:{order:{type:Object,required:!0}},data(){return{icons:{faImage:d,faTshirt:i,faDollarSign:n,faHandHoldingUsd:o,faDotCircle:l,faCalendarAlt:c,faTruck:p,faUserAlt:u}}},computed:{isPreRegistered(){return this.order.states.includes("PRE-REGISTERED")},orderImage(){return this.order.art_paths?this.order.art_paths[0]:null},clientUrl(){return this.$helpers.getUrl("clients.show",{client:this.order.client.id})},orderUrl(){return this.isPreRegistered?this.$helpers.getUrl("orders.show.pre-registered",{order:this.order.id}):this.$helpers.getUrl("orders.show",{client:this.order.client.id,order:this.order.id})}},methods:{formatDatetime:m}};var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card card-sm mb-2"},[t("div",{staticClass:"card-header fw-bold text-white clickable position-relative",class:e.isPreRegistered?"bg-link-warning":"bg-link-primary"},[t("a",{staticClass:"stretched-link",attrs:{target:"_blank",href:e.orderUrl}}),e.order.code?[e._v(" "+e._s(e.order.code)+" ")]:[e._v(" PRE-REGISTRO ")]],2),t("div",{staticClass:"card-body p-0"},[e.orderImage?t("VueLoadImage",[t("img",{staticClass:"img-fluid",attrs:{slot:"image",src:e.orderImage,alt:"Imagem da arte"},slot:"image"}),t("div",{staticClass:"position-relative py-5",attrs:{slot:"preloader"},slot:"preloader"},[t("AppLoading")],1)]):t("div",{staticClass:"text-center img-thumbnail py-3 rounded-0"},[t("FontAwesomeIcon",{staticClass:"text-secondary",attrs:{icon:e.icons.faImage,size:"3x"}}),t("div",{staticClass:"fw-bold text-secondary"},[e._v(" SEM IMAGEM ")])],1)],1),t("div",{staticClass:"card-body p-0"},[t("ul",{staticClass:"list-group list-group-flush list-group-sm"},[e.order.client?t("li",{staticClass:"list-group-item fw-bold"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faUserAlt,"fixed-width":""}}),t("a",{staticClass:"text-decoration-none",attrs:{href:e.clientUrl,target:"_blank"}},[e._v(e._s(e.order.client.name))])],1):e._e(),e.order.quantity!==null?t("li",{staticClass:"list-group-item fw-bold"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faTshirt,"fixed-width":""}}),e._v(" "+e._s(e.$helpers.plural(e.order.quantity,"f","CAMISA",null,!0))+" ")],1):e._e(),e.order.price!==null?t("li",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"list-group-item fw-bold text-success",attrs:{content:"Valor total"}},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faDollarSign,"fixed-width":""}}),e._v(" "+e._s(e.$helpers.toBRL(e.order.price))+" ")],1):e._e(),e.order.total_owing!==null?t("li",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"list-group-item fw-bold text-danger",attrs:{content:"Pendente"}},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faHandHoldingUsd,"fixed-width":""}}),e._v(" "+e._s(e.$helpers.toBRL(e.order.total_owing))+" ")],1):e._e(),e.order.status?t("li",{staticClass:"list-group-item fw-bold"},[t("span",{class:e.order.status.is_available?"text-success":"text-warning"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faDotCircle,"fixed-width":""}}),e._v(" "+e._s(e.order.status.text)+" ")],1)]):e._e(),e.order.print_date?t("li",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"list-group-item fw-bold",attrs:{content:"Data de estampa"}},[t("span",{staticClass:"text-nowrap"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faCalendarAlt,"fixed-width":""}}),t("FontAwesomeIcon",{attrs:{icon:e.icons.faTshirt,"fixed-width":""}}),e._v(" "+e._s(e.formatDatetime(e.order.print_date))+" ")],1)]):e._e(),e.order.delivery_date?t("li",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"list-group-item fw-bold",attrs:{content:"Data de entrega"}},[t("span",{staticClass:"text-nowrap"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faCalendarAlt,"fixed-width":""}}),t("FontAwesomeIcon",{attrs:{icon:e.icons.faTruck,"fixed-width":""}}),e._v(" "+e._s(e.formatDatetime(e.order.delivery_date))+" ")],1)]):e._e()])])])},y=[],C=r(v,w,y,!1,null,null,null,null);const x=C.exports,b={components:{PendenciesOrderCard:x},props:{date:{type:String,required:!0}},apollo:{dailyCashBalancePendenciesOrders:{query:g,variables(){return{date:this.date,first:12,page:this.page}}}},data(){return{page:1,icons:{faTshirt:i,faHandHoldingUsd:o,faDollarSign:n},dailyCashBalancePendenciesOrders:{data:[],paginatorInfo:{}}}},computed:{totalOwing(){return this.dailyCashBalancePendenciesOrders.data.reduce((a,e)=>a+e.total_owing,0)},isQueryLoading(){return!!this.$apollo.queries.dailyCashBalancePendenciesOrders.loading}}};var I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"position-relative"},[t("div",{staticClass:"text-center"},[t("AppPaginator",{attrs:{"is-loading":e.isQueryLoading,pagination:e.dailyCashBalancePendenciesOrders.paginatorInfo},model:{value:e.page,callback:function(s){e.page=s},expression:"page"}})],1),e.isQueryLoading?t("AppLoading",{staticClass:"py-5 my-5"}):e.dailyCashBalancePendenciesOrders.data.length?[t("div",{staticClass:"mb-2 fw-bold"},[e._v(" Nesta página: "),t("span",{staticClass:"text-danger"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faHandHoldingUsd,"fixed-width":""}}),e._v(" "+e._s(e.$helpers.toBRL(e.totalOwing))+" ")],1)]),t("div",{staticClass:"row"},e._l(e.dailyCashBalancePendenciesOrders.data,function(s){return t("div",{key:s.key,staticClass:"col-sm-2 col"},[t("PendenciesOrderCard",{attrs:{order:s}})],1)}),0)]:t("div",{staticClass:"text-center text-secondary mt-5 pt-5"},[e._v(" Nenhum pedido encontrado ")])],2)},A=[],O=r(b,I,A,!1,null,null,null,null);const P=O.exports,F={components:{PendenciesOfMonthBody:P},props:{value:{type:Boolean,default:!1},date:{type:String,required:!0}},data(){return{icons:{faBoxes:f}}},computed:{getDateName(){return _.fromISO(this.date).setLocale("pt-br").toFormat("LLLL 'de' y")}}};var $=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"pendenciesOnMonthOrdersModal",value:e.value,"modal-dialog-class":"modal-fullscreen"},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faBoxes,"fixed-width":""}}),e._v(" Pedidos contabilizados nas pendências de "),t("span",{staticClass:"text-uppercase"},[e._v(e._s(e.getDateName))])]},proxy:!0},{key:"body",fn:function(){return[e.value?t("PendenciesOfMonthBody",{attrs:{date:e.date}}):e._e()]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"text-end"},[t("AppButton",{staticClass:"fw-bold",attrs:{"data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)]},proxy:!0}])},e.$listeners))},B=[],D=r(F,$,B,!1,null,null,null,null);const S=D.exports;export{S as default};
