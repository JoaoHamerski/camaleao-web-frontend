import{n as r,G as C,k as N,H as w,_ as F,aY as $,p as S,a5 as B,F as I,s as D,u as E,N as M,aN as A,i as k,X as R}from"./index-fae63e1f.js";import{C as L}from"./ClientForm-2fc68fde.js";import{D as V}from"./Client-cfdef3aa.js";import{d as x}from"./_PaginatorFragment-c01a3fe7.js";const T={components:{ClientForm:L},props:{value:{type:Boolean,default:!1},client:{type:Object,default:null}},data(){return{icons:{faEdit:C}}},methods:{onSuccess(){this.$emit("success")}}};var P=function(){var e=this,n=e._self._c;return n("AppModal",e._g({attrs:{id:"clientModalEdit",value:e.value,centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faEdit}}),e._v(" Editar dados de "+e._s(e.client?e.client.name:"")+" ")]},proxy:!0},{key:"body",fn:function(){return[e.value?n("ClientForm",{attrs:{"is-edit":!0,client:e.client},on:{success:e.onSuccess}}):e._e()]},proxy:!0}])},e.$listeners))},O=[],q=r(T,P,O,!1,null,null,null,null);const G=q.exports,Q={props:{color:{type:String,default:null},label:{type:String,default:""},text:{type:String,default:""}}};var U=function(){var e=this,n=e._self._c;return n("div",[n("div",{staticClass:"fw-bold small",class:[!e.color&&"text-muted",`text-${e.color}`]},[e.$slots.label?e._t("label"):[e._v(" "+e._s(e.label)+" ")]],2),n("div",{staticClass:"text-subtitle",class:`text-${e.color}`},[e.$slots.text?e._t("text"):[e._v(" "+e._s(e.$helpers.fallback(e.text))+" ")]],2)])},j=[],H=r(Q,U,j,!1,null,null,null,null);const z=H.exports,K={components:{ClientCardItem:z},props:{client:{type:Object,default:()=>({})}},data(){return{icons:{faEye:N,faQuestionCircle:w}}},computed:{clientHasBalance(){return this.client.has_balance&&this.client.balance>0},clientCityInfo(){var n,a,s;const t=(n=this.client.city)==null?void 0:n.name,e=(s=(a=this.client.city)==null?void 0:a.state)==null?void 0:s.abbreviation;return t?`${t} - ${e||"N/A"}`:"N/A"},clientBranchInfo(){var n,a,s,l,c;const t=(a=(n=this.client.branch)==null?void 0:n.city)==null?void 0:a.name,e=(c=(l=(s=this.client.branch)==null?void 0:s.city)==null?void 0:l.state)==null?void 0:c.name;return t?`${t} - ${e||"N/A"}`:"N/A"}},methods:{formatPhone:F,getUrl:$,onShowBalancesClick(){this.$emit("show-balances")},onShowBonusesClick(){this.$emit("show-bonuses")}}};var X=function(){var e=this,n=e._self._c;return n("div",[n("ClientCardItem",{attrs:{label:"Nome",text:e.client.name}}),n("hr"),n("ClientCardItem",{attrs:{label:"Telefone/Celular",text:e.formatPhone(e.client.phone)}}),n("hr"),n("ClientCardItem",{attrs:{label:"Cidade",text:e.clientCityInfo}}),n("hr"),n("ClientCardItem",{attrs:{label:"Filial",text:e.clientBranchInfo}}),n("hr"),n("ClientCardItem",{attrs:{label:"Transportadora",text:e.$helpers.fallback(e.client.shipping_company,"name")}}),e.client.client_recommended?[n("hr"),n("ClientCardItem",{attrs:{label:"Indicação de"},scopedSlots:e._u([{key:"text",fn:function(){return[n("a",{staticClass:"text-decoration-none",attrs:{target:"_blank",href:e.getUrl("clients.show",{client:e.client.client_recommended.id})}},[e._v(e._s(e.$helpers.fallback(e.client.client_recommended,"name")))])]},proxy:!0}],null,!1,2200967425)})]:e._e(),e.client.bonus?[n("hr"),n("ClientCardItem",{attrs:{color:"info",label:"Bônus"},scopedSlots:e._u([{key:"text",fn:function(){return[n("span",{staticClass:"text-info me-1"},[e._v(e._s(e.$helpers.toBRL(e.client.bonus)))]),n("span",{staticClass:"link-primary clickable",on:{click:function(a){return a.preventDefault(),e.onShowBonusesClick.apply(null,arguments)}}},[n("FontAwesomeIcon",{attrs:{icon:e.icons.faEye}})],1),e.client.bonus<0?n("span",{staticClass:"ms-2"},[n("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{icon:e.icons.faQuestionCircle,content:"Quando o bônus está negativo, é porque o valor de um pedido foi alterado e diminuído após o bônus ser utilizado"}})],1):e._e()]},proxy:!0}],null,!1,3908586234)})]:e._e(),n("hr"),n("ClientCardItem",{attrs:{color:e.client.total_owing>0?"danger":"success",label:"Total devendo"},scopedSlots:e._u([{key:"text",fn:function(){return[n("span",{domProps:{innerHTML:e._s(e.$helpers.toBRL(e.client.total_owing,!0))}})]},proxy:!0}])}),e.client.is_sponsor?[n("hr"),n("ClientCardItem",{attrs:{color:e.client.total_owing_as_sponsorship>0?"danger":"success",label:"Total devendo como patrocínio"},scopedSlots:e._u([{key:"text",fn:function(){return[n("span",{domProps:{innerHTML:e._s(e.$helpers.toBRL(e.client.total_owing_as_sponsorship,!0))}})]},proxy:!0}],null,!1,3549156542)})]:e._e(),e.clientHasBalance?[n("hr"),n("ClientCardItem",{attrs:{label:"Saldo",color:e.client.balance>0?"success":"danger"},scopedSlots:e._u([{key:"text",fn:function(){return[n("span",{domProps:{innerHTML:e._s(e.$helpers.toBRL(e.client.balance,!0))}}),n("span",{staticClass:"ms-2"},[n("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"clickable link-primary",attrs:{content:"Ver mais",icon:e.icons.faEye,"fixed-width":""},on:{click:function(a){return a.preventDefault(),e.onShowBalancesClick.apply(null,arguments)}}})],1)]},proxy:!0}],null,!1,2352280840)})]:e._e()],2)},Y=[],J=r(K,X,Y,!1,null,null,null,null);const W=J.exports,Z={data(){return{icons:{faEdit:C,faTrashAlt:S},roles:B}},methods:{onEditClick(){this.$emit("edit-client")},onDeleteClick(){this.$emit("delete-client")}}};var ee=function(){var e=this,n=e._self._c;return n("div",{staticClass:"text-subtitle"},[n("div",{staticClass:"mb-1"},[n("span",{staticClass:"link-primary clickable text-decoration-none",on:{click:function(a){return a.preventDefault(),e.onEditClick.apply(null,arguments)}}},[n("FontAwesomeIcon",{attrs:{icon:e.icons.faEdit,"fixed-width":""}}),e._v(" Editar dados ")],1)]),e.$helpers.canView(e.roles.GERENCIA)?n("div",[n("span",{staticClass:"link-danger clickable",on:{click:e.onDeleteClick}},[n("FontAwesomeIcon",{attrs:{icon:e.icons.faTrashAlt,"fixed-width":""}}),e._v(" Excluir cliente ")],1)]):e._e()])},ne=[],te=r(Z,ee,ne,!1,null,null,null,null);const ae=te.exports,ie={};var le=function(){var e=this;return e._self._c,e._m(0)},se=[function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"text-subtitle text-secondary fw-bold text-center py-4"},[t._v(" SEM CLIENTE VINCULADO ")]),e("div",{staticClass:"small text-center text-secondary"},[t._v(" Vincule um cliente ao pedido nas opções em "),e("b",[t._v("Concluir cadastro")])])])}],re=r(ie,le,se,!1,null,null,null,null);const oe=re.exports,ce={props:{value:{type:Boolean,default:!1},client:{type:Object,default:null}},data(){return{isLoading:!1,form:new I({password:""}),icons:{faTrashAlt:S}}},methods:{async destroy(){this.isLoading=!0;try{await this.$apollo.mutate({mutation:V,variables:{id:this.client.id,password:this.form.password}}),D(this,{message:"Cliente deletado!"})}catch(t){E(this,t)}this.isLoading=!1}}};var de=function(){var e=this,n=e._self._c;return n("AppModal",e._g({attrs:{id:"clientModalDelete",value:e.value,color:"danger"},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faTrashAlt,"fixed-width":""}}),e._v(" Deletar cliente ")]},proxy:!0},{key:"body",fn:function(){return[e.client?n("div",[n("div",{staticClass:"text-center"},[n("FontAwesomeIcon",{staticClass:"text-danger",attrs:{icon:e.icons.faTrashAlt,size:"4x"}})],1),n("div",{staticClass:"text-center mt-2"},[e._v(" Você está deletando o cliente: ")]),n("div",{staticClass:"text-center fw-bold"},[e._v(" "+e._s(e.client.name)+" ")]),n("div",{staticClass:"text-warning fw-bold small my-3"},[e._v(" Isso deletará todos os pedidos e pagamentos do cliente. ")]),n("AppForm",{attrs:{form:e.form,"on-submit":e.destroy}},[n("AppInput",{attrs:{id:"passowrd",name:"password",type:"password",error:e.form.errors.get("password")},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}},[e._v(" Digite sua senha para continuar: ")]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("AppButton",{attrs:{block:"",color:"success","btn-class":"fw-bold",loading:e.isLoading}},[e._v(" Confirmar ")])],1),n("div",{staticClass:"col"},[n("AppButton",{attrs:{disabled:e.isLoading,type:"button","data-bs-dismiss":"modal",block:"",color:"light"}},[e._v(" Cancelar ")])],1)])],1)],1):e._e()]},proxy:!0}])},e.$listeners))},ue=[],me=r(ce,de,ue,!1,null,null,null,null);const fe=me.exports;var d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetClientBalances"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clientId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clientBalances"},arguments:[{kind:"Argument",name:{kind:"Name",value:"client_id"},value:{kind:"Variable",name:{kind:"Name",value:"clientId"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"is_confirmed"},value:{kind:"BooleanValue",value:!0}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paginatorInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PaginatorSimpleParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"payment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clientBalances"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"order"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:552}};d.loc.source={body:`#import "./_PaginatorFragment.gql"

query GetClientBalances (
  $clientId: ID!
  $first: Int!
  $page: Int
) {
  clientBalances (
    client_id: $clientId
    first: $first
    page: $page
    is_confirmed: true
  ) {
    paginatorInfo {
      ...PaginatorSimpleParts
    }

    data {
      id
      value

      payment {
        id
        value
        clientBalances {
          id
          value
        }

        order {
          id
          code
          client {
            id
          }
        }
      }

      created_at
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var h={};function ve(t){return t.filter(function(e){if(e.kind!=="FragmentDefinition")return!0;var n=e.name.value;return h[n]?!1:(h[n]=!0,!0)})}d.definitions=d.definitions.concat(ve(x.definitions));function m(t,e){if(t.kind==="FragmentSpread")e.add(t.name.value);else if(t.kind==="VariableDefinition"){var n=t.type;n.kind==="NamedType"&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(a){m(a,e)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(a){m(a,e)}),t.definitions&&t.definitions.forEach(function(a){m(a,e)})}var p={};(function(){d.definitions.forEach(function(e){if(e.name){var n=new Set;m(e,n),p[e.name.value]=n}})})();function g(t,e){for(var n=0;n<t.definitions.length;n++){var a=t.definitions[n];if(a.name&&a.name.value==e)return a}}function pe(t,e){var n={kind:t.kind,definitions:[g(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var a=p[e]||new Set,s=new Set,l=new Set;for(a.forEach(function(i){l.add(i)});l.size>0;){var c=l;l=new Set,c.forEach(function(i){if(!s.has(i)){s.add(i);var o=p[i]||new Set;o.forEach(function(v){l.add(v)})}})}return s.forEach(function(i){var o=g(t,i);o&&n.definitions.push(o)}),n}const _e=pe(d,"GetClientBalances"),ke={props:{balance:{type:Object,required:!0}},computed:{originalPaymentValue(){const t=this.balance.payment.clientBalances.find(e=>e.value>0);return t?this.balance.payment.value+t.value:this.balance.payment.value},getOrderUrl(){return this.$helpers.getUrl("orders.show",{client:this.balance.payment.order.client.id,order:this.balance.payment.order.id})},getListGroupColor(){return this.balance.value>0?"list-group-item-success":"list-group-item-danger"}},methods:{formatDatetime:M}};var he=function(){var e=this,n=e._self._c;return n("li",{staticClass:"list-group list-group-item",class:e.getListGroupColor},[n("div",{staticClass:"d-flex justify-content-between"},[n("span",{staticClass:"fw-bold"},[e._v(e._s(e.$helpers.toBRL(e.balance.value,!1,e.balance.value>0)))]),n("span",{staticClass:"small text-secondary"},[e._v(e._s(e.formatDatetime(e.balance.created_at)))])]),n("div",{staticClass:"small text-secondary"},[e._v(" Pagamento de "),n("span",{staticClass:"fw-bold"},[e._v(" "+e._s(e.$helpers.toBRL(e.balance.payment.value))+" ")]),e._v(" no pedido "),n("a",{staticClass:"fw-bold text-decoration-none",attrs:{target:"_blank",href:e.getOrderUrl}},[e._v(e._s(e.balance.payment.order.code))])]),e.balance.payment.value!==e.originalPaymentValue?n("div",{staticClass:"text-secondary small"},[e._v(" ("+e._s(e.$helpers.toBRL(e.originalPaymentValue))+" restou "+e._s(e.$helpers.toBRL(e.balance.value))+") ")]):e._e()])},ge=[],ye=r(ke,he,ge,!1,null,null,null,null);const be=ye.exports,Ce={components:{ClientBalancesItem:be},props:{client:{type:Object,required:!0}},apollo:{clientBalances:{query:_e,variables(){return{clientId:this.client.id,first:10,page:this.page}}}},data(){return{page:1,clientBalances:{paginatorInfo:{},data:[]}}},computed:{isQueryLoading(){return!!this.clientBalances.loading}}};var $e=function(){var e=this,n=e._self._c;return n("div",{staticClass:"position-relative"},[n("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isQueryLoading,expression:"isQueryLoading"}]}),n("ul",{staticClass:"list-group list-group-flush"},e._l(e.clientBalances.data,function(a){return n("ClientBalancesItem",{key:a.id,attrs:{balance:a}})}),1),n("AppPaginator",{staticClass:"mt-3",attrs:{loading:e.isQueryLoading,pagination:e.clientBalances.paginatorInfo},model:{value:e.page,callback:function(a){e.page=a},expression:"page"}})],1)},Se=[],xe=r(Ce,$e,Se,!1,null,null,null,null);const Ne=xe.exports,we={components:{ClientBalances:Ne},props:{client:{type:Object,default:()=>({})},value:{type:Boolean,default:!1}}};var Fe=function(){var e=this,n=e._self._c;return n("AppModal",e._g({attrs:{id:"clientBalacesModal",value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Histórico de saldo do cliente ")]},proxy:!0},{key:"body",fn:function(){return[e.value?n("ClientBalances",{attrs:{client:e.client}}):e._e()]},proxy:!0}])},e.$listeners))},Be=[],Ie=r(we,Fe,Be,!1,null,null,null,null);const De=Ie.exports,Ee={props:{items:{type:Array,default:()=>[]}},computed:{headers(){return[{value:"client",text:"Cliente"},{value:"order",text:"Pedido"},{value:"value",text:"Bônus",format:"currencyBRL"},{value:"created_at",text:"Data",format:"datetime",formatting:"f"}]}},methods:{getUrl:$}};var Me=function(){var e=this,n=e._self._c;return n("AppTable",{attrs:{items:e.items,headers:e.headers},scopedSlots:e._u([{key:"items.client",fn:function({item:a}){return[n("a",{staticClass:"text-decoration-none",attrs:{target:"_blank",href:e.getUrl("clients.show",{client:a.order.client.id})}},[e._v(e._s(a.order.client.name))])]}},{key:"items.order",fn:function({item:a}){return[n("a",{staticClass:"text-decoration-none",attrs:{target:"_blank",href:e.getUrl("orders.show",{client:a.order.client.id,order:a.order.id})}},[e._v(e._s(a.order.code))])]}}],null,!0)})},Ae=[],Re=r(Ee,Me,Ae,!1,null,null,null,null);const Le=Re.exports;var u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetBonusesFromClient"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bonusesFromClient"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paginatorInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PaginatorSimpleParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"order"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:425}};u.loc.source={body:`#import "./_PaginatorFragment.gql"

query GetBonusesFromClient($id: ID!, $first: Int!, $page: Int) {
  bonusesFromClient(id: $id, first: $first, page: $page) {
    paginatorInfo {
      ...PaginatorSimpleParts
    }
    data {
      id
      client {
        id
        name
      }
      order {
        id
        code
        client {
          id
          name
        }
      }
      value
      created_at
    }
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var y={};function Ve(t){return t.filter(function(e){if(e.kind!=="FragmentDefinition")return!0;var n=e.name.value;return y[n]?!1:(y[n]=!0,!0)})}u.definitions=u.definitions.concat(Ve(x.definitions));function f(t,e){if(t.kind==="FragmentSpread")e.add(t.name.value);else if(t.kind==="VariableDefinition"){var n=t.type;n.kind==="NamedType"&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(a){f(a,e)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(a){f(a,e)}),t.definitions&&t.definitions.forEach(function(a){f(a,e)})}var _={};(function(){u.definitions.forEach(function(e){if(e.name){var n=new Set;f(e,n),_[e.name.value]=n}})})();function b(t,e){for(var n=0;n<t.definitions.length;n++){var a=t.definitions[n];if(a.name&&a.name.value==e)return a}}function Te(t,e){var n={kind:t.kind,definitions:[b(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var a=_[e]||new Set,s=new Set,l=new Set;for(a.forEach(function(i){l.add(i)});l.size>0;){var c=l;l=new Set,c.forEach(function(i){if(!s.has(i)){s.add(i);var o=_[i]||new Set;o.forEach(function(v){l.add(v)})}})}return s.forEach(function(i){var o=b(t,i);o&&n.definitions.push(o)}),n}const Pe=Te(u,"GetBonusesFromClient"),Oe={apollo:{bonusesFromClient:{query:Pe,variables(){return{first:10,page:this.page,id:this.client.id}},skip(){return!this.value}}},components:{ClientBonusesModalTable:Le},props:{client:{type:Object,required:!0},value:{type:Boolean,default:!1}},data:()=>({page:1,bonusesFromClient:{paginatorInfo:{},data:[]}})};var qe=function(){var e=this,n=e._self._c;return n("AppModal",e._g(e._b({attrs:{id:"clientBonusesModal",value:e.value,"modal-dialog-class":"modal-dialog-centered"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Histórico de bônus ")]},proxy:!0},e.value?{key:"body",fn:function(){return[n("ClientBonusesModalTable",{attrs:{items:e.bonusesFromClient.data}}),n("AppPaginator",{attrs:{pagination:e.bonusesFromClient.paginatorInfo},model:{value:e.page,callback:function(a){e.page=a},expression:"page"}}),n("div",{staticClass:"text-end"},[n("AppButton",{attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)]},proxy:!0}:null],null,!0)},"AppModal",e.$attrs,!1),e.$listeners))},Ge=[],Qe=r(Oe,qe,Ge,!1,null,null,null,null);const Ue=Qe.exports,je={components:{ClientModalEdit:G,ClientCardItems:W,ClientCardFooter:ae,ClientCardNotExist:oe,ClientModalDelete:fe,ClientBalancesModal:De,ClientBonusesModal:Ue},props:{client:{type:Object,default:null},showOptions:{type:Boolean,default:!0},clientKey:{type:[String,Number],default:null},isLoading:{type:Boolean,required:!0}},data(){return{clientBonusesModal:{value:!1},clientBalancesModal:{value:!1,client:{}},clientModalEdit:{value:!1,client:null},clientModalDelete:{value:!1,client:null},icons:{faUser:A}}},computed:{key(){return this.clientKey||this.$route.params.clientKey}},watch:{client(t){k(t)||(this.skip=!1)}},methods:{isEmpty:k,onEditClient(){this.clientModalEdit.client=this.client,this.clientModalEdit.value=!0},onDeleteClient(){this.clientModalDelete.client=this.client,this.clientModalDelete.value=!0},onEditSuccess(){this.clientModalEdit.client=null,this.clientModalEdit.value=!1},onDeleteSuccess(){this.clientModalDelete.value=!1,this.$nextTick(()=>{this.$helpers.clearCacheFrom({id:this.client.id,__typename:"Client"}),this.$router.push({name:R.index})})},onShowBalances(){this.clientBalancesModal.client=this.client,this.clientBalancesModal.value=!0},onShowBonuses(){this.clientBonusesModal.value=!0}}};var He=function(){var e=this,n=e._self._c;return n("AppCard",{attrs:{color:"success",collapsible:e.$isMobile},scopedSlots:e._u([{key:"header",fn:function(){return[n("h6",{staticClass:"mb-0 fw-bold"},[n("FontAwesomeIcon",{staticClass:"fa-fw",attrs:{icon:e.icons.faUser}}),e.client?[e._v(" "+e._s(e.$isMobile?e.client.name:"Cliente")+" ")]:e._e()],2)]},proxy:!0},e.isEmpty(e.client)?e.isLoading?{key:"body",fn:function(){return[n("div",{staticClass:"py-5"},[n("AppLoading")],1)]},proxy:!0}:e.isEmpty(e.client)?{key:"body",fn:function(){return[n("ClientCardNotExist")]},proxy:!0}:null:{key:"body",fn:function(){return[n("ClientBalancesModal",{attrs:{client:e.clientBalancesModal.client},model:{value:e.clientBalancesModal.value,callback:function(a){e.$set(e.clientBalancesModal,"value",a)},expression:"clientBalancesModal.value"}}),n("ClientBonusesModal",{attrs:{client:e.client},model:{value:e.clientBonusesModal.value,callback:function(a){e.$set(e.clientBonusesModal,"value",a)},expression:"clientBonusesModal.value"}}),n("ClientModalEdit",{attrs:{client:e.clientModalEdit.client},on:{success:e.onEditSuccess},model:{value:e.clientModalEdit.value,callback:function(a){e.$set(e.clientModalEdit,"value",a)},expression:"clientModalEdit.value"}}),n("ClientModalDelete",{attrs:{client:e.clientModalDelete.client},on:{success:e.onDeleteSuccess},model:{value:e.clientModalDelete.value,callback:function(a){e.$set(e.clientModalDelete,"value",a)},expression:"clientModalDelete.value"}}),n("ClientCardItems",{attrs:{client:e.client},on:{"show-balances":e.onShowBalances,"show-bonuses":e.onShowBonuses}}),n("hr"),n("ClientCardFooter",{on:{"edit-client":e.onEditClient,"delete-client":e.onDeleteClient}})]},proxy:!0}],null,!0)})},ze=[],Ke=r(je,He,ze,!1,null,null,null,null);const Ze=Ke.exports;export{Ze as C};
