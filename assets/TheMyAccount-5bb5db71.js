import{n as o,G as r,F as n,aO as u,s as l,u as c,p as i,aP as d,aQ as m,aR as p,N as f}from"./index-4e05606f.js";const _={props:{value:{type:Boolean,default:!1},authUser:{type:Object,default:()=>({})}},data(){return{changePassword:!1,isLoading:!1,icons:{faEdit:r},form:new n({name:"",email:"",password:"",password_confirmation:""})}},methods:{onModalShow(){const{name:e,email:t}=this.authUser;this.form.name=e,this.form.email=t},async onSubmit(){const e=this.form.data();this.isLoading=!0;try{await this.$apollo.mutate({mutation:u,variables:{input:e}}),l(this,{message:"Dados atualizados!"})}catch(t){c(this,t)}this.isLoading=!1}}};var h=function(){var t=this,a=t._self._c;return a("AppModal",t._g({attrs:{id:"modalEditAccount",value:t.value,centered:""},on:{show:t.onModalShow},scopedSlots:t._u([{key:"title",fn:function(){return[a("FontAwesomeIcon",{attrs:{icon:t.icons.faEdit}}),t._v(" Editar dados da sua conta ")]},proxy:!0},{key:"body",fn:function(){return[t.value?a("AppForm",{attrs:{form:t.form,"on-submit":t.onSubmit}},[a("AppInput",{attrs:{id:"name",name:"name",placeholder:"Seu nome...",error:t.form.errors.get("name"),autocomplete:"name"},model:{value:t.form.name,callback:function(s){t.$set(t.form,"name",s)},expression:"form.name"}},[t._v(" Nome: ")]),a("AppInput",{attrs:{id:"email",name:"email",placeholder:"Seu email...",error:t.form.errors.get("email"),autocomplete:"email"},model:{value:t.form.email,callback:function(s){t.$set(t.form,"email",s)},expression:"form.email"}},[t._v(" E-mail: ")]),a("AppCheckbox",{attrs:{id:"changePassword"},model:{value:t.changePassword,callback:function(s){t.changePassword=s},expression:"changePassword"}},[t._v(" Alterar senha ")]),t.changePassword?[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm"},[a("AppInput",{attrs:{id:"password",name:"password",autocomplete:"new-password",error:t.form.errors.get("password"),"default-margin":!1,type:"password"},model:{value:t.form.password,callback:function(s){t.$set(t.form,"password",s)},expression:"form.password"}},[t._v(" Nova senha: ")])],1),a("div",{staticClass:"col-12 col-sm"},[a("AppInput",{attrs:{id:"password_confirmation",name:"password_confirmation",autocomplete:"new-password",error:t.form.errors.get("password_confirmation"),"default-margin":!1,type:"password"},model:{value:t.form.password_confirmation,callback:function(s){t.$set(t.form,"password_confirmation",s)},expression:"form.password_confirmation"}},[t._v(" Confirme a senha: ")])],1)]),a("small",{staticClass:"form-text"},[t._v("Você também pode deixar em branco caso não queira alterá-la")])]:t._e(),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("AppButton",{attrs:{block:"",color:"success","btn-class":"fw-bold",loading:t.isLoading}},[t._v(" Atualizar ")])],1),a("div",{staticClass:"col"},[a("AppButton",{attrs:{block:"",color:"light",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],2):t._e()]},proxy:!0}])},t.$listeners))},v=[],w=o(_,h,v,!1,null,null,null,null);const A=w.exports,b={props:{value:{type:Boolean,default:!1}},data(){return{isLoading:!1,form:new n({password:""}),icons:{faTrashAlt:i}}},methods:{async onSubmit(){const{password:e}=this.form.data();this.isLoading=!0;try{await this.$apollo.mutate({mutation:d,variables:{password:e}}),l(this,{message:"Sua conta foi deletada!"})}catch(t){c(this,t)}this.isLoading=!1}}};var g=function(){var t=this,a=t._self._c;return a("AppModal",t._g({attrs:{id:"modalDeleteAccount",value:t.value,color:"danger",centered:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"text-center"},[a("FontAwesomeIcon",{staticClass:"text-danger",attrs:{size:"5x",icon:t.icons.faTrashAlt}}),a("h6",{staticClass:"fw-bold mt-3"},[t._v(" Você tem certeza que deseja deletar a sua conta? ")])],1),a("AppForm",{staticClass:"mt-5",attrs:{form:t.form,"on-submit":t.onSubmit,autocomplete:"off"}},[a("input",{staticClass:"d-none",attrs:{type:"email",name:"email",autocomplete:"off"}}),a("AppInput",{attrs:{id:"password",name:"password",placeholder:"Sua senha...",error:t.form.errors.get("password"),type:"password",autocomplete:"new-password"},model:{value:t.form.password,callback:function(s){t.$set(t.form,"password",s)},expression:"form.password"}},[t._v(" Confirme sua senha: ")]),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("AppButton",{attrs:{color:"success","btn-class":"fw-bold",block:"",loading:t.isLoading}},[t._v(" Confirmar ")])],1),a("div",{staticClass:"col"},[a("AppButton",{attrs:{color:"light",block:"",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],1)]},proxy:!0}])},t.$listeners))},C=[],y=o(b,g,C,!1,null,null,null,null);const x=y.exports,k={metaInfo:{title(){return"Minha conta"}},components:{ModalEditAccount:A,ModalDeleteAccount:x},data(){return{modalEditAccount:!1,modalDeleteAccount:!1,icons:{faUser:m,faUserCircle:p,faTrashAlt:i,faEdit:r}}},computed:{authUser(){return this.$store.getters["auth/authUser"]}},methods:{formatDatetime:f,onEditAccountClick(){this.modalEditAccount=!0},async onEditAccountSuccess(){this.modalEditAccount=!1,await this.$store.dispatch("auth/getAuthUser")},onDeleteAccountClick(){this.modalDeleteAccount=!0},onDeleteAccountSuccess(){this.modalDeleteAccount=!1,this.$nextTick(async()=>{await this.$store.dispatch("auth/logout")})}}};var D=function(){var t=this,a=t._self._c;return a("div",{staticClass:"py-5"},[a("div",{staticClass:"col col-sm-6 mx-auto"},[a("AppCard",{scopedSlots:t._u([{key:"header",fn:function(){return[a("h6",{staticClass:"fw-bold mb-0"},[a("FontAwesomeIcon",{attrs:{icon:t.icons.faUser}}),t._v(" Minha conta ")],1)]},proxy:!0},{key:"body",fn:function(){return[a("ModalEditAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onEditAccountSuccess},model:{value:t.modalEditAccount,callback:function(s){t.modalEditAccount=s},expression:"modalEditAccount"}}),a("ModalDeleteAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onDeleteAccountSuccess},model:{value:t.modalDeleteAccount,callback:function(s){t.modalDeleteAccount=s},expression:"modalDeleteAccount"}}),a("div",{staticClass:"text-center mb-3"},[a("FontAwesomeIcon",{staticClass:"text-primary",attrs:{icon:t.icons.faUserCircle,size:"5x"}})],1),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[a("b",[t._v("Nome: ")]),t._v(" "+t._s(t.authUser.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("E-mail: ")]),t._v(" "+t._s(t.authUser.email)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Nível de usuário: ")]),t._v(" "+t._s(t.authUser.role.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Senha: ")]),t._v(" ***** ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Criada em:")]),t._v(" "+t._s(t.formatDatetime(t.authUser.created_at))+" ")])]),a("div",{staticClass:"mt-3"},[a("AppButton",{attrs:{block:"",outlined:"","btn-class":"fw-bold",icon:t.icons.faEdit},on:{click:function(s){return s.preventDefault(),t.onEditAccountClick.apply(null,arguments)}}},[t._v(" Editar dados ")])],1),a("div",{staticClass:"text-end text-subtitle mt-2"},[a("span",{staticClass:"link-danger clickable",on:{click:function(s){return s.preventDefault(),t.onDeleteAccountClick.apply(null,arguments)}}},[a("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")],1)])]},proxy:!0}])})],1)])},E=[],$=o(k,D,E,!1,null,null,null,null);const U=$.exports;export{U as default};
