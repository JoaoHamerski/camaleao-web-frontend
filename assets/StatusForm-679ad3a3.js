import{n as r,F as n,s as e,u as o}from"./index-4e05606f.js";import{C as l,U as u}from"./Status-e5c68e0d.js";const c={props:{status:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},data(){return{isLoading:!1,form:new n({text:""})}},mounted(){this.isEdit&&this.populateForm(),this.$parent.$once("shown",this.focusInput)},methods:{focusInput(){this.$refs.textInput.focusInput()},populateForm(){this.form.text=this.status.text},async create(s){try{await this.$apollo.mutate({mutation:l,variables:{input:s}}),e(this,{message:"Novo status registrado!",resetForm:!0})}catch(t){o(this,t)}},async update(s){try{await this.$apollo.mutate({mutation:u,variables:{id:this.status.id,input:s}}),e(this,{message:"Status atualizado!"})}catch(t){o(this,t)}},async onSubmit(){const s=this.form.data();this.isLoading=!0,this.isEdit?await this.update(s):await this.create(s),this.$helpers.clearCacheFrom({fieldName:"status"}),this.isLoading=!1}}};var m=function(){var t=this,a=t._self._c;return a("AppForm",{attrs:{form:t.form,"on-submit":t.onSubmit}},[a("AppInput",{ref:"textInput",attrs:{id:"text",name:"text",placeholder:"Digite um nome para o status...",error:t.form.errors.get("text")},model:{value:t.form.text,callback:function(i){t.$set(t.form,"text",i)},expression:"form.text"}},[t._v(" Nome do status ")]),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("AppButton",{attrs:{type:"submit",color:"success","btn-class":"fw-bold",block:"",loading:t.isLoading}},[t._v(" "+t._s(t.isEdit?"Atualizar":"Cadastrar")+" ")])],1),a("div",{staticClass:"col"},[a("AppButton",{attrs:{type:"button","data-bs-dismiss":"modal",block:"",color:"light",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],1)},d=[],p=r(c,m,d,!1,null,null,null,null);const _=p.exports;export{_ as default};
