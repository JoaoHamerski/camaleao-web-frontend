import{n as p,aB as l,G as m,a2 as d,F as i,i as u,s as r,u as n}from"./index-fae63e1f.js";import{G as c,C as f,U as y}from"./ExpensesForm-9d8c3592.js";import"./masks-168ccaff.js";import"./filesMixin-e7ac34d1.js";import"./filter-58b32e89.js";import"./pasteFilesMixin-1129ca11.js";import"./Expense-8b8780bc.js";import"./_PaginatorFragment-c01a3fe7.js";import"./DailyCash-da8f8b01.js";import"./PaymentExpense-9583d97d.js";import"./Via-eb0eedf9.js";import"./User-8fb57da5.js";import"./ViewerItemsCardFile-6146f446.js";import"./vue-load-image-65c59e9a.js";import"./has-1f08a56a.js";import"./SelectEntriesFind-e5d39e3c.js";import"./truncate-9ccec01d.js";import"./omit-574aa98c.js";import"./_flatRest-a6acb8a9.js";const h={props:{value:{type:Boolean,default:!1}},apollo:{expenseTypes:{query:c}},data(){return{icons:{faList:l,faEdit:m,faFunnelDollar:d},isLoadingCreate:!1,form:new i({name:""}),isLoadingEdit:!1,editForm:new i({name:""}),editingType:{},expenseTypes:[]}},methods:{isEmpty:u,onEditExpenseType(a){this.editingType=a,this.editForm.reset(),this.editForm.name=a.name},async onCreate(){const a={...this.form.data()};this.isLoadingCreate=!0;try{await this.$apollo.mutate({mutation:f,variables:{input:a},refetchQueries:["GetExpenseTypes"]}),r(this,{message:"Tipo de despesa registrado!",resetForm:!0})}catch(e){n(this,e)}this.isLoadingCreate=!1},async onUpdate(){const a={...this.editForm.data()};this.isLoadingEdit=!0;try{await this.$apollo.mutate({mutation:y,variables:{id:this.editingType.id,input:a}}),r(this,{message:"Tipo de despesa atualizado!",formProp:"editForm",resetForm:!0})}catch(e){n(this,e)}this.isLoadingEdit=!1,this.editingType={}}}};var g=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"expensesTypesModal",value:e.value,centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faList,"fixed-width":""}}),e._v(" Gerenciar tipos de despesas ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"text-center"},[t("FontAwesomeIcon",{staticClass:"text-primary mb-4 mt-2",attrs:{size:"3x",icon:e.icons.faFunnelDollar}})],1),t("AppForm",{attrs:{form:e.form,"on-submit":e.onCreate}},[t("AppInput",{attrs:{name:"name",placeholder:"Nome do tipo de despesa...",error:e.form.errors.get("name")},scopedSlots:e._u([{key:"append",fn:function(){return[t("AppButton",{attrs:{type:"submit",outlined:"",loading:e.isLoadingCreate},on:{click:function(s){return s.preventDefault(),e.onCreate.apply(null,arguments)}}},[e._v(" Adicionar ")])]},proxy:!0}]),model:{value:e.form.name,callback:function(s){e.$set(e.form,"name",s)},expression:"form.name"}})],1),t("ul",{staticClass:"list-group"},e._l(e.expenseTypes,function(s){return t("li",{key:s.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e.editingType===s?[t("AppForm",{staticClass:"w-100",attrs:{form:e.editForm,"on-submit":e.onUpdate}},[t("AppInput",{staticClass:"col",attrs:{name:"name",placeholder:"Nome do tipo de despesa...",error:e.editForm.errors.get("name"),"default-margin":!1},scopedSlots:e._u([{key:"append",fn:function(){return[t("AppButton",{attrs:{type:"submit",outlined:"",loading:e.isLoadingEdit},on:{click:function(o){return o.preventDefault(),e.onUpdate.apply(null,arguments)}}},[e._v(" Atualizar ")])]},proxy:!0}],null,!0),model:{value:e.editForm.name,callback:function(o){e.$set(e.editForm,"name",o)},expression:"editForm.name"}})],1)]:[t("div",[e._v(e._s(s.name))]),t("AppButton",{attrs:{outlined:"","btn-class":"btn-sm",tooltip:"Editar",icon:e.icons.faEdit},on:{click:function(o){return o.preventDefault(),e.onEditExpenseType(s)}}})]],2)}),0),t("div",{staticClass:"d-flex mt-3"},[t("AppButton",{staticClass:"ms-auto",attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)]},proxy:!0}])},e.$listeners))},x=[],_=p(h,g,x,!1,null,null,null,null);const N=_.exports;export{N as default};
