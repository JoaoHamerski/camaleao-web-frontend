import{c as l}from"./OrderControl-1f6a4d8d.js";import{n,i as a,b4 as u,o as p}from"./index-4e05606f.js";const _={props:{orders:{type:Array,default:()=>[]}},computed:{headers(){return[{text:"Cód.",value:"code"},{text:"Peças",value:"quantity"}]}},methods:{rowClass(){return"small"},tableRowRoute(t){return{name:"orders.show",params:this.$helpers.getRouteParams({order:t,client:t.client})}}}};var h=function(){var e=this,r=e._self._c;return r("AppTable",{attrs:{"table-class":"table-sm","row-class":e.rowClass,items:e.orders,headers:e.headers,route:e.tableRowRoute,"open-in-new-tab":""}})},m=[],f=n(_,h,m,!1,null,null,null,null);const c=f.exports;const P={components:{ProductionPanelOrdersTable:c},props:{orders:{type:Array,default:()=>[]},total:{type:Number,required:!0}},computed:{totalShowingOrders(){return this.orders.length},hasOrders(){return!!this.orders.length}},methods:{seeAllOrdersClick(){this.$emit("show-sector")}}};var v=function(){var e=this,r=e._self._c;return r("div",{staticClass:"sector-orders-body custom-scrollbar"},[e.orders.length?r("div",{staticClass:"small"},[e._v(" Exibindo "+e._s(e.orders.length)+" de "+e._s(e.total)+" pedidos. "),e.total>e.totalShowingOrders?[r("b",{staticClass:"link-primary clickable",on:{click:e.seeAllOrdersClick}},[e._v("Ver todos")]),e._v(". ")]:e._e()],2):e._e(),r("ProductionPanelOrdersTable",{directives:[{name:"show",rawName:"v-show",value:e.hasOrders,expression:"hasOrders"}],attrs:{orders:e.orders}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.hasOrders,expression:"!hasOrders"}],staticClass:"text-center text-secondary small"},[e._v(" Nenhum pedido encontrado ")])],1)},y=[],g=n(P,v,y,!1,null,"3c97978e",null,null);const C=g.exports,i={day:"dia",week:"semana",month:"mês"},w={props:{selectedPeriod:{type:String,required:!0},ordersOnPeriods:{type:Object,required:!0}},data(){return{PERIODS:i}},computed:{periodsAllowed(){return Object.keys(i)}},methods:{onPeriodClick(t){this.$emit("period-changed",{period:t})}}};var b=function(){var e=this,r=e._self._c;return r("div",{staticClass:"d-flex justify-content-between"},[e._l(e.ordersOnPeriods,function(s,o){return[e.periodsAllowed.includes(o)?r("span",{key:o},[r("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"badge text-capitalize",class:{"bg-success":e.selectedPeriod===o,"bg-link-primary clickable":e.selectedPeriod!==o},attrs:{content:`Anterior: ${s.previous_count}`},on:{click:function(T){return e.onPeriodClick(o)}}},[e._v(" "+e._s(e.PERIODS[o])+": "+e._s(s.current_count)+" ")])]):e._e()]})],2)},$=[],O=n(w,b,$,!1,null,null,null,null);const d=O.exports,S={components:{ProductionPanelOrdersList:C,ProductionPanelDaysCount:d},props:{sector:{type:Object,required:!0},ordersOnPeriods:{type:Object,required:!0},selectedPeriod:{type:String,required:!0}},computed:{sectorName(){return a(this.sector.alias)?this.sector.name:this.sector.alias}},methods:{onShowSector(){this.$emit("show-sector",{sector:this.sector})},onPeriodChanged({period:t}){this.$emit("period-changed",{period:t,sector:this.sector})}}};var x=function(){var e=this,r=e._self._c;return r("AppCard",{staticClass:"mb-3",attrs:{color:"camaleao"},scopedSlots:e._u([{key:"header",fn:function(){return[r("b",[e._v(e._s(e.sectorName))])]},proxy:!0},{key:"body",fn:function(){return[r("ProductionPanelOrdersList",{attrs:{orders:e.ordersOnPeriods[e.selectedPeriod].current_orders.data,total:e.ordersOnPeriods[e.selectedPeriod].current_orders.paginatorInfo.total},on:{"show-sector":e.onShowSector}})]},proxy:!0},{key:"footer",fn:function(){return[r("ProductionPanelDaysCount",{attrs:{"orders-on-periods":e.ordersOnPeriods,"selected-period":e.selectedPeriod},on:{"period-changed":e.onPeriodChanged}})]},proxy:!0}])})},k=[],A=n(S,x,k,!1,null,null,null,null);const D=A.exports,R={components:{ProductionPanelDaysCount:d,ProductionPanelOrdersTable:c},props:{sectorData:{type:Object,required:!0},page:{type:Number,required:!0}},data(){return{icons:{faArrowCircleLeft:u}}},computed:{sector(){return this.sectorData.sector},periods(){return this.sectorData.orders_on_periods},selectedPeriod(){return this.sectorData.selectedPeriod},orders(){var t,e;return((e=(t=this.periods[this.selectedPeriod])==null?void 0:t.current_orders)==null?void 0:e.data)||[]},pagination(){var t,e;return((e=(t=this.periods[this.selectedPeriod])==null?void 0:t.current_orders)==null?void 0:e.paginatorInfo)||{}},sectorName(){return a(this.sector.alias)?this.sector.name:this.sector.alias}},methods:{isEmpty:a,onPeriodChanged({period:t}){this.$emit("period-changed",{sector:this.sector,period:t})},onBackClick(){this.$emit("close-all-orders")}}};var q=function(){var e=this,r=e._self._c;return r("div",[r("AppButton",{attrs:{icon:e.icons.faArrowCircleLeft,outlined:""},on:{click:function(s){return s.preventDefault(),e.onBackClick.apply(null,arguments)}}},[e._v(" Voltar ")]),r("h5",{staticClass:"text-primary fw-bold mt-2"},[e._v(" "+e._s(e.sectorName)+" ")]),r("div",{staticClass:"col col-sm-4 my-3"},[r("ProductionPanelDaysCount",{attrs:{"orders-on-periods":e.periods,"selected-period":e.selectedPeriod},on:{"period-changed":e.onPeriodChanged}})],1),r("ProductionPanelOrdersTable",{staticClass:"my-2",attrs:{orders:e.orders}}),r("AppPaginator",{attrs:{value:e.page,pagination:e.pagination},on:{input:function(s){return e.$emit("update:page",s)}}})],1)},N=[],j=n(R,q,N,!1,null,null,null,null);const E=j.exports,F={components:{ProductionPanelCard:D,ProductionPanelExpandedCard:E},apollo:{productionPanel:{query:l,variables(){return{first:10,page:this.page}},update(t){return t.productionPanel.map(e=>{const r=this.sectorSelected&&this.sectorDisplayed.id===e.sector.id?this.sectorSelected.selectedPeriod:"day";return{...e,selectedPeriod:r}})}}},data(){return{page:1,sectorDisplayed:{},productionPanel:[],icons:{faSyncAlt:p}}},computed:{sectorSelected(){return a(this.sectorDisplayed)?null:this.findSector(this.sectorDisplayed)},loading(){return!!this.$apollo.queries.productionPanel.loading}},methods:{isEmpty:a,refresh(){this.$apollo.queries.productionPanel.refetch()},onCloseAllOrders(){this.sectorDisplayed={},this.page=1},findSector(t){return this.productionPanel.find(e=>e.sector.id===t.id)},onShowSector({sector:t}){this.sectorDisplayed=t},onPeriodChanged({period:t,sector:e}){const r=this.findSector(e);this.page=1,r.selectedPeriod=t}}};var L=function(){var e=this,r=e._self._c;return r("div",[r("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]}),r("AppTransition",{attrs:{enter:"fadeIn",mode:"out-in"}},[e.sectorSelected?r("ProductionPanelExpandedCard",{attrs:{"sector-data":e.sectorSelected,page:e.page},on:{"update:page":function(s){e.page=s},"close-all-orders":e.onCloseAllOrders,"period-changed":e.onPeriodChanged}}):r("div",[r("AppButton",{staticClass:"mb-2",attrs:{icon:e.icons.faSyncAlt,outlined:""},on:{click:function(s){return s.preventDefault(),e.refresh.apply(null,arguments)}}}),r("div",{staticClass:"row row-cols-1 row-cols-sm-3"},e._l(e.productionPanel,function(s){return r("div",{key:s.sector.id},[r("ProductionPanelCard",{attrs:{"selected-period":s.selectedPeriod,sector:s.sector,"orders-on-periods":s.orders_on_periods},on:{"period-changed":e.onPeriodChanged,"show-sector":e.onShowSector}})],1)}),0)],1)],1)],1)},B=[],I=n(F,L,B,!1,null,null,null,null);const G=I.exports;export{G as P};
