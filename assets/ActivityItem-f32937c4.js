import{n as a,N as o,r as l,_ as d,a$ as u,$ as p,W as c,am as _,aX as f,a2 as h,Y as y,K as v,I as b,aq as g,a4 as i,m as x}from"./index-4e05606f.js";const j=(s,e)=>{const t=s[e];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((r,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))})},T={props:{propsOld:{type:Object,required:!0},propsUpdated:{type:Object,required:!0},map:{type:Object,required:!0}},computed:{propsKeys(){return Object.keys(this.propsOld)},mapKeys(){return Object.keys(this.map)}},methods:{formatDatetime:o,formatCurrencyBRL:l,formatPhone:d,getFormattedKey(s){return this.map[s].text},handleBoolean(s,e){return e[s!==null?!!s:null]},handleList(s){return s.length?`<ul class="list-group list-group-sm">${s.map(t=>`<li class="list-group-item">${t}</li>`).join("")}</ul>`:"N/A"},handleType(s,e){if(e.type==="boolean")return this.handleBoolean(s,e.handle);if(e.type==="list")return this.handleList(s)},getFormattedProp(s,e){const t=this.map[e];if(t.type)return this.handleType(s,t);if(!s)return"N/A";if(t.format){const r="format"+u(t.format);return this[r](s)}return s}}};var O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm"},[e._m(0),t("tbody",[e._l(e.mapKeys,function(r){return[e.propsKeys.includes(r)?t("tr",{key:r},[t("td",{staticClass:"fw-bold w-25"},[e._v(" "+e._s(e.getFormattedKey(r))+" ")]),t("td",{domProps:{innerHTML:e._s(e.getFormattedProp(e.propsOld[r],r))}}),t("td",{domProps:{innerHTML:e._s(e.getFormattedProp(e.propsUpdated[r],r))}})]):e._e()]})],2)])])},P=[function(){var s=this,e=s._self._c;return e("thead",[e("tr",[e("th"),e("th",[s._v("DE")]),e("th",[s._v("PARA")])])])}],A=a(T,O,P,!1,null,null,null,null);const I=A.exports;const $={components:{ActivityItemChangesProps:I},props:{item:{type:Object,default:()=>({})},propsMap:{type:Object,required:!0}},data(){return{collapse:!1}},computed:{properties(){return JSON.parse(this.item.properties)},old(){return this.properties.old},updated(){return this.properties.attributes}}};var R=function(){var e=this,t=e._self._c;return t("AppCollapsible",{attrs:{id:`description_${e.item.id}`,"header-class":"link-primary small","hide-arrow":""},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.collapse?"Ocultar alterações ":"Ver alterações")+" ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"activity-item-changes table-responsive"},[t("ActivityItemChangesProps",{attrs:{"props-old":e.old,"props-updated":e.updated,map:e.propsMap}})],1)]},proxy:!0}]),model:{value:e.collapse,callback:function(r){e.collapse=r},expression:"collapse"}})},C=[],E=a($,R,C,!1,null,"f52750dc",null,null);const D=E.exports,F={orders:p,clients:c,payments:_,notes:f,expenses:h,users:c,cities:y,shipping_companies:v,branches:b,clothing_types:g,configs_orders:p},V={props:{item:{type:Object,required:!0},description:{type:Object,required:!0},attributes:{type:Object,required:!0},text:{type:String,required:!0}},data(){return{icons:{...F}}},computed:{eventType(){return this.description.type},userDeletedItself(){var s,e;return this.eventType==="deleted"&&((e=(s=this.description)==null?void 0:s.causerProps)==null?void 0:e.name)===this.attributes.name},userUpdatedItself(){var s,e;return this.eventType==="updated"&&((e=(s=this.description)==null?void 0:s.causerProps)==null?void 0:e.name)===this.attributes.name},isItemDeleted(){return this.description.type==="configs"?!1:!this.item.subject&&this.description.type!=="deleted"}},methods:{formatDatetime:o}};var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-between"},[t("div",{class:{"text-decoration-line-through":e.isItemDeleted}},[t("FontAwesomeIcon",{staticClass:"me-2",class:{"text-success":e.eventType==="created","text-primary":e.eventType==="updated","text-danger":e.eventType==="deleted"},attrs:{icon:e.icons[e.item.log_name],"fixed-width":""}}),e.userDeletedItself?t("span",[t("b",[e._v(e._s(e.attributes.name))]),e._v(" deletou a própria conta ")]):e.userUpdatedItself?t("span",[t("b",[e._v(e._s(e.item.subject.name||e.attributes.name))]),e._v(" alterou dados da própria conta ")]):t("span",{class:e.$isMobile&&"small",domProps:{innerHTML:e._s(e.text)}})],1),t("div",{staticClass:"small text-secondary text-sm-end my-2 my-sm-0 ms-0 ms-sm-2"},[t("div",[e._v(" "+e._s(e.formatDatetime(e.item.created_at))+" "),t("br",{staticClass:"d-none d-sm-block"}),e._v(" "+e._s(e.formatDatetime(e.item.created_at,"HH:mm"))+" ")])])])},L=[],q=a(V,w,L,!1,null,null,null,null);const S=q.exports,U={components:{ActivityItemChanges:D,ActivityItemText:S},props:{item:{type:Object,default:()=>({})}},data(){return{properties:{}}},computed:{isConfig(){return this.item.log_name.startsWith("configs")},renderPropChanges(){return this.description.type==="updated"&&!this.isConfig},description(){return JSON.parse(this.item.description)},attributes(){const s=JSON.parse(this.item.properties);return(s==null?void 0:s.attributes)||{}},text(){const{placeholderText:s,causerProps:e,subjectProps:t,attributesProps:r}=this.description,n=this.$helpers.replaceStrArray(":causer",this.getValuesToReplace(e,!0),s),m=this.$helpers.replaceStrArray(":subject",this.getValuesToReplace(t,!1),n);return this.$helpers.replaceStrArray(":attribute",this.getValuesToReplace(r,!1),m)}},async created(){const s=this.item.log_name,e=await j(Object.assign({"../properties/branches.map.json":()=>i(()=>import("./branches.map-37337141.js"),[]),"../properties/cities.map.json":()=>i(()=>import("./cities.map-d7731688.js"),[]),"../properties/clients.map.json":()=>i(()=>import("./clients.map-15372b2d.js"),[]),"../properties/clothing_types.map.json":()=>i(()=>import("./clothing_types.map-9cd0e8e6.js"),[]),"../properties/expenses.map.json":()=>i(()=>import("./expenses.map-3a71b93f.js"),[]),"../properties/notes.map.json":()=>i(()=>import("./notes.map-5ddef4bd.js"),[]),"../properties/orders.map.json":()=>i(()=>import("./orders.map-c7d211f2.js"),[]),"../properties/payments.map.json":()=>i(()=>import("./payments.map-a4ccf4e3.js"),[]),"../properties/shipping_companies.map.json":()=>i(()=>import("./shipping_companies.map-076f1bae.js"),[]),"../properties/users.map.json":()=>i(()=>import("./users.map-7bf7c7c4.js"),[])}),`../properties/${s}.map.json`);this.properties=e.default},methods:{formatDatetime:o,formatCurrencyBRL:l,formatPhone:d,getFormattedHref(s,e){return`<a class="text-decoration-none" href="${s}" target="_blank">${e}</a>`},getOrderUrl(s){if(this.item.subject){const{id:e,client:t}=this.item.subject,r=this.$helpers.getUrl("orders.show",{client:t.id,order:e});return this.getFormattedHref(r,s)}return s},getClientUrl(s){var e,t;if(this.item.subject){const r=((t=(e=this.item.subject)==null?void 0:e.client)==null?void 0:t.id)||this.item.subject.id,n=this.$helpers.getUrl("clients.show",{client:r});return this.getFormattedHref(n,s)}return s},getFormattedValue(s,e){const t=this.properties[s];if(t===void 0)return e;if(t.format){const r="format"+u(t.format);return this[r](e)}return t.link?this[t.method](e):e},getValuesToReplace(s,e){return x(s,(t,r)=>e&&this.item.causer?`<span class="fw-bold">${this.item.causer[r]}</span>`:e&&!this.item.causer?'<span class="fw-bold">[Não identificável]</span>':e?"-":`<span class="fw-bold">${this.getFormattedValue(r,t)}</span>`)}}};var k=function(){var e=this,t=e._self._c;return t("li",{staticClass:"list-group-item"},[t("ActivityItemText",e._b({},"ActivityItemText",{item:e.item,text:e.text,description:e.description,attributes:e.attributes},!1)),e.renderPropChanges?t("ActivityItemChanges",{attrs:{item:e.item,"props-map":e.properties}}):e._e()],1)},H=[],M=a(U,k,H,!1,null,null,null,null);const B=M.exports;export{B as A};
