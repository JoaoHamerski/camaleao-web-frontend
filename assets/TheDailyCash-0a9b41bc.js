import{n as s,N as m,F as E,s as _,u as k,a1 as $,a2 as C,w as D,G as w,p as N,A as P,z as b,o as A,a3 as F,i as I,D as d,a4 as v,a5 as M,S as B}from"./index-fae63e1f.js";import{G as L,a as O}from"./DailyCash-da8f8b01.js";import{D as T}from"./DailyPaymentModal-355556e3.js";import{a as V,m as q}from"./masks-168ccaff.js";import{P as G}from"./PaymentConfirmErrorModal-da2f8ea4.js";import{P as U,h as Q}from"./PaymentExpenseTable-b30109be.js";import{M as z}from"./ModalExpensesNew-c98dcb28.js";import"./_PaginatorFragment-c01a3fe7.js";import"./PaymentExpense-9583d97d.js";import"./DailyPaymentForm-1ae5e719.js";import"./Via-eb0eedf9.js";import"./Payment-7f758fb7.js";import"./SelectClientsFind-0687f9cc.js";import"./Resources-b591129f.js";import"./omit-574aa98c.js";import"./_flatRest-a6acb8a9.js";import"./PaymentExpenseStatus-2fd23c74.js";import"./ExpensesForm-9d8c3592.js";import"./filesMixin-e7ac34d1.js";import"./filter-58b32e89.js";import"./pasteFilesMixin-1129ca11.js";import"./Expense-8b8780bc.js";import"./User-8fb57da5.js";import"./ViewerItemsCardFile-6146f446.js";import"./vue-load-image-65c59e9a.js";import"./has-1f08a56a.js";import"./SelectEntriesFind-e5d39e3c.js";import"./truncate-9ccec01d.js";var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DailyCashReminderParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"DailyCashReminder"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDailyCashReminders"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"date"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashReminders"},arguments:[{kind:"Argument",name:{kind:"Name",value:"date"},value:{kind:"Variable",name:{kind:"Name",value:"date"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DailyCashReminderParts"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDailyCashReminderDates"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashReminderDates"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetDailyCashRemindersInfo"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashRemindersInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"has_near_reminder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_expired_reminder"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateDailyCashReminder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DailyCashReminderInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashReminderCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DailyCashReminderParts"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateDailyCashReminder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DailyCashReminderInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashReminderUpdate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"DailyCashReminderParts"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteDailyCashReminder"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dailyCashReminderDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:881}};r.loc.source={body:`fragment DailyCashReminderParts on DailyCashReminder {
  id
  description
  date
  value
  type
  created_at
  user {
    id
    name
  }
}

query GetDailyCashReminders ($date: String) {
  dailyCashReminders (date: $date) {
    ...DailyCashReminderParts
  }
}

query GetDailyCashReminderDates {
   dailyCashReminderDates {
     date
     total
   }
}

query GetDailyCashRemindersInfo {
  dailyCashRemindersInfo {
    has_near_reminder
    has_expired_reminder
  }
}

mutation CreateDailyCashReminder ($input: DailyCashReminderInput!) {
  dailyCashReminderCreate (input: $input) {
    ...DailyCashReminderParts
  }
}

mutation UpdateDailyCashReminder ($id: ID! $input: DailyCashReminderInput!) {
  dailyCashReminderUpdate (id: $id input: $input) {
    ...DailyCashReminderParts
  }
}

mutation DeleteDailyCashReminder ($id: ID!) {
  dailyCashReminderDelete (id: $id) {
    id
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function p(a,e){if(a.kind==="FragmentSpread")e.add(a.name.value);else if(a.kind==="VariableDefinition"){var t=a.type;t.kind==="NamedType"&&e.add(t.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(n){p(n,e)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(n){p(n,e)}),a.definitions&&a.definitions.forEach(function(n){p(n,e)})}var y={};(function(){r.definitions.forEach(function(e){if(e.name){var t=new Set;p(e,t),y[e.name.value]=t}})})();function g(a,e){for(var t=0;t<a.definitions.length;t++){var n=a.definitions[t];if(n.name&&n.name.value==e)return n}}function o(a,e){var t={kind:a.kind,definitions:[g(a,e)]};a.hasOwnProperty("loc")&&(t.loc=a.loc);var n=y[e]||new Set,i=new Set,c=new Set;for(n.forEach(function(l){c.add(l)});c.size>0;){var x=c;c=new Set,x.forEach(function(l){if(!i.has(l)){i.add(l);var u=y[l]||new Set;u.forEach(function(S){c.add(S)})}})}return i.forEach(function(l){var u=g(a,l);u&&t.definitions.push(u)}),t}o(r,"DailyCashReminderParts");const j=o(r,"GetDailyCashReminders"),f=o(r,"GetDailyCashReminderDates"),h=o(r,"GetDailyCashRemindersInfo"),H=o(r,"CreateDailyCashReminder"),X=o(r,"UpdateDailyCashReminder"),Y=o(r,"DeleteDailyCashReminder"),J={props:{value:{type:Boolean,default:!1},pendencies:{type:Array,default:()=>[]},activeDate:{type:String,required:!0}},methods:{formatDatetime:m,isActiveListItem(a,e){return m(a)===e},onPendencyClick(a){this.$emit("load-pendencies-from-date",a)}}};var K=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"pendenciesModal",value:e.value,centered:"",color:"warning",scrollable:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"text-dark"},[e._v("Entradas e saídas pendentes")])]},proxy:!0},{key:"body",fn:function(){return[e.pendencies.length?[t("div",{staticClass:"list-group mb-3"},e._l(e.pendencies,function(n){return t("a",{key:n.created_at_entry,staticClass:"list-group-item list-group-item-action d-flex justify-content-between link-primary",class:{"active text-white":e.isActiveListItem(n.created_at_entry,e.activeDate)},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),e.onPendencyClick(n.created_at_entry)}}},[t("div",{staticClass:"fw-bold"},[e._v(" "+e._s(e.formatDatetime(n.created_at_entry))+" ")]),t("span",{staticClass:"badge bg-primary align-self-center py-2",class:{"bg-light text-primary":e.isActiveListItem(n.created_at_entry,e.activeDate)}},[e._v(e._s(n.total))])])}),0)]:t("div",{staticClass:"text-center text-secondary my-5"},[e._v(" Sem pendencias ")])]},proxy:!0},{key:"footer",fn:function(){return[t("div",{staticClass:"d-flex justify-content-end"},[t("AppButton",{attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)]},proxy:!0}])},e.$listeners))},W=[],Z=s(J,K,W,!1,null,null,null,null);const ee=Z.exports,te={props:{isEdit:{type:Boolean,default:!1},reminder:{type:Object,default:()=>{}}},data(){return{maskCurrencyBRL:V(),maskDate:q,isLoading:!1,form:new E({description:"",value:"R$ ",date:"",type:"EXPENSE"})}},computed:{typesOptions(){return[{value:"EXPENSE",label:"Despesa"},{value:"PAYMENT",label:"Pagamento"}]}},mounted(){this.isEdit&&this.populateForm()},methods:{populateForm(){this.form.description=this.reminder.description,this.form.value=this.$helpers.toBRL(this.reminder.value),this.form.date=m(this.reminder.date),this.form.type=this.reminder.type.toUpperCase()},async onUpdate(a){try{await this.$apollo.mutate({mutation:X,variables:{id:this.reminder.id,input:a},refetchQueries:[f,h]}),_(this,{message:"Atualiado com sucesso!"})}catch(e){k(this,e)}},async onCreate(a){try{await this.$apollo.mutate({mutation:H,variables:{input:a},refetchQueries:[f,h],awaitRefetchQueries:!0}),_(this,{message:"Lembrete registrado!"})}catch(e){k(this,e)}},async onSubmit(){const a=this.form.data();this.isLoading=!0,this.isEdit?await this.onUpdate(a):await this.onCreate(a),this.isLoading=!1}}};var ae=function(){var e=this,t=e._self._c;return t("AppForm",{attrs:{form:e.form,"on-submit":e.onSubmit}},[t("AppInput",{attrs:{id:"description",name:"description",placeholder:"Digite a descrição...",error:e.form.errors.get("description")},model:{value:e.form.description,callback:function(n){e.$set(e.form,"description",n)},expression:"form.description"}},[e._v(" Descrição ")]),t("AppInput",{attrs:{id:"value",name:"value",placeholder:"Digite o valor...",mask:e.maskCurrencyBRL,error:e.form.errors.get("value")},model:{value:e.form.value,callback:function(n){e.$set(e.form,"value",n)},expression:"form.value"}},[e._v(" Valor ")]),t("AppInput",{attrs:{id:"date",name:"date",mask:e.maskDate,placeholder:"dd/mm/aaaa",type:"date",numeric:"",error:e.form.errors.get("date"),"today-button":""},model:{value:e.form.date,callback:function(n){e.$set(e.form,"date",n)},expression:"form.date"}},[e._v(" Data ")]),t("AppRadio",{attrs:{id:"type",name:"type",options:e.typesOptions},model:{value:e.form.type,callback:function(n){e.$set(e.form,"type",n)},expression:"form.type"}},[e._v(" Tipo de lembrete ")]),t("div",{staticClass:"row mt-4"},[t("div",{staticClass:"col"},[t("AppButton",{attrs:{type:"submit","btn-class":"fw-bold",color:"success",block:"",loading:e.isLoading}},[e._v(" "+e._s(e.isEdit?"Atualizar":"Confirmar")+" ")])],1),t("div",{staticClass:"col"},[t("AppButton",{attrs:{type:"button",color:"light",block:"",disabled:e.isLoading},on:{click:function(n){return n.preventDefault(),e.$emit("dismiss")}}},[e._v(" Cancelar ")])],1)])],1)},ne=[],ie=s(te,ae,ne,!1,null,null,null,null);const R=ie.exports,se={components:{DailyCashReminderForm:R},apollo:{dailyCashReminders:{query:j,variables(){return{first:1e3,date:this.date}}}},props:{date:{type:String,required:!0}},data(){return{dailyCashReminders:[],icons:{faArrowAltCircleLeft:$,faFunnelDollar:C,faHandHoldingUsd:D,faEdit:w,faTrashAlt:N,faCheck:P},isEdit:{value:!1,item:{}},isDelete:{value:!0,item:{},loading:!1}}},computed:{isQueryLoading(){return!!this.$apollo.queries.dailyCashReminders.loading},headers(){return[{text:"",value:"type",align:"center"},{text:"Descrição",value:"description",wrap:!0},{text:"Valor",value:"value",format:"currencyBRL"},{text:"Data",value:"date",format:"datetime"},{text:"Ações",value:"actions",align:"center"}]}},methods:{onBackClick(){if(this.isEdit.value){this.onDismissEdit();return}this.$emit("close")},onEditClick(a){this.isEdit.value=!0,this.isEdit.item=a},onEditSuccess(){this.onDismissEdit()},onDeleteClick(a){this.isDelete.value=!0,this.isDelete.item=a},onCancelDelete(){this.isDelete.value=!1,this.isDelete.item={}},async onDeleteReminder(a){this.isDelete.loading=!0;try{await this.$apollo.mutate({mutation:Y,variables:{id:a.id},refetchQueries:[f]}),this.$helpers.clearCacheFrom({id:a.id,__typename:"DailyCashReminder"}),this.$toast.success("Deletado com sucesso!")}catch{this.$toast.error("Ops! Algo deu errado.")}this.isDelete.loading=!1},onDismissEdit(){this.isEdit.value=!1,this.isEdit.item={}},rowClass(a){return a.type==="expense"?"table-danger align-middle":"table-success align-middle"},getItemColor(a){return a.type==="expense"?"danger":"success"},getItemIcon(a){return a.type==="expense"?C:D}}};var re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"position-relative"},[t("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isQueryLoading,expression:"isQueryLoading"}]}),t("div",{staticClass:"mb-3"},[t("AppButton",{attrs:{icon:e.icons.faArrowAltCircleLeft,outlined:""},on:{click:function(n){return n.preventDefault(),e.onBackClick.apply(null,arguments)}}},[e._v(" Voltar ")])],1),t("AppTransition",{attrs:{speed:"faster",enter:"fadeIn",mode:"out-in"}},[e.isEdit.value?t("DailyCashReminderForm",{attrs:{"is-edit":"",reminder:e.isEdit.item},on:{success:e.onEditSuccess,dismiss:e.onDismissEdit}}):t("AppTable",{attrs:{items:e.dailyCashReminders,headers:e.headers,"row-class":e.rowClass},scopedSlots:e._u([{key:"items.type",fn:function({item:n}){return[t("FontAwesomeIcon",{class:`text-${e.getItemColor(n)}`,attrs:{icon:e.getItemIcon(n)}})]}},{key:"items.actions",fn:function({item:n}){return[e.isDelete.item!==n?t("div",[t("AppButton",{staticClass:"mx-2",attrs:{outlined:"",icon:e.icons.faEdit,"btn-class":"btn-sm",tooltip:"Editar"},on:{click:function(i){return i.preventDefault(),e.onEditClick(n)}}}),t("AppButton",{attrs:{color:"danger",outlined:"",icon:e.icons.faTrashAlt,"btn-class":"btn-sm",tooltip:"Excluir"},on:{click:function(i){return i.preventDefault(),e.onDeleteClick(n)}}})],1):t("div",[t("AppButton",{staticClass:"me-2",attrs:{color:"success","btn-class":"btn-sm",loading:e.isDelete.loading},on:{click:function(i){return e.onDeleteReminder(n)}}},[e._v(" Confirmar ")]),t("AppButton",{attrs:{disabled:e.isDelete.loading,color:"light","btn-class":"btn-sm"},on:{click:function(i){return i.preventDefault(),e.onCancelDelete.apply(null,arguments)}}},[e._v(" Cancelar ")])],1)]}}],null,!0)})],1)],1)},le=[],oe=s(se,re,le,!1,null,null,null,null);const de=oe.exports,ce={components:{DailyCashRemindersByDate:de},props:{value:{type:Boolean,default:!1}},apollo:{dailyCashReminderDates:{query:f,result({loading:a,data:{dailyCashReminderDates:e}}){if(!a){const t=e.reduce((n,i)=>n+i.total,0);this.$emit("total-reminders",t)}}}},data(){return{formatDatetime:m,dailyCashReminderDates:[],selectedDate:""}},methods:{onReminderClick(a){this.selectedDate=a.date},onRemindersByDateClose(){this.selectedDate=""}}};var me=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"dailyCashReminderModal",color:"warning",value:e.value,"modal-dialog-class":"modal-lg"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{staticClass:"text-dark"},[e._v("Agendados")])]},proxy:!0},{key:"body",fn:function(){return[t("AppTransition",{attrs:{mode:"out-in",enter:"fadeIn",speed:"fast"}},[e.selectedDate?[t("DailyCashRemindersByDate",{attrs:{date:e.selectedDate},on:{close:e.onRemindersByDateClose}})]:[e.dailyCashReminderDates.length?t("div",{staticClass:"list-group"},e._l(e.dailyCashReminderDates,function(n){return t("a",{key:n.id,staticClass:"list-group-item list-group-item-action d-flex justify-content-between link-primary",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),e.onReminderClick(n)}}},[t("div",{staticClass:"fw-bold"},[e._v(" "+e._s(e.formatDatetime(n.date))+" ")]),t("span",{staticClass:"badge bg-primary align-self-center py-2"},[e._v(" "+e._s(n.total)+" ")])])}),0):t("div",{staticClass:"my-4 text-center text-secondary"},[e._v(" Nenhum agendamento encontrado ")])]],2),t("div",{staticClass:"text-end mt-3"},[t("AppButton",{attrs:{"data-bs-dismiss":"modal",color:"light"}},[e._v(" Fechar ")])],1)]},proxy:!0}])},e.$listeners))},ue=[],pe=s(ce,me,ue,!1,null,null,null,null);const fe=pe.exports,ve={components:{PendenciesModal:ee,DailyCashReminderModal:fe},apollo:{dailyCashRemindersInfo:{query:h}},props:{pendencies:{type:Array,default:()=>[]},activeDate:{type:String,required:!0}},data(){return{dailyCashRemindersInfo:{},pendenciesModal:!1,remindersModal:!1,totalReminders:0,icons:{faPlus:b,faSyncAlt:A,faClock:F}}},computed:{totalPendencies(){return I(this.pendencies)?0:this.pendencies.reduce((a,e)=>a+e.total,0)}},methods:{onPendenciesClick(){this.pendenciesModal=!0},onRemindersClick(){this.remindersModal=!0},onLoadPendenciesFromDate(a){this.pendenciesModal=!1,this.$emit("load-pendencies-from-date",a)},onResetPaymentsClick(){this.$emit("reset-payments")}}};var ye=function(){var e=this,t=e._self._c;return t("div",[t("PendenciesModal",{attrs:{pendencies:e.pendencies,"active-date":e.activeDate},on:{"load-pendencies-from-date":e.onLoadPendenciesFromDate},model:{value:e.pendenciesModal,callback:function(n){e.pendenciesModal=n},expression:"pendenciesModal"}}),t("DailyCashReminderModal",{on:{"total-reminders":function(n){e.totalReminders=n}},model:{value:e.remindersModal,callback:function(n){e.remindersModal=n},expression:"remindersModal"}}),t("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-between align-items-sm-center"},[t("div",{staticClass:"mb-2 mb-sm-0"},[t("AppButton",{staticClass:"fw-bold mb-2 mb-sm-0",attrs:{block:e.$isMobile,color:"success","btn-class":"btn-lg",icon:e.icons.faPlus},on:{click:function(n){return e.$emit("on-new-entry-click")}}},[e._v(" Entrada ")]),t("AppButton",{staticClass:"fw-bold mb-2 mb-sm-0 mx-0 mx-sm-2",attrs:{block:e.$isMobile,color:"danger","btn-class":"btn-lg",icon:e.icons.faPlus},on:{click:function(n){return e.$emit("on-new-expense-click")}}},[e._v(" Saída ")]),t("AppButton",{attrs:{"btn-class":"fw-bold btn-lg",icon:e.icons.faPlus,block:e.$isMobile},on:{click:function(n){return e.$emit("on-reminder-click")}}},[e._v(" Agendar ")])],1),t("div",{staticClass:"d-flex flex-sm-row flex-column"},[t("AppButton",{staticClass:"flex-grow-1 fw-bold me-0 me-sm-1 mb-1 mb-sm-0 position-relative",attrs:{color:"warning"},on:{click:e.onRemindersClick}},[e._v(" Agendados "),t("span",{staticClass:"badge rounded-pill bg-light text-dark"},[e._v(e._s(e.totalReminders))]),e.dailyCashRemindersInfo.has_expired_reminder?t("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"position-absolute top-0 start-0 translate-middle badge rounded-pill bg-danger border border-light",attrs:{content:"Há agendamentos expirados"}},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faClock,size:"lg"}})],1):e._e(),e.dailyCashRemindersInfo.has_near_reminder?t("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"position-absolute start-0 translate-middle badge rounded-pill bg-warning border border-light",class:{"ms-4":e.dailyCashRemindersInfo.has_expired_reminder},attrs:{content:"Há agendamentos para os próximos 5 dias"}},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faClock,size:"lg"}})],1):e._e()]),t("AppButton",{staticClass:"flex-grow-1 fw-bold mb-1 mb-sm-0",attrs:{color:"warning"},on:{click:e.onPendenciesClick}},[e._v(" Pendências "),t("span",{staticClass:"badge rounded-pill bg-light text-dark"},[e._v(e._s(e.totalPendencies))])]),t("AppButton",{staticClass:"ms-sm-1",attrs:{icon:e.icons.faSyncAlt,outlined:""},on:{click:e.onResetPaymentsClick}})],1)])],1)},he=[],_e=s(ve,ye,he,!1,null,null,null,null);const ke=_e.exports,Ce={props:{date:{type:String,required:!0}},computed:{selectedDateAbbr(){return d.fromFormat(this.date,"dd/MM/y").toFormat("dd/MM")},isSelectedDateToday(){const a=d.now(),e=d.fromFormat(this.date,"dd/MM/y");return a.hasSame(e,"day")},selectedDateExtended(){return d.fromFormat(this.date,"dd/MM/y",{locale:"pt-br"}).toFormat("dd 'de' LLLL 'de' yyyy")}}};var De=function(){var e=this,t=e._self._c;return t("div",[t("h5",{staticClass:"horizontal-line text-center fw-bold"},[t("span",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{content:e.selectedDateExtended}},[e._v(e._s(e.selectedDateAbbr))])]),t("div",{staticClass:"small text-secondary text-center"},[e.isSelectedDateToday?t("span",[e._v("Fluxo de hoje")]):t("span",[e._v("Fluxo antigo")])])])},ge=[],be=s(Ce,De,ge,!1,null,null,null,null);const Re=be.exports,xe={components:{PaymentExpenseTable:U,TheDailyCashBodyDate:Re,PaymentConfirmErrorModal:G,DailyCashBalance:()=>v(()=>import("./DailyCashBalance-bb4a0f36.js"),["assets/DailyCashBalance-bb4a0f36.js","assets/index-fae63e1f.js","assets/index-d1f48889.css","assets/DailyCash-da8f8b01.js","assets/_PaginatorFragment-c01a3fe7.js","assets/PaymentExpense-9583d97d.js"]),PendenciesOfMonthOrdersModal:()=>v(()=>import("./PendenciesOfMonthOrdersModal-88498880.js"),["assets/PendenciesOfMonthOrdersModal-88498880.js","assets/index-fae63e1f.js","assets/index-d1f48889.css","assets/DailyCash-da8f8b01.js","assets/_PaginatorFragment-c01a3fe7.js","assets/PaymentExpense-9583d97d.js","assets/vue-load-image-65c59e9a.js"]),DailyCashDetailedFlow:()=>v(()=>import("./DailyCashDetailedFlow-5446b333.js"),["assets/DailyCashDetailedFlow-5446b333.js","assets/index-fae63e1f.js","assets/index-d1f48889.css","assets/DailyCash-da8f8b01.js","assets/_PaginatorFragment-c01a3fe7.js","assets/PaymentExpense-9583d97d.js","assets/ExpensesTypesOverview-7767576a.js","assets/Expense-8b8780bc.js","assets/ExpensesForm-9d8c3592.js","assets/masks-168ccaff.js","assets/filesMixin-e7ac34d1.js","assets/filter-58b32e89.js","assets/pasteFilesMixin-1129ca11.js","assets/Via-eb0eedf9.js","assets/User-8fb57da5.js","assets/ViewerItemsCardFile-6146f446.js","assets/vue-load-image-65c59e9a.js","assets/has-1f08a56a.js","assets/SelectEntriesFind-e5d39e3c.js","assets/truncate-9ccec01d.js","assets/omit-574aa98c.js","assets/_flatRest-a6acb8a9.js","assets/DailyCashDetailedFlow-3e3f1618.css"])},props:{entries:{type:Array,default:()=>[]},date:{type:String,required:!0}},data(){return{roles:M,headers:Q,modalError:{value:!1,payment:{}},modalEdit:{value:!1,item:null},modalPaymentVouchers:{value:!1,payment:null},modalPendencyOrders:{value:!1,date:""}}},methods:{onDailyPaymentError(a){this.modalError.payment=a,this.modalError.value=!0},onOpenPendencyOrders(a){this.modalPendencyOrders.value=!0,this.modalPendencyOrders.date=a}}};var Se=function(){var e=this,t=e._self._c;return t("div",[t("PaymentConfirmErrorModal",{attrs:{payment:e.modalError.payment},model:{value:e.modalError.value,callback:function(n){e.$set(e.modalError,"value",n)},expression:"modalError.value"}}),t("PendenciesOfMonthOrdersModal",{attrs:{date:e.modalPendencyOrders.date},model:{value:e.modalPendencyOrders.value,callback:function(n){e.$set(e.modalPendencyOrders,"value",n)},expression:"modalPendencyOrders.value"}}),e.$helpers.canView(e.roles.GERENCIA)?t("DailyCashBalance",{staticClass:"mt-3 mb-5",on:{"open-pendency-orders":e.onOpenPendencyOrders}}):e._e(),e.$helpers.canView(e.roles.GERENCIA)?t("DailyCashDetailedFlow",{on:{"open-pendency-orders":e.onOpenPendencyOrders}}):e._e(),t("TheDailyCashBodyDate",{staticClass:"pt-5",attrs:{date:e.date}}),t("hr",{staticClass:"bg-secondary"}),t("PaymentExpenseTable",{attrs:{items:e.entries,headers:e.headers}})],1)},Ee=[],$e=s(xe,Se,Ee,!1,null,null,null,null);const we=$e.exports,Ne={components:{DailyCashReminderForm:R},props:{value:{type:Boolean,default:!1}},data(){return{icons:{faPlus:b}}},methods:{onSuccess(){this.$emit("success")}}};var Pe=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"dailyCashReminderFormModal",value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faPlus,"fixed-width":""}}),e._v(" Agendar nova entrada ou saída ")]},proxy:!0},{key:"body",fn:function(){return[e.value?t("DailyCashReminderForm",{on:{success:e.onSuccess,dismiss:function(n){return e.$emit("dismiss")}}}):e._e()]},proxy:!0}])},e.$listeners))},Ae=[],Fe=s(Ne,Pe,Ae,!1,null,null,null,null);const Ie=Fe.exports,Me={metaInfo(){return{title:"Caixa Diário"}},components:{TheDailyCashHeader:ke,TheDailyCashBody:we,DailyPaymentModal:T,ModalExpensesNew:z,DailyCashReminderFormModal:Ie},apollo:{dailyCashPendencies:{query:L},dailyCash:{query:O,variables(){return{...this.paymentsParams}}}},data(){return{dailyCashPendencies:[],dailyCash:{paginatorInfo:{},data:[]},modalPayment:!1,modalExpense:!1,modalReminder:!1,paymentsParams:{first:100,created_at:d.now().toISODate(),where:{},orderBy:[{column:"CREATED_AT",order:"DESC"}]},icons:{faCashRegister:B}}},computed:{isLoading(){return!!this.$apollo.queries.dailyCash.loading}},methods:{formatDatetime:m,onLoadPendenciesFromDate(a){this.paymentsParams.where={column:"IS_CONFIRMED",operator:"IS_NULL"},this.paymentsParams.created_at=a},onReminderClick(){this.modalReminder=!0},onReminderSuccess(){this.modalReminder=!1},onNewEntryClick(){this.modalPayment=!0},onNewExpenseClick(){this.modalExpense=!0},onNewExpenseSuccess(){this.modalExpense=!1},onPaymentSuccess(){this.modalPayment=!1},resetPayments(){this.paymentsParams.where={},this.paymentsParams.created_at=d.now().toISODate(),this.$apollo.queries.dailyCash.refetch(),this.$apollo.queries.dailyCashPendencies.refetch()}}};var Be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"py-5"},[t("TheDailyCashHeader",{staticClass:"mb-2",attrs:{pendencies:e.dailyCashPendencies,"active-date":e.formatDatetime(e.paymentsParams.created_at)},on:{"reset-payments":e.resetPayments,"on-new-entry-click":e.onNewEntryClick,"on-new-expense-click":e.onNewExpenseClick,"load-pendencies-from-date":e.onLoadPendenciesFromDate,"on-reminder-click":e.onReminderClick}}),t("AppCard",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h6",{staticClass:"fw-bold mb-0"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faCashRegister,"fixed-width":""}}),e._v(" Caixa Diário ")],1)]},proxy:!0},{key:"body",fn:function(){return[e.isLoading?t("AppLoading"):e._e(),t("DailyPaymentModal",{on:{success:e.onPaymentSuccess},model:{value:e.modalPayment,callback:function(n){e.modalPayment=n},expression:"modalPayment"}}),t("ModalExpensesNew",{on:{success:e.onNewExpenseSuccess},model:{value:e.modalExpense,callback:function(n){e.modalExpense=n},expression:"modalExpense"}}),t("DailyCashReminderFormModal",{on:{success:e.onReminderSuccess,dismiss:function(n){e.modalReminder=!1}},model:{value:e.modalReminder,callback:function(n){e.modalReminder=n},expression:"modalReminder"}}),t("TheDailyCashBody",{attrs:{entries:e.dailyCash.data,date:e.formatDatetime(e.paymentsParams.created_at,"dd/MM/y")}})]},proxy:!0}])})],1)},Le=[],Oe=s(Me,Be,Le,!1,null,null,null,null);const pt=Oe.exports;export{pt as default};
