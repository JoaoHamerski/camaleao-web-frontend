import{n as r,L as h,F as p,B as b,u as m,h as y,i as w,N as F,s as g,z as S,G as N,Q as A,P as L}from"./index-fae63e1f.js";import{d as D}from"./_PaginatorFragment-c01a3fe7.js";import{f as E}from"./filesMixin-e7ac34d1.js";import{a as I,m as P}from"./masks-168ccaff.js";import{p as M}from"./pick-eda4ada2.js";import{o as G}from"./omit-574aa98c.js";import"./filter-58b32e89.js";import"./_basePickBy-cefc69a3.js";import"./_flatRest-a6acb8a9.js";var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetReceiptProductSuggestions"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receiptProductSuggestions"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetReceipts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receipts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paginatorInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PaginatorSimpleParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"filepath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_signature"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetReceiptURL"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"preview"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receiptUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"preview"},value:{kind:"Variable",name:{kind:"Name",value:"preview"}}}],directives:[]}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateReceipt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReceiptInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receiptCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateReceipt"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReceiptInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receiptUpdate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadReceiptGeneratorSettings"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReceiptSettingsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receiptGeneratorSettingsUpload"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"json"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:823}};n.loc.source={body:`#import "./_PaginatorFragment.gql"

query GetReceiptProductSuggestions {
  receiptProductSuggestions
}

query GetReceipts($first: Int!, $page: Int) {
  receipts(first: $first, page: $page) {
    paginatorInfo {
      ...PaginatorSimpleParts
    }

    data {
      id
      client
      product
      value
      filepath
      date
      has_signature
    }
  }
}

query GetReceiptURL($id: ID, $preview: Boolean) {
  receiptUrl(id: $id, preview: $preview)
}

mutation CreateReceipt($input: ReceiptInput!) {
  receiptCreate(input: $input) {
    id
  }
}

mutation UpdateReceipt($id: ID!, $input: ReceiptInput!) {
  receiptUpdate(id: $id, input: $input) {
    id
  }
}

mutation UploadReceiptGeneratorSettings($input: ReceiptSettingsInput!) {
  receiptGeneratorSettingsUpload(input: $input) {
    id
    name
    json
  }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};var k={};function V(a){return a.filter(function(e){if(e.kind!=="FragmentDefinition")return!0;var t=e.name.value;return k[t]?!1:(k[t]=!0,!0)})}n.definitions=n.definitions.concat(V(D.definitions));function u(a,e){if(a.kind==="FragmentSpread")e.add(a.name.value);else if(a.kind==="VariableDefinition"){var t=a.type;t.kind==="NamedType"&&e.add(t.name.value)}a.selectionSet&&a.selectionSet.selections.forEach(function(i){u(i,e)}),a.variableDefinitions&&a.variableDefinitions.forEach(function(i){u(i,e)}),a.definitions&&a.definitions.forEach(function(i){u(i,e)})}var v={};(function(){n.definitions.forEach(function(e){if(e.name){var t=new Set;u(e,t),v[e.name.value]=t}})})();function _(a,e){for(var t=0;t<a.definitions.length;t++){var i=a.definitions[t];if(i.name&&i.name.value==e)return i}}function l(a,e){var t={kind:a.kind,definitions:[_(a,e)]};a.hasOwnProperty("loc")&&(t.loc=a.loc);var i=v[e]||new Set,s=new Set,c=new Set;for(i.forEach(function(o){c.add(o)});c.size>0;){var C=c;c=new Set,C.forEach(function(o){if(!s.has(o)){s.add(o);var d=v[o]||new Set;d.forEach(function(x){c.add(x)})}})}return s.forEach(function(o){var d=_(a,o);d&&t.definitions.push(d)}),t}const T=l(n,"GetReceiptProductSuggestions"),f=l(n,"GetReceipts"),R=l(n,"GetReceiptURL"),q=l(n,"CreateReceipt"),B=l(n,"UpdateReceipt"),U=l(n,"UploadReceiptGeneratorSettings");const Q={mixins:[E],apollo:{generatorSettings:{query:h,variables:{name:"app",key:"receipt_generator_settings",encoded:!1},update(a){const e=JSON.parse(a.configGet),t="https://api.flashcomunicacao.com";return e&&(e.logo&&(e.logo=`${t}/storage/receipt_settings/${e.logo}`),e.signature_image&&(e.signature_image=`${t}/storage/receipt_settings/${e.signature_image}`),e)},result(){this.populateForm()}}},data(){return{isLoading:!1,generatorSettings:{},form:new p({logo:"",header:"",content:"",date:"",signature_image:"",signature_name:""})}},computed:{isQueryLoading(){return!!this.$apollo.queries.generatorSettings.loading},navItems(){return[{value:"logo",text:"Logo",fields:["logo"]},{value:"header",text:"Cabeçalho",fields:["header"]},{value:"content",text:"Conteúdo",fields:["content"]},{value:"date",text:"Data",fields:["date"]},{value:"signature",text:"Assinatura",fields:["signature_image","signature_name"]}]}},methods:{configHasImage(a){return b(this.generatorSettings,a)},populateForm(){Object.assign(this.form,this.generatorSettings||{})},async onFileUpload(a,e){const t=await this.$helpers.inputFileToBase64(a[0]);this.form[e]=t,this.form.errors.clear(e)},async onSubmit(){const a=this.form.data();this.isLoading=!0;try{await this.$apollo.mutate({mutation:U,variables:{input:a}}),this.$toast.success("Configurações atualizadas!")}catch(e){m(this,e)}this.isLoading=!1}}};var O=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(i){return i.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isQueryLoading,expression:"isQueryLoading"}]}),t("AppNavPills",{attrs:{items:e.navItems,errors:Object.keys(e.form.errors.errors)},scopedSlots:e._u([{key:"logo",fn:function(){return[t("AppInputFile",{attrs:{id:"logo",accept:"image/*",centered:""},on:{input:i=>e.onFileUpload(i,"logo")}}),e.form.logo?[t("div",{staticClass:"form-label fw-bold"},[e._v(" "+e._s(e.configHasImage("logo")?"Logo armazenada:":"Pré-visualização:")+" ")]),t("div",{staticClass:"col-4"},[t("img",{staticClass:"img-fluid img-thumbnail",attrs:{src:e.form.logo,alt:"Logo"}})])]:e._e()]},proxy:!0},{key:"header",fn:function(){return[t("AppEditor",{attrs:{error:e.form.errors.get("header"),placeholder:"Digite o cabeçalho..."},on:{focus:function(i){return e.form.errors.clear("header")}},model:{value:e.form.header,callback:function(i){e.$set(e.form,"header",i)},expression:"form.header"}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"text-secondary small"},[e._v(" Informe os seguintes caracteres para serem substituídos por dados: "),t("ul",[t("li",[t("b",[e._v("%cliente%")]),e._v(" - Nome do cliente (Ex.: José da Penha)")]),t("li",[t("b",[e._v("%valor%")]),e._v(" - Valor do recibo (Ex.: 500,00)")]),t("li",[t("b",[e._v("%produto%")]),e._v(" - Produto do recibo (Ex.: Camisa personalizada)")])])]),t("AppEditor",{attrs:{error:e.form.errors.get("content"),placeholder:"Digite o conteúdo..."},on:{focus:function(i){return e.form.errors.clear("content")}},model:{value:e.form.content,callback:function(i){e.$set(e.form,"content",i)},expression:"form.content"}})]},proxy:!0},{key:"date",fn:function(){return[t("div",{staticClass:"text-secondary small"},[e._v(" Informe os seguintes caracteres para serem substituídos por dados: "),t("ul",[t("li",[t("b",[e._v("%data%")]),e._v(" - Data por extenso (Ex.: 01 de Janeiro de 2020)")])])]),t("AppEditor",{attrs:{error:e.form.errors.get("date"),placeholder:"Digite a data..."},on:{focus:function(i){return e.form.errors.clear("date")}},model:{value:e.form.date,callback:function(i){e.$set(e.form,"date",i)},expression:"form.date"}})]},proxy:!0},{key:"signature",fn:function(){return[t("AppInputFile",{attrs:{id:"signature",centered:""},on:{input:i=>e.onFileUpload(i,"signature_image")}}),e.form.signature_image?t("div",{staticClass:"mb-2"},[t("div",{staticClass:"form-label fw-bold"},[e._v(" "+e._s(e.configHasImage("signature_image")?"Assinatura armazenada:":"Pré-visualização:")+" ")]),t("div",{staticClass:"col-4"},[t("img",{staticClass:"img-fluid img-thumbnail",attrs:{src:e.form.signature_image,alt:"Logo"}})])]):e._e(),t("AppInput",{attrs:{id:"signature_name",name:"signature_name",placeholder:"Nome que será exibido por escrito...",error:e.form.errors.get("signature_name")},model:{value:e.form.signature_name,callback:function(i){e.$set(e.form,"signature_name",i)},expression:"form.signature_name"}},[e._v(" Nome na assinatura ")])]},proxy:!0}])}),t("div",{staticClass:"row mt-3"},[t("div",{staticClass:"col"},[t("AppButton",{attrs:{loading:e.isLoading,block:"","btn-class":"fw-bold",color:"success",type:"submit"}},[e._v(" Salvar ")])],1),t("div",{staticClass:"col"},[t("AppButton",{attrs:{type:"button",disabled:e.isLoading,block:"",color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)])],1)},z=[],j=r(Q,O,z,!1,null,"a2de3327",null,null);const H=j.exports,J={components:{ReceiptSettingsForm:H},props:{value:{type:Boolean,default:!1}},data(){return{isPreviewLoading:!1,icons:{faCog:y}}},methods:{async onPreviewClick(){this.isPreviewLoading=!0;try{const{data:{receiptUrl:a}}=await this.$apollo.query({query:R,variables:{preview:!0}});this.$helpers.openInNewTab(a)}catch{this.$toast.error("Ops! Algo deu errado.")}this.isPreviewLoading=!1}}};var K=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"receiptSettingsModal",value:e.value,"modal-dialog-class":"modal-lg",focus:"false",keyboard:"false"},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faCog,"fixed-width":""}}),e._v(" Configurações do recibo ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"text-end mb-2"},[t("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"fw-bold",attrs:{outlined:"",content:"Salve antes de pre-visualizar",loading:e.isPreviewLoading},on:{click:function(i){return i.preventDefault(),e.onPreviewClick.apply(null,arguments)}}},[e._v(" Pré-visualizar ")])],1),t("KeepAlive",[e.value?t("ReceiptSettingsForm"):e._e()],1)]},proxy:!0}])},e.$listeners))},W=[],X=r(J,K,W,!1,null,null,null,null);const Y=X.exports,Z={apollo:{receiptProductSuggestions:{query:T},receiptSettings:{query:h,variables:{name:"app",key:"receipt_generator_settings",encoded:!1},update(a){return JSON.parse(a.configGet)}}},props:{receipt:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},data(){return{maskCurrencyBRL:I(),receiptProductSuggestions:[],maskDate:P,isLoading:!1,receiptSettings:{},form:new p({client:"",product:"",date:"",value:"",has_signature:!0})}},computed:{isSuggestionsQueryLoading(){return!!this.$apollo.queries.receiptProductSuggestions.loading},isQueryLoading(){return!!this.$apollo.queries.receiptSettings.loading},isFormEnabled(){return["content","date","header","logo","signature_image","signature_name"].every(e=>!w(b(this.receiptSettings,e)))}},mounted(){this.isEdit&&this.populateForm()},methods:{populateForm(){const a=M(this.receipt,Object.keys(this.form.data()));Object.assign(this.form,new p({...G(a,["date","value"]),date:F(this.receipt.date),value:this.$helpers.toBRL(this.receipt.value)}))},async onSubmit(){const a=this.form.data();this.isLoading=!0,this.isEdit?await this.update(a):await this.create(a),this.isLoading=!1},async create(a){try{await this.$apollo.mutate({mutation:q,variables:{input:a},refetchQueries:[f],awaitRefetchQueries:!0}),g(this,{message:"Recibo gerado!"})}catch(e){m(this,e)}},async update(a){try{await this.$apollo.mutate({mutation:B,variables:{id:this.receipt.id,input:a},refetchQueries:[f],awaitRefetchQueries:!0}),g(this,{message:"Recibo atualizado!"})}catch(e){m(this,e)}}}};var ee=function(){var e=this,t=e._self._c;return t("AppForm",{attrs:{form:e.form,"on-submit":e.onSubmit}},[t("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isQueryLoading,expression:"isQueryLoading"}]}),!e.isFormEnabled&&!e.isQueryLoading?t("AppAlert",{attrs:{color:"danger"}},[e._v(" Algumas configurações estão incompletas, por favor, preencha-as no botão "),t("b",[e._v("Configurações")])]):e._e(),t("AppInput",{attrs:{id:"client",name:"client",placeholder:"Digite o nome do cliente...",error:e.form.errors.get("client")},model:{value:e.form.client,callback:function(i){e.$set(e.form,"client",i)},expression:"form.client"}},[e._v(" Nome do cliente ")]),t("AppInput",{attrs:{id:"product",list:"productsList",name:"product",placeholder:"Digite o produto...",error:e.form.errors.get("product"),autocomplete:"off"},scopedSlots:e._u([e.isSuggestionsQueryLoading?{key:"hint",fn:function(){return[t("div",{staticClass:"spinner-border spinner-border-sm me-1 text-primary",attrs:{role:"status"}},[t("span",{staticClass:"visually-hidden"},[e._v("Loading...")])]),e._v(" Carregando lista de sugestões... ")]},proxy:!0}:null],null,!0),model:{value:e.form.product,callback:function(i){e.$set(e.form,"product",i)},expression:"form.product"}},[e._v(" Produto ")]),t("datalist",{attrs:{id:"productsList"}},e._l(e.receiptProductSuggestions,function(i){return t("option",{key:i,domProps:{value:i}})}),0),t("AppInput",{attrs:{id:"date",mask:e.maskDate,type:"date",name:"date",placeholder:"Digite a data do recibo...","today-button":"",error:e.form.errors.get("date")},model:{value:e.form.date,callback:function(i){e.$set(e.form,"date",i)},expression:"form.date"}},[e._v(" Data ")]),t("AppInput",{attrs:{id:"value",name:"value",mask:e.maskCurrencyBRL,placeholder:"Digite o valor do recibo...",error:e.form.errors.get("value")},model:{value:e.form.value,callback:function(i){e.$set(e.form,"value",i)},expression:"form.value"}},[e._v(" Valor ")]),t("AppCheckbox",{attrs:{id:"has_signature",name:"has_signature"},model:{value:e.form.has_signature,callback:function(i){e.$set(e.form,"has_signature",i)},expression:"form.has_signature"}},[e._v(" Exibir assinatura ")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("AppButton",{attrs:{block:"",color:"success",type:"submit","btn-class":"fw-bold",loading:e.isLoading,disabled:!e.isFormEnabled}},[e._v(" "+e._s(e.isEdit?"Atualizar":"Gerar")+" ")])],1),t("div",{staticClass:"col"},[t("AppButton",{attrs:{block:"",color:"light",type:"button","data-bs-dismiss":"modal",disabled:e.isLoading}},[e._v(" Fechar ")])],1)])],1)},te=[],ie=r(Z,ee,te,!1,null,null,null,null);const $=ie.exports,ae={components:{ReceiptForm:$},props:{value:{type:Boolean,default:!1}},data(){return{icons:{faPlus:S}}},methods:{onSuccess(){this.$emit("success")}}};var ne=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"receiptCreateModal",value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faPlus,"fixed-width":""}}),e._v(" Gerar novo recibo ")]},proxy:!0},{key:"body",fn:function(){return[e.value?t("ReceiptForm",{on:{success:e.onSuccess}}):e._e()]},proxy:!0}])},e.$listeners))},re=[],se=r(ae,ne,re,!1,null,null,null,null);const oe=se.exports,le={components:{ReceiptSettingsModal:Y,ReceiptCreateModal:oe},data(){return{receiptCreateModal:{value:!1},receiptSettingsModal:{value:!1},icons:{faPlus:S,faCog:y}}},methods:{onReceiptSettingsClick(){this.receiptSettingsModal.value=!0},onReceiptCreateClick(){this.receiptCreateModal.value=!0},onReceiptSuccess(){this.receiptCreateModal.value=!1}}};var ce=function(){var e=this,t=e._self._c;return t("div",[t("ReceiptSettingsModal",{model:{value:e.receiptSettingsModal.value,callback:function(i){e.$set(e.receiptSettingsModal,"value",i)},expression:"receiptSettingsModal.value"}}),t("ReceiptCreateModal",{on:{success:e.onReceiptSuccess},model:{value:e.receiptCreateModal.value,callback:function(i){e.$set(e.receiptCreateModal,"value",i)},expression:"receiptCreateModal.value"}}),t("div",{staticClass:"d-flex justify-content-between"},[t("AppButton",{staticClass:"fw-bold",attrs:{icon:e.icons.faPlus,color:"success"},on:{click:function(i){return i.preventDefault(),e.onReceiptCreateClick.apply(null,arguments)}}},[e._v(" Novo recibo ")]),t("AppButton",{staticClass:"fw-bold",attrs:{icon:e.icons.faCog},on:{click:function(i){return i.preventDefault(),e.onReceiptSettingsClick.apply(null,arguments)}}},[e._v(" Configurações ")])],1)],1)},de=[],ue=r(le,ce,de,!1,null,null,null,null);const pe=ue.exports,me={components:{ReceiptForm:$},props:{value:{type:Boolean,default:!1},receipt:{type:Object,default:()=>({})}},data(){return{icons:{faEdit:N}}},methods:{onSuccess(){this.$emit("success")}}};var ve=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"receiptEditModal",value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faEdit,"fixed-width":""}}),e._v(" Editar recibo ")]},proxy:!0},{key:"body",fn:function(){return[e.value?t("ReceiptForm",{attrs:{receipt:e.receipt,"is-edit":""},on:{success:e.onSuccess}}):e._e()]},proxy:!0}])},e.$listeners))},fe=[],ge=r(me,ve,fe,!1,null,null,null,null);const ke=ge.exports,_e={apollo:{receipts:{query:f,variables(){return{first:10,page:this.page}}}},components:{ReceiptEditModal:ke},data(){return{loadingFile:{id:""},receipts:{paginatorInfo:{},data:[]},receiptEditModal:{receipt:{},value:!1},page:1,icons:{faThList:A,faExternalLinkAlt:L,faEdit:N}}},computed:{isQueryLoading(){return!!this.$apollo.queries.receipts.loading},headers(){return[{value:"client",text:"Cliente"},{value:"product",text:"Produto"},{value:"value",text:"Valor",format:"currencyBRL"},{value:"date",text:"Data",format:"datetime"},{value:"actions",text:"",align:"rigt"}]}},methods:{onEditReceiptClick(a){this.receiptEditModal.receipt=a,this.receiptEditModal.value=!0},onEditReceiptSuccess(){this.receiptEditModal.value=!1,this.receiptEditModal.receipt={}},async onViewReceiptClick({id:a}){this.loadingFile.id=a;try{const{data:{receiptUrl:e}}=await this.$apollo.query({query:R,variables:{id:a}});this.$helpers.openInNewTab(e)}catch{this.$toast.error("Ops! Algo deu errado.")}this.loadingFile.id=""}}};var he=function(){var e=this,t=e._self._c;return t("div",[t("AppCard",{scopedSlots:e._u([{key:"header",fn:function(){return[t("h6",{staticClass:"mb-0 fw-bold"},[t("FontAwesomeIcon",{attrs:{icon:e.icons.faThList,"fixed-width":""}}),e._v(" Recibos gerados ")],1)]},proxy:!0},{key:"body",fn:function(){return[t("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isQueryLoading,expression:"isQueryLoading"}]}),t("ReceiptEditModal",{attrs:{receipt:e.receiptEditModal.receipt},on:{success:e.onEditReceiptSuccess},model:{value:e.receiptEditModal.value,callback:function(i){e.$set(e.receiptEditModal,"value",i)},expression:"receiptEditModal.value"}}),t("div",[t("AppTable",{attrs:{headers:e.headers,items:e.receipts.data},scopedSlots:e._u([{key:"items.actions",fn:function({item:i}){return[t("div",{staticClass:"text-end"},[t("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"me-2",attrs:{outlined:"","btn-class":"btn-sm",icon:e.icons.faExternalLinkAlt,loading:i.id===e.loadingFile.id,content:"Ver recibo"},on:{click:function(s){return s.preventDefault(),e.onViewReceiptClick(i)}}}),t("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{outlined:"",icon:e.icons.faEdit,"btn-class":"btn-sm",content:"Editar"},on:{click:function(s){return s.preventDefault(),e.onEditReceiptClick(i)}}})],1)]}}],null,!0)})],1)]},proxy:!0}])}),t("div",{staticClass:"mt-2"},[t("AppPaginator",{attrs:{loading:e.isQueryLoading,pagination:e.receipts.paginatorInfo},model:{value:e.page,callback:function(i){e.page=i},expression:"page"}})],1)],1)},be=[],ye=r(_e,he,be,!1,null,null,null,null);const Se=ye.exports,Ne={metaInfo:{title:"Gerador de recibo"},components:{TheReceiptGeneratorHeader:pe,TheReceiptGeneratorBody:Se}};var Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"py-3"},[t("TheReceiptGeneratorHeader"),t("TheReceiptGeneratorBody",{staticClass:"mt-2"})],1)},$e=[],Ce=r(Ne,Re,$e,!1,null,null,null,null);const Me=Ce.exports;export{Me as default};
