import{n as r,a6 as i,a4 as l,a7 as d,a8 as c,V as u,a5 as o,a9 as p,w as m,a2 as _,G as f,H as h,r as y,i as v,aa as x}from"./index-4e05606f.js";import{P as w}from"./PaymentExpenseStatus-b4702367.js";const E={props:{payment:{type:Object,default:null},value:{type:Boolean,default:!1}},data(){return{icons:{faFileAlt:i}}}};var g=function(){var e=this,s=e._self._c;return s("AppModal",e._g({attrs:{id:"modalShowPaymentVouchers",value:e.value,"data-bs-focus":"false","data-bs-keyboard":"false"},scopedSlots:e._u([{key:"title",fn:function(){return[s("FontAwesomeIcon",{attrs:{icon:e.icons.faFileAlt,"fixed-width":""}}),e._v(" Comprovantes de pagamento ")]},proxy:!0},{key:"body",fn:function(){return[e.payment?[s("div",{staticClass:"text-center mb-3"},[s("div",{staticClass:"mb-1"},[e._v(" Comprovantes de pagamento do pedido ")]),s("a",{staticClass:"h5 text-decoration-none fw-bold",attrs:{href:e.$helpers.getUrl("orders.show",{client:e.payment.order.client.id,order:e.payment.order.id})}},[e._v(e._s(e.payment.order.code))])]),s("AppViewerItems",{attrs:{files:e.payment.order.payment_voucher_paths,alt:"Comprovante de pagamento",col:"4"}}),s("div",{staticClass:"text-end mt-3"},[s("AppButton",{attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)]:e._e()]},proxy:!0}])},e.$listeners))},b=[],C=r(E,g,b,!1,null,null,null,null);const A=C.exports,V=()=>l(()=>import("./ExpensesForm-277188ad.js").then(n=>n.d),["assets/ExpensesForm-277188ad.js","assets/masks-168ccaff.js","assets/index-4e05606f.js","assets/index-1259f392.css","assets/filesMixin-04d56c50.js","assets/filter-bdbeaf8b.js","assets/pasteFilesMixin-1129ca11.js","assets/Expense-8b8780bc.js","assets/_PaginatorFragment-c01a3fe7.js","assets/DailyCash-da8f8b01.js","assets/PaymentExpense-9583d97d.js","assets/Via-eb0eedf9.js","assets/User-8fb57da5.js","assets/ViewerItemsCardFile-0d33846c.js","assets/vue-load-image-d69823bb.js","assets/has-81565ca3.js","assets/SelectEntriesFind-d5313c57.js","assets/truncate-000a7a5d.js","assets/omit-49c12860.js"]),F=()=>l(()=>import("./PaymentForm-07141de2.js"),["assets/PaymentForm-07141de2.js","assets/index-4e05606f.js","assets/index-1259f392.css","assets/Via-eb0eedf9.js","assets/Payment-7f758fb7.js","assets/_PaginatorFragment-c01a3fe7.js","assets/SelectEntriesFind-d5313c57.js","assets/masks-168ccaff.js","assets/SelectClientsFind-5d32440f.js","assets/Resources-b591129f.js"]),P={props:{value:{type:Boolean,default:!1},entry:{type:Object,default:null}},computed:{getComponentProps(){var n,e,s,t;return this.isExpense?{expense:{id:this.entry.id,date:this.entry.date,description:this.entry.description,value:this.$helpers.toBRL(this.entry.value),expense_via_id:this.entry.via.id,expense_type_id:this.entry.type.id,product_type_id:((e=(n=this.entry)==null?void 0:n.product_type)==null?void 0:e.id)||"",employee_id:((t=(s=this.entry)==null?void 0:s.employee)==null?void 0:t.id)||"",receipt_path:this.entry.receipt_path}}:{order:this.entry.order,payment:{id:this.entry.id,via:this.entry.via,note:this.entry.note,value:this.entry.value,date:this.entry.date,is_confirmed:this.entry.is_confirmed}}},getComponent(){return this.isExpense?V:F},isExpense(){return this.entry.is_expense}},methods:{onEditSuccess(){this.$emit("success")}}};var k=function(){var e=this,s=e._self._c;return s("AppModal",e._g({attrs:{id:"dailyCashEditModal",value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[e.entry?[e._v(" Alterar "+e._s(e.isExpense?"Despesa":"Pagamento")+" ")]:e._e()]},proxy:!0},e.entry?{key:"body",fn:function(){return[s(e.getComponent,e._b({tag:"Component",attrs:{"is-edit":!0},on:{success:e.onEditSuccess}},"Component",e.getComponentProps,!1))]},proxy:!0}:null],null,!0)},e.$listeners))},$=[],R=r(P,k,$,!1,null,null,null,null);const M=R.exports;d.use(c);const H=[{text:"",value:"icon",align:"center"},{text:"PEDIDO/DESPESA",value:"order",wrap:!0},{text:"CLIENTE",value:"client",wrap:!0},{text:"VALOR",value:"value",format:"currencyBRL"},{text:"VIA",value:"via.name"},{text:"REGISTRO ÀS",value:"created_at",format:"datetime",formatting:"HH:mm",align:"center"},{text:"DATA",value:"date",format:"datetime",formatting:"dd/MM/y",align:"center"},{text:"COMPROVANTE",value:"payment_voucher",align:"center"},{text:"STATUS",value:"status",align:"center"},{text:"EDITAR",value:"edit",align:"center"}],D={components:{PaymentExpenseStatus:w,PaymentVouchersModal:A,PaymentExpenseEditModal:M,ViewerFileModal:u},props:{items:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]}},data(){return{roles:o,modalEdit:{value:!1,entry:null},modalFileViewer:{value:!1,src:""},modalPaymentVouchers:{value:!1,payment:null},icons:{faClipboardCheck:p,faFileAlt:i,faHandHoldingUsd:m,faFunnelDollar:_,faEdit:f,faQuestionCircle:h}}},methods:{formatCurrencyBRL:y,isEmpty:v,getVoucher(n){return n.is_expense?n.receipt_path:n.order?n.order.payment_voucher_paths:null},showVoucher(n){if(n.is_expense){if(this.$helpers.strContainsAny(n.receipt_path,".pdf")){this.modalFileViewer.src=n.receipt_path,this.modalFileViewer.value=!0;return}this.$viewerApi({images:[n.receipt_path],options:x});return}this.modalPaymentVouchers.value=!0,this.modalPaymentVouchers.payment=n},entryRowClass(n){return["align-middle",{"table-success":n.is_confirmed===!0,"table-warning":n.is_confirmed===null,"table-danger":n.is_confirmed===!1}]},onEditClick(n){this.modalEdit.value=!0,this.modalEdit.item=n},showEditButton(n){return n.is_confirmed===null||[null,!0].includes(n.is_confirmed)&&this.$helpers.canView(o.GERENCIA)},getDisabledEditMessage(n){const e=n.is_expense?"saídas":"entradas";return n.is_confirmed===!1?`Impossível editar ${e} rejeitadas`:n.is_confirmed===!0?`Apenas usuários da gerência podem editar ${e} já confirmadas`:"Não é possível editar"},showTableRowAppend(n){return n.is_expense?!!n.user:!!n.note||!!n.sponsorship_client},onViewerFileModalHidden(){this.modalFileViewer.src=""},hideEntryModal(){this.modalEdit.value=!1,this.modalEdit.item=null}}};var I=function(){var e=this,s=e._self._c;return s("div",[s("ViewerFileModal",{attrs:{src:e.modalFileViewer.src,"modal-dialog-class":"modal-fullscreen"},on:{hidden:e.onViewerFileModalHidden},model:{value:e.modalFileViewer.value,callback:function(t){e.$set(e.modalFileViewer,"value",t)},expression:"modalFileViewer.value"}}),s("PaymentVouchersModal",{attrs:{payment:e.modalPaymentVouchers.payment},model:{value:e.modalPaymentVouchers.value,callback:function(t){e.$set(e.modalPaymentVouchers,"value",t)},expression:"modalPaymentVouchers.value"}}),s("PaymentExpenseEditModal",{attrs:{entry:e.modalEdit.item},on:{success:e.hideEntryModal,hidden:e.hideEntryModal},model:{value:e.modalEdit.value,callback:function(t){e.$set(e.modalEdit,"value",t)},expression:"modalEdit.value"}}),s("AppTable",{attrs:{headers:e.headers,items:e.items,"row-class":e.entryRowClass},scopedSlots:e._u([{key:"table-row.item",fn:function({item:t}){return[e.showTableRowAppend(t)?s("tr",{staticClass:"text-secondary small border-bottom-2",class:e.entryRowClass(t)},[t.is_expense&&e.$helpers.canView(e.roles.GERENCIA)?[s("td",{staticClass:"py-0",attrs:{colspan:"10"}},[s("strong",[e._v("Registrado por: ")]),e._v(e._s(t.user.name)+" ")])]:[s("td",{staticClass:"py-0",attrs:{colspan:"10"}},[t.note?s("div",[s("strong",[e._v("Nota:")]),e._v(" "+e._s(t.note)+" ")]):e._e(),t.sponsorship_client?s("div",[s("b",[e._v("Patrocínio por: ")]),s("a",{staticClass:"fw-bold text-decoration-none",attrs:{target:"_blank",href:e.$helpers.getUrl("clients.show",{client:t.sponsorship_client.id})}},[e._v(e._s(t.sponsorship_client.name))])]):e._e()])]],2):e._e()]}},{key:"items.icon",fn:function({item:t}){return[s("FontAwesomeIcon",{directives:[{name:"show",rawName:"v-show",value:t.is_expense,expression:"item.is_expense"}],staticClass:"text-danger",attrs:{icon:e.icons.faFunnelDollar,size:"lg"}}),s("FontAwesomeIcon",{directives:[{name:"show",rawName:"v-show",value:!t.is_expense,expression:"!item.is_expense"}],staticClass:"text-success",attrs:{icon:e.icons.faHandHoldingUsd,size:"lg"}})]}},{key:"items.order",fn:function({item:t}){return[t.order?[s("a",{staticClass:"text-decoration-none fw-bold",attrs:{href:e.$helpers.getUrl("orders.show",{client:t.order.client,order:t.order}),target:"_blank"}},[e._v(e._s(t.order.code))])]:s("p",{staticClass:"mb-0",class:t.description&&"small",style:{lineHeight:"1rem"}},[e._v(" "+e._s(t.description||"N/A")+" ")])]}},{key:"items.client",fn:function({item:t}){return[t.order?[s("a",{staticClass:"text-decoration-none fw-bold",attrs:{href:e.$helpers.getUrl("clients.show",{client:t.order.client}),target:"_blank"}},[e._v(e._s(t.order.client.name))])]:[e._v(" N/A ")]]}},{key:"items.value",fn:function({item:t}){return[s("span",{staticClass:"fw-bold"},[e._v(e._s(e.formatCurrencyBRL(t.value)))])]}},{key:"headers.date",fn:function(){return[e._v(" DATA "),s("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-secondary",attrs:{icon:e.icons.faQuestionCircle,"fixed-width":"",content:"Data em que foi registrada a entrada/saída"}})]},proxy:!0},{key:"headers.payment_voucher",fn:function(){return[s("FontAwesomeIcon",{attrs:{icon:e.icons.faFileAlt,size:"lg"}})]},proxy:!0},{key:"items.payment_voucher",fn:function({item:t}){return[s("AppButton",{attrs:{color:e.isEmpty(e.getVoucher(t))?"secondary":"primary","disabled-message":e.isEmpty(e.getVoucher(t))&&"Sem comprovantes",icon:e.icons.faFileAlt,outlined:"","btn-class":"btn-sm px-3"},on:{click:function(a){return a.preventDefault(),e.showVoucher(t)}}})]}},{key:"items.status",fn:function({item:t}){return[s("PaymentExpenseStatus",{attrs:{entry:t}})]}},{key:"items.edit",fn:function({item:t}){return[e.showEditButton(t)?s("AppButton",{attrs:{icon:e.icons.faEdit,color:"primary","btn-class":"btn-sm px-3",tooltip:"Editar",outlined:""},on:{click:function(a){return a.preventDefault(),e.onEditClick(t)}}}):s("AppButton",{attrs:{icon:e.icons.faEdit,disabled:"",color:"secondary","btn-class":"btn-sm px-3",tooltip:e.getDisabledEditMessage(t),outlined:""}})]}}],null,!0)})],1)},S=[],T=r(D,I,S,!1,null,null,null,null);const O=T.exports;export{O as P,H as h};
