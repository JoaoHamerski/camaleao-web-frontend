import{n as o,F as i,p as n,N as l,s as r,u as d}from"./index-fae63e1f.js";import{D as c}from"./Payment-7f758fb7.js";import{D as p,a as m,b as u,c as f}from"./Expense-8b8780bc.js";import{d as _}from"./Order-7b0e72c5.js";import"./_PaginatorFragment-c01a3fe7.js";import"./ActivityFragments-a3df58d3.js";const v={props:{entry:{type:Object,default:()=>({})},value:{type:Boolean,default:!1},isExpense:{type:Boolean,default:!1}},data(){return{isLoading:!1,form:new i({password:""}),icons:{faTrashAlt:n}}},methods:{formatDatetime:l,async deleteExpense({id:s,password:e}){await this.$apollo.mutate({mutation:p,variables:{id:s,password:e},refetchQueries:[m,u,f],awaitRefetchQueries:!0})},async deletePayment({id:s,password:e}){await this.$apollo.mutate({mutation:c,variables:{id:s,password:e},refetchQueries:[_],awaitRefetchQueries:!0})},async onSubmit(){const{id:s}=this.entry,{password:e}=this.form.data();this.isLoading=!0;try{this.isExpense?(await this.deleteExpense({id:s,password:e}),r(this,{message:"Despesa deletada!",resetForm:!0})):(await this.deletePayment({id:s,password:e}),r(this,{message:"Pagamento deletado!",resetForm:!0}))}catch(t){d(this,t)}this.isLoading=!1},getConfirmationText(s){return s===!0?"confirmado":confirm===!1?"rejeitado":"pendente"}}};var y=function(){var e=this,t=e._self._c;return t("AppModal",e._g({attrs:{id:"paymentExpenseDeleteModal",value:e.value,color:"danger"},scopedSlots:e._u([{key:"title",fn:function(){return[t("FontAwesomeIcon",{attrs:{icon:e.icons.faTrashAlt,"fixed-width":""}}),e._v(" Deletar "+e._s(e.isExpense?"despesa":"pagamento")+" ")]},proxy:!0},{key:"body",fn:function(){return[t("div",{staticClass:"text-center my-3"},[t("FontAwesomeIcon",{staticClass:"text-danger",attrs:{icon:e.icons.faTrashAlt,size:"4x"}})],1),t("div",{staticClass:"fw-bold text-center"},[e._v(" INFORMAÇÕES "+e._s(e.isExpense?"DA DESPESA":"DO PAGAMENTO")+" ")]),t("ul",{staticClass:"list-group list-group-sm list-group-flush"},[t("li",{staticClass:"list-group-item"},[t("b",[e._v("Valor:")]),e._v(" "+e._s(e.$helpers.toBRL(e.entry.value))+" ")]),e.entry.sponsorship_client?t("li",{staticClass:"list-group-item"},[t("b",[e._v("Patrocinado por: ")]),t("a",{staticClass:"text-decoration-none",attrs:{target:"_blank",href:e.$helpers.getUrl("clients.show",{client:e.entry.sponsorship_client.id})}},[e._v(e._s(e.entry.sponsorship_client.name))])]):e._e(),e.entry.note?t("li",{staticClass:"list-group-item"},[t("b",[e._v("Nota:")]),e._v(" "+e._s(e.entry.note)+" ")]):e._e(),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Data:")]),e._v(" "+e._s(e.formatDatetime(e.entry.date))+" ")]),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Cadastro em:")]),e._v(" "+e._s(e.formatDatetime(e.entry.created_at,"dd/MM/y HH:mm"))+" ")]),t("li",{staticClass:"list-group-item"},[t("b",[e._v("Confirmação: ")]),t("span",{staticClass:"text-uppercase",class:{"text-success":e.entry.is_confirmed===!0,"text-warning":e.entry.is_confirmed===null,"text-danger":e.entry.is_confirmed===!1}},[e._v(e._s(e.getConfirmationText(e.entry.is_confirmed)))])])]),e.entry.is_shipping?t("div",{staticClass:"mt-3 small"},[t("b",[e._v("ATENÇÃO: ")]),e._v(" Este pagamento foi registrado como adicional de frete, ao ser deletado o valor também será reduzido do preço do pedido. ")]):e._e(),t("div",{staticClass:"mt-3"},[t("AppForm",{attrs:{"on-submit":e.onSubmit,form:e.form}},[t("AppInput",{attrs:{id:"password",name:"password",type:"password",autocomplete:"new-password",error:e.form.errors.get("password")},model:{value:e.form.password,callback:function(a){e.$set(e.form,"password",a)},expression:"form.password"}},[e._v(" Confirme sua senha: ")])],1)],1),t("div",{staticClass:"row mt-3"},[t("div",{staticClass:"col"},[t("AppButton",{attrs:{color:"success",block:"","btn-class":"fw-bold",loading:e.isLoading},on:{click:function(a){return a.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Confirmar ")])],1),t("div",{staticClass:"col"},[t("AppButton",{attrs:{color:"light",block:"","data-bs-dismiss":"modal",disabled:e.isLoading}},[e._v(" Cancelar ")])],1)])]},proxy:!0}])},e.$listeners))},h=[],g=o(v,y,h,!1,null,null,null,null);const D=g.exports;export{D as default};
