"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[775],{2910:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-5"},[a("div",{staticClass:"col col-sm-6 mx-auto"},[a("AppCard",{scopedSlots:t._u([{key:"header",fn:function(){return[a("h6",{staticClass:"fw-bold mb-0"},[a("FontAwesomeIcon",{attrs:{icon:t.icons.faUser}}),t._v(" Minha conta ")],1)]},proxy:!0},{key:"body",fn:function(){return[a("ModalEditAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onEditAccountSuccess},model:{value:t.modalEditAccount,callback:function(e){t.modalEditAccount=e},expression:"modalEditAccount"}}),a("ModalDeleteAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onDeleteAccountSuccess},model:{value:t.modalDeleteAccount,callback:function(e){t.modalDeleteAccount=e},expression:"modalDeleteAccount"}}),a("div",{staticClass:"text-center mb-3"},[a("FontAwesomeIcon",{staticClass:"text-primary",attrs:{icon:t.icons.faUserCircle,size:"5x"}})],1),a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[a("b",[t._v("Nome: ")]),t._v(" "+t._s(t.authUser.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("E-mail: ")]),t._v(" "+t._s(t.authUser.email)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Nível de usuário: ")]),t._v(" "+t._s(t.authUser.role.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Senha: ")]),t._v(" ***** ")]),a("li",{staticClass:"list-group-item"},[a("b",[t._v("Criada em:")]),t._v(" "+t._s(t.formatDatetime(t.authUser.created_at))+" ")])]),a("div",{staticClass:"mt-3"},[a("AppButton",{attrs:{block:"",outlined:"","btn-class":"fw-bold",icon:t.icons.faEdit},on:{click:function(e){return e.preventDefault(),t.onEditAccountClick.apply(null,arguments)}}},[t._v(" Editar dados ")])],1),a("div",{staticClass:"text-end text-subtitle mt-2"},[a("span",{staticClass:"link-danger clickable",on:{click:function(e){return e.preventDefault(),t.onDeleteAccountClick.apply(null,arguments)}}},[a("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")],1)])]},proxy:!0}])})],1)])},s=[],n=a(6198),r=(a(5666),a(1436)),c=a(7859),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppModal",t._g({attrs:{id:"modalEditAccount",value:t.value,centered:""},on:{show:t.onModalShow},scopedSlots:t._u([{key:"title",fn:function(){return[a("FontAwesomeIcon",{attrs:{icon:t.icons.faEdit}}),t._v(" Editar dados da sua conta ")]},proxy:!0},{key:"body",fn:function(){return[t.value?a("AppForm",{attrs:{form:t.form,"on-submit":t.onSubmit}},[a("AppInput",{attrs:{id:"name",name:"name",placeholder:"Seu nome...",error:t.form.errors.get("name"),autocomplete:"name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[t._v(" Nome: ")]),a("AppInput",{attrs:{id:"email",name:"email",placeholder:"Seu email...",error:t.form.errors.get("email"),autocomplete:"email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}},[t._v(" E-mail: ")]),a("AppCheckbox",{attrs:{id:"changePassword"},model:{value:t.changePassword,callback:function(e){t.changePassword=e},expression:"changePassword"}},[t._v(" Alterar senha ")]),t.changePassword?[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm"},[a("AppInput",{attrs:{id:"password",name:"password",autocomplete:"new-password",error:t.form.errors.get("password"),"default-margin":!1,type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[t._v(" Nova senha: ")])],1),a("div",{staticClass:"col-12 col-sm"},[a("AppInput",{attrs:{id:"password_confirmation",name:"password_confirmation",autocomplete:"new-password",error:t.form.errors.get("password_confirmation"),"default-margin":!1,type:"password"},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}},[t._v(" Confirme a senha: ")])],1)]),a("small",{staticClass:"form-text"},[t._v("Você também pode deixar em branco caso não queira alterá-la")])]:t._e(),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("AppButton",{attrs:{block:"",color:"success","btn-class":"fw-bold",loading:t.isLoading}},[t._v(" Atualizar ")])],1),a("div",{staticClass:"col"},[a("AppButton",{attrs:{block:"",color:"light",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],2):t._e()]},proxy:!0}])},t.$listeners))},l=[],u=(a(8309),a(5539)),d=a(1594),m=a(3258),p={props:{value:{type:Boolean,default:!1},authUser:{type:Object,default:function(){return{}}}},data:function(){return{changePassword:!1,isLoading:!1,icons:{faEdit:r.Xcf},form:new u.Z({name:"",email:"",password:"",password_confirmation:""})}},methods:{onModalShow:function(){var t=this.authUser,e=t.name,a=t.email;this.form.name=e,this.form.email=a},onSubmit:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form.data(),t.isLoading=!0,e.prev=2,e.next=5,t.$apollo.mutate({mutation:m.UpdateAuthUser,variables:{input:a}});case 5:(0,d.s)(t,{message:"Dados atualizados!"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),(0,d.S)(t,e.t0);case 11:t.isLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}},f=p,h=a(1001),v=(0,h.Z)(f,i,l,!1,null,null,null),w=v.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppModal",t._g({attrs:{id:"modalDeleteAccount",value:t.value,color:"danger",centered:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"text-center"},[a("FontAwesomeIcon",{staticClass:"text-danger",attrs:{size:"5x",icon:t.icons.faTrashAlt}}),a("h6",{staticClass:"fw-bold mt-3"},[t._v(" Você tem certeza que deseja deletar a sua conta? ")])],1),a("AppForm",{staticClass:"mt-5",attrs:{form:t.form,"on-submit":t.onSubmit,autocomplete:"off"}},[a("input",{staticClass:"d-none",attrs:{type:"email",name:"email",autocomplete:"off"}}),a("AppInput",{attrs:{id:"password",name:"password",placeholder:"Sua senha...",error:t.form.errors.get("password"),type:"password",autocomplete:"new-password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[t._v(" Confirme sua senha: ")]),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col"},[a("AppButton",{attrs:{color:"success","btn-class":"fw-bold",block:"",loading:t.isLoading}},[t._v(" Confirmar ")])],1),a("div",{staticClass:"col"},[a("AppButton",{attrs:{color:"light",block:"",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],1)]},proxy:!0}])},t.$listeners))},b=[],g={props:{value:{type:Boolean,default:!1}},data:function(){return{isLoading:!1,form:new u.Z({password:""}),icons:{faTrashAlt:r.I7k}}},methods:{onSubmit:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form.data(),o=a.password,t.isLoading=!0,e.prev=2,e.next=5,t.$apollo.mutate({mutation:m.DeleteAuthUser,variables:{password:o}});case 5:(0,d.s)(t,{message:"Sua conta foi deletada!"}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),(0,d.S)(t,e.t0);case 11:t.isLoading=!1;case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}},_=g,C=(0,h.Z)(_,A,b,!1,null,null,null),k=C.exports,x={metaInfo:{title:function(){return"Minha conta"}},components:{ModalEditAccount:w,ModalDeleteAccount:k},data:function(){return{modalEditAccount:!1,modalDeleteAccount:!1,icons:{faUser:r.ILF,faUserCircle:r.m08,faTrashAlt:r.I7k,faEdit:r.Xcf}}},computed:{authUser:function(){return this.$store.getters["auth/authUser"]}},methods:{formatDatetime:c.DZ,onEditAccountClick:function(){this.modalEditAccount=!0},onEditAccountSuccess:function(){var t=this;return(0,n.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.modalEditAccount=!1,e.next=3,t.$store.dispatch("auth/getAuthUser");case 3:case"end":return e.stop()}}),e)})))()},onDeleteAccountClick:function(){this.modalDeleteAccount=!0},onDeleteAccountSuccess:function(){var t=this;this.modalDeleteAccount=!1,this.$nextTick((0,n.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("auth/logout");case 2:case"end":return e.stop()}}),e)}))))}}},y=x,E=(0,h.Z)(y,o,s,!1,null,null,null),D=E.exports}}]);
//# sourceMappingURL=my-acount-legacy.a3a0f59a.js.map