(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[327],{2883:function(e,t,a){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CashFlowEntryParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CashFlowEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_expense"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"receipt_path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"confirmed_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"employee_name"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CashFlowEntryViaParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CashFlowEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"via"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CashFlowEntryTypeParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CashFlowEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CashFlowEntryOrderParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CashFlowEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"order"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"quantity"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"art_paths"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CashFlowEntryUserParts"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CashFlowEntry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCashFlowEntries"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"where"}},type:{kind:"NamedType",name:{kind:"Name",value:"QueryCashFlowEntriesWhereWhereConditions"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cashFlowEntries"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"Variable",name:{kind:"Name",value:"where"}}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ListValue",values:[{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"column"},value:{kind:"EnumValue",value:"CREATED_AT"}},{kind:"ObjectField",name:{kind:"Name",value:"order"},value:{kind:"EnumValue",value:"DESC"}}]},{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"column"},value:{kind:"EnumValue",value:"DATE"}},{kind:"ObjectField",name:{kind:"Name",value:"order"},value:{kind:"EnumValue",value:"DESC"}}]}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paginatorInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PaginatorSimpleParts"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CashFlowEntryParts"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"CashFlowEntryViaParts"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"CashFlowEntryTypeParts"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"CashFlowEntryOrderParts"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"CashFlowEntryUserParts"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetCashFlowStatistics"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CashFlowFilterDatesInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cashFlowStatistics"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"created_orders"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_shirts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"closed_orders"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"closed_shirts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"no_payments_orders"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"no_payments_shirts"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:1370}};n.loc.source={body:'#import "./_PaginatorFragment.gql"\n\nfragment CashFlowEntryParts on CashFlowEntry {\n  id\n  description\n  date\n  value\n  is_expense\n  receipt_path\n  note\n  confirmed_at\n  created_at\n  employee_name\n}\n\nfragment CashFlowEntryViaParts on CashFlowEntry {\n  via {\n    id\n    name\n  }\n}\n\nfragment CashFlowEntryTypeParts on CashFlowEntry {\n  type {\n    id\n    name\n  }\n}\n\nfragment CashFlowEntryOrderParts on CashFlowEntry {\n  order {\n    id\n    code\n    name\n    quantity\n    art_paths\n    client {\n      id\n      name\n    }\n  }\n}\n\nfragment CashFlowEntryUserParts on CashFlowEntry {\n  user {\n    id\n    name\n  }\n}\n\nquery GetCashFlowEntries (\n  $first: Int = 10\n  $page: Int\n  $where: QueryCashFlowEntriesWhereWhereConditions\n) {\n  cashFlowEntries (\n    first: $first\n    page: $page\n    where: $where\n    orderBy: [\n      {column: CREATED_AT order: DESC}\n      {column: DATE order: DESC}\n    ]\n  ) {\n    paginatorInfo {\n      ...PaginatorSimpleParts\n    }\n\n    data {\n      ...CashFlowEntryParts\n      ...CashFlowEntryViaParts\n      ...CashFlowEntryTypeParts\n      ...CashFlowEntryOrderParts\n      ...CashFlowEntryUserParts\n    }\n  }\n}\n\nquery GetCashFlowStatistics ($input: CashFlowFilterDatesInput!) {\n  cashFlowStatistics(input: $input) {\n    created_orders\n    created_shirts\n    closed_orders\n    closed_shirts\n    no_payments_orders\n    no_payments_shirts\n    balance\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!i[t]&&(i[t]=!0,!0)}))}function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}n.definitions=n.definitions.concat(s(a(4163).definitions));var o={};function l(e,t){for(var a=0;a<e.definitions.length;a++){var n=e.definitions[a];if(n.name&&n.name.value==t)return n}}function d(e,t){var a={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var n=o[t]||new Set,i=new Set,s=new Set;n.forEach((function(e){s.add(e)}));while(s.size>0){var r=s;s=new Set,r.forEach((function(e){if(!i.has(e)){i.add(e);var t=o[e]||new Set;t.forEach((function(e){s.add(e)}))}}))}return i.forEach((function(t){var n=l(e,t);n&&a.definitions.push(n)})),a}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),o[e.name.value]=t}}))})(),e.exports=n,e.exports.CashFlowEntryParts=d(n,"CashFlowEntryParts"),e.exports.CashFlowEntryViaParts=d(n,"CashFlowEntryViaParts"),e.exports.CashFlowEntryTypeParts=d(n,"CashFlowEntryTypeParts"),e.exports.CashFlowEntryOrderParts=d(n,"CashFlowEntryOrderParts"),e.exports.CashFlowEntryUserParts=d(n,"CashFlowEntryUserParts"),e.exports.GetCashFlowEntries=d(n,"GetCashFlowEntries"),e.exports.GetCashFlowStatistics=d(n,"GetCashFlowStatistics")},7391:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _e}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"py-5"},[a("TheCashFlowFilter",{attrs:{"is-loading":e.isLoading,form:e.filterForm,"on-submit":e.onSubmit},on:{"update:form":function(t){e.filterForm=t},"clear-filter":e.onFilterClear}}),a("div",{staticClass:"mt-2"},[a("div",{staticClass:"col col-sm-4 ms-auto"},[a("AppInput",{attrs:{name:"search",placeholder:"Buscar por descrição...","default-margin":!1},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onSearch.apply(null,arguments))}},scopedSlots:e._u([{key:"append",fn:function(){return[a("AppButton",{attrs:{outlined:"",icon:e.icons.faSearch},on:{click:e.onSearch}})]},proxy:!0}]),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),""!==e.search?a("div",{staticClass:"small link-primary clickable text-end",on:{click:e.onSearchClear}},[e._v(" Limpar busca ")]):e._e()],1)]),a("TheCashFlowBody",{attrs:{"is-loading":e.isLoading,"show-statistics":e.filterForm.showStatistics,"show-balance":e.filterForm.showBalance,page:e.page,statistics:e.statistics,"filter-dates":e.filterDates,data:e.cashFlowEntries.data,pagination:e.cashFlowEntries.paginatorInfo},on:{"update:page":function(t){e.page=t}}})],1)},i=[],s=a(6198),r=(a(5666),a(4916),a(4765),a(5539)),o=a(1594),l=a(1436),d=a(2883),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppCard",{attrs:{color:"success",collapsible:""},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"mb-0 fw-bold"},[a("FontAwesomeIcon",{attrs:{icon:e.icons.faFilter,"fixed-width":""}}),e._v(" Filtros ")],1)]},proxy:!0},{key:"body",fn:function(){return[a("AppForm",{attrs:{"on-submit":e.onSubmit,form:e.form}},[a("div",{staticClass:"mb-3"},[e._v(" Filtrar "),a("b",[e._v("pagamentos recebidos")]),e._v(" e "),a("b",[e._v("despesas")]),e._v(" pela data ")]),a("label",{staticClass:"form-label fw-bold"},[e._v(" "+e._s(e.hasDateInterval?"Datas":"Data")+" ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("AppInput",{attrs:{value:e.form.start_date,name:"start_date",type:"date",placeholder:"dd/mm/aaaa",mask:e.maskDate,error:e.form.errors.get("start_date")},on:{input:function(t){return e.form.set({start_date:t})}}})],1),e.hasDateInterval?a("div",{staticClass:"col"},[a("AppInput",{attrs:{value:e.form.final_date,name:"final_date",type:"date",placeholder:"dd/mm/aaaa",mask:e.maskDate,error:e.form.errors.get("final_date")},on:{input:function(t){return e.form.set({final_date:t})}}})],1):e._e()]),a("AppCheckbox",{attrs:{id:"date_interval",name:"date_interval"},model:{value:e.hasDateInterval,callback:function(t){e.hasDateInterval=t},expression:"hasDateInterval"}},[e._v(" Por intervalo de datas ")]),a("AppCheckbox",{attrs:{id:"show_statistics",value:e.form.showStatistics,name:"show_statistics"},on:{input:function(t){return e.form.set({showStatistics:t})}}},[e._v(" Exibir estatísticas ")]),a("AppCheckbox",{attrs:{id:"show_balance",value:e.form.showBalance,name:"show_balance"},on:{input:function(t){return e.form.set({showBalance:t})}}},[e._v(" Exibir balanço final ")]),a("div",{staticClass:"d-flex mb-4"},[a("AppButton",{attrs:{type:"button",outlined:"","btn-class":"btn-sm"},on:{click:function(t){return t.preventDefault(),e.onTodayClick.apply(null,arguments)}}},[e._v(" Hoje ")]),a("AppButton",{staticClass:"mx-2",attrs:{type:"button",outlined:"","btn-class":"btn-sm"},on:{click:function(t){return t.preventDefault(),e.onCurrentWeekClick.apply(null,arguments)}}},[e._v(" Semana atual ")]),a("AppButton",{attrs:{type:"button",outlined:"","btn-class":"btn-sm"},on:{click:function(t){return t.preventDefault(),e.onCurrentMonthClick.apply(null,arguments)}}},[e._v(" Mês atual ")])],1),a("div",{staticClass:"d-flex mt-2"},[a("AppButton",{staticClass:"me-2",attrs:{color:"success","btn-class":"fw-bold",loading:e.isLoading},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Filtrar ")]),a("AppButton",{attrs:{type:"button",color:"success",outlined:""},on:{click:function(t){return t.preventDefault(),e.onClearFilterClick.apply(null,arguments)}}},[e._v(" Limpar filtros ")])],1)],1)]},proxy:!0}])})},u=[],m=a(9490),p=a(4082),v={props:{form:{type:Object,required:!0},onSubmit:{type:Function,required:!0},isLoading:{type:Boolean,default:!1}},data:function(){return{hasDateInterval:!1,maskDate:p.A3,icons:{faFilter:l.G_j}}},methods:{onTodayClick:function(){this.hasDateInterval=!1,this.form.set({start_date:m.ou.now().toFormat("dd/MM/yyyy"),final_date:""})},onCurrentWeekClick:function(){this.hasDateInterval=!0;var e=m.ou.now().startOf("week").toFormat("dd/MM/yyyy"),t=m.ou.now().endOf("week").toFormat("dd/MM/yyyy");this.form.set({start_date:e,final_date:t})},onCurrentMonthClick:function(){this.hasDateInterval=!0;var e=m.ou.now().startOf("month").toFormat("dd/MM/yyyy"),t=m.ou.now().endOf("month").toFormat("dd/MM/yyyy");this.form.set({start_date:e,final_date:t})},onClearFilterClick:function(){this.hasDateInterval=!1,this.$emit("clear-filter")}}},f=v,h=a(1001),y=(0,h.Z)(f,c,u,!1,null,null,null),k=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("AppCard",{staticClass:"mt-2",attrs:{"has-body-padding":!1},scopedSlots:e._u([{key:"header",fn:function(){return[a("h6",{staticClass:"mb-0 fw-bold d-flex justify-content-between"},[a("div",[a("FontAwesomeIcon",{attrs:{icon:e.icons.faCashRegister,"fixed-width":""}}),e._v(" Fluxo de caixa ")],1),a("div",[a("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left"},expression:"{placement: 'left'}"}],attrs:{content:"Lista de informações de DESPESAS com PAGAMENTOS RECEBIDOS",icon:e.icons.faExclamationCircle,size:"lg"}})],1)])]},proxy:!0},{key:"body",fn:function(){return[a("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e.isEmpty(e.filterDates.start_date)?e._e():a("div",{staticClass:"text-center"},[a("div",[a("small",{staticClass:"text-secondary"},[e._v("Filtragem por data")])]),a("h5",{staticClass:"fw-bold"},[e._v(" "+e._s(e.displayFilteredDate)+" ")])]),e.isEmpty(e.statistics)?e._e():a("CashFlowBodyStatistics",{attrs:{"show-statistics":e.showStatistics,"show-balance":e.showBalance,data:e.statistics}}),a("CashFlowBodyTable",{attrs:{data:e.data}})]},proxy:!0}])}),a("AppPaginator",{staticClass:"mt-2",attrs:{value:e.page,pagination:e.pagination},on:{input:function(t){return e.$emit("update:page",t)}}})],1)},w=[],C=(a(9653),a(2222),a(9697)),F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ModalEntryDetails",{attrs:{entry:e.modalEntryDetails.entry},on:{hidden:e.onModalHidden},model:{value:e.modalEntryDetails.modal,callback:function(t){e.$set(e.modalEntryDetails,"modal",t)},expression:"modalEntryDetails.modal"}}),a("AppTable",{attrs:{headers:e.headers,items:e.data,"row-class":e.rowClass},scopedSlots:e._u([{key:"headers.type",fn:function(){return[a("div",[e._v(" Tipo "),a("FontAwesomeIcon",{staticClass:"text-primary",attrs:{name:"type-explanation",icon:e.icons.faExclamationCircle,"fixed-width":""}})],1),a("Tippy",{attrs:{placement:"right",to:"type-explanation",theme:"light-border"}},[a("CashFlowLegendType")],1)]},proxy:!0},{key:"items.type",fn:function(t){var n=t.item;return[n.is_expense?a("FontAwesomeIcon",{staticClass:"text-danger",attrs:{icon:e.icons.faFunnelDollar}}):a("FontAwesomeIcon",{staticClass:"text-success",attrs:{icon:e.icons.faHandHoldingUsd}})]}},{key:"items.description",fn:function(t){var n=t.item;return[n.is_expense?a("span",[e._v(" "+e._s(n.description)+" ")]):a("a",{staticClass:"text-decoration-none",attrs:{target:"_blank",href:e.getOrderUrl(n)}},[e._v(" "+e._s(n.description)+" ")])]}},{key:"items.via",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.via.name)+" ")]}},{key:"items.value",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.formatCurrencyBRL(a.is_expense?-a.value:a.value))+" ")]}},{key:"items.details",fn:function(t){var n=t.item;return[a("AppButton",{attrs:{outlined:"","btn-class":"btn-sm",icon:e.icons.faFileAlt,tooltip:"Ver detalhes"},on:{click:function(t){return e.onDetailsShowClick(n)}}})]}}],null,!0)})],1)},g=[],b=a(7859),E=a(7309),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppModal",e._g({attrs:{id:"modalEntryDetails",color:e.modalColor,value:e.value},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Informações da entrada ")]},proxy:!0},{key:"body",fn:function(){return[e.isEmpty(e.entry)?e._e():a("div",[e.entry.is_expense?a("EntryDetailsExpense",{attrs:{expense:e.entry}}):a("EntryDetailsPayment",{attrs:{payment:e.entry}})],1)]},proxy:!0}])},e.$listeners))},S=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("EntryDetailsHeader",{attrs:{icon:e.icons.faHandHoldingUsd,value:e.payment.value,date:e.payment.date,"date-tooltip":"Data do pagamento",color:"success"}}),a("hr"),e.payment.note?a("small",{staticClass:"d-block text-center text-secondary"},[e._v(" "+e._s(e.payment.note)+" ")]):e._e(),a("div",{staticClass:"mt-4"},[a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[a("b",[e._v("Cliente: ")]),a("a",{staticClass:"text-decoration-none",attrs:{href:e.clientUrl,target:"_blank"}},[e._v(e._s(e.payment.order.client.name))])]),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Pedido: ")]),a("a",{staticClass:"text-decoration-none",attrs:{href:e.orderUrl,target:"_blank"}},[e._v(e._s(e.getOrderNameOrCode(e.payment.order)))])]),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Via: ")]),e._v(" "+e._s(e.payment.via.name)+" ")]),a("li",{staticClass:"list-group-item d-flex justify-content-between"},[a("div",[a("b",[e._v("Confirmado em: ")]),e._v(" "+e._s(e.formatDatetime(e.payment.confirmed_at)))]),a("div",[a("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-primary",attrs:{content:"Data em que foi confirmado pela gerência",icon:e.icons.faExclamationCircle}})],1)]),a("li",{staticClass:"list-group-item d-flex justify-content-between"},[a("div",[a("b",[e._v("Registrado em: ")]),e._v(" "+e._s(e.formatDatetime(e.payment.created_at,"dd/MM/yyyy HH'h 'mm'm'"))+" ")]),a("div",[a("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-primary",attrs:{content:"Data em que foi registrado no sistema",icon:e.icons.faExclamationCircle}})],1)])])]),a("div",{staticClass:"text-end mt-4"},[a("AppButton",{attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)],1)},N=[],A=(a(8309),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"d-flex position-relative"},[a("div",{staticClass:"position-absolute"},[a("FontAwesomeIcon",{class:"text-"+e.color,attrs:{icon:e.icon,size:"3x"}})],1),a("h3",{class:"col fw-bold text-"+e.color+" text-center"},[e._v(" "+e._s(e.formatCurrencyBRL(e.value))+" ")])]),a("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{\n      placement: 'bottom'\n    }"}],staticClass:"text-center text-secondary fw-bold",attrs:{content:e.dateTooltip}},[e._v(" "+e._s(e.formatDatetime(e.date))+" ")])])}),P=[],T={props:{color:{type:String,required:!0},value:{type:[String,Number],required:!0},icon:{type:Object,required:!0},date:{type:String,required:!0},dateTooltip:{type:String,default:"Data"}},methods:{formatCurrencyBRL:b.gv,formatDatetime:b.DZ}},I=T,B=(0,h.Z)(I,A,P,!1,null,null,null),O=B.exports,V={components:{EntryDetailsHeader:O},props:{payment:{type:Object,default:function(){return{}}}},data:function(){return{icons:{faHandHoldingUsd:l.oFW,faExclamationCircle:l.RLE}}},computed:{clientUrl:function(){var e=this.$router.resolve({name:"clients.show",params:{clientKey:this.payment.order.client.id}});return e.href},orderUrl:function(){var e=this.$router.resolve({name:"orders.show",params:{clientKey:this.payment.order.client.id,orderKey:this.payment.order.code}});return e.href}},methods:{formatDatetime:b.DZ,getOrderNameOrCode:function(e){return e.name||"[CÓD.] ".concat(e.code)}}},L=V,$=(0,h.Z)(L,D,N,!1,null,null,null),q=$.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("EntryDetailsHeader",{attrs:{value:-e.expense.value,color:"danger",icon:e.icons.faFunnelDollar,date:e.expense.date,"date-tooltip":"Data da despesa"}}),a("hr"),a("small",{staticClass:"d-block text-center text-secondary"},[e._v(" "+e._s(e.expense.description)+" ")]),a("div",{staticClass:"mb-2"},[a("ul",{staticClass:"list-group list-group-flush"},[a("li",{staticClass:"list-group-item"},[a("b",[e._v("Tipo: ")]),e._v(" "+e._s(e.expense.type.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Via: ")]),e._v(" "+e._s(e.expense.via.name)+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Cadastrada por: ")]),e._v(" "+e._s(e.getUserName(e.expense))+" ")]),a("li",{staticClass:"list-group-item"},[a("b",[e._v("Registado em: ")]),e._v(" "+e._s(e.formatDatetime(e.expense.created_at,"dd/MM/yyyy HH'h 'mm'm'"))+" ")]),a("li",{staticClass:"list-group-item"},[a("b",{staticClass:"mb-2",class:e.expense.receipt_path&&"d-block"},[e._v("Comprovante: ")]),e.expense.receipt_path?a("AppViewerItems",{attrs:{col:"12",files:[e.expense.receipt_path]}}):a("span",[e._v("N/A")])],1)])]),a("div",{staticClass:"text-end"},[a("AppButton",{attrs:{color:"light","data-bs-dismiss":"modal"}},[e._v(" Fechar ")])],1)],1)},U=[],H={components:{EntryDetailsHeader:O},props:{expense:{type:Object,required:!0}},data:function(){return{icons:{faFunnelDollar:l.hU3}}},methods:{formatDatetime:b.DZ,getUserName:function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.name)||e.employee_name}}},M=H,j=(0,h.Z)(M,R,U,!1,null,null,null),Z=j.exports,G={components:{EntryDetailsPayment:q,EntryDetailsExpense:Z},props:{value:{type:Boolean,default:!1},entry:{type:Object,required:!0}},computed:{modalColor:function(){return this.is_expense?"danger":"success"}},methods:{isEmpty:C.Z}},W=G,K=(0,h.Z)(W,x,S,!1,null,null,null),Q=K.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-start fw-bold"},[a("div",{staticClass:"text-success mb-1"},[a("FontAwesomeIcon",{attrs:{icon:e.icons.faHandHoldingUsd,"fixed-width":""}}),e._v(" Pagamento recebido ")],1),a("div",{staticClass:"text-danger"},[a("FontAwesomeIcon",{attrs:{icon:e.icons.faFunnelDollar,"fixed-width":""}}),e._v(" Despesa ")],1)])},J=[],X={data:function(){return{icons:{faFunnelDollar:l.hU3,faHandHoldingUsd:l.oFW}}}},Y=X,ee=(0,h.Z)(Y,z,J,!1,null,null,null),te=ee.exports,ae={components:{ModalEntryDetails:Q,CashFlowLegendType:te,Tippy:E.Jx},props:{data:{type:Array,default:function(){return[]}}},data:function(){return{modalEntryDetails:{modal:!1,entry:{}},icons:{faExclamationCircle:l.RLE,faFileAlt:l.cwv,faFunnelDollar:l.hU3,faHandHoldingUsd:l.oFW}}},computed:{headers:function(){return[{text:"Tipo",value:"type",align:"center"},{text:"Descrição/Pedido",value:"description"},{text:"Via",value:"via"},{text:"Valor",value:"value",format:"currencyBRL",nowrap:!0},{text:"Data",value:"date",align:"center",format:"datetime"},{text:"Detalhes",value:"details",align:"center"}]}},methods:{formatCurrencyBRL:b.gv,rowClass:function(e){return e.is_expense?"table-danger":"table-success"},getOrderUrl:function(e){var t=this.$router.resolve({name:"orders.show",params:{clientKey:e.order.client.id,orderKey:e.order.code}});return t.href},onDetailsShowClick:function(e){this.modalEntryDetails.entry=e,this.modalEntryDetails.modal=!0},onModalHidden:function(){this.modalEntryDetails.entry={}}}},ne=ae,ie=(0,h.Z)(ne,F,g,!1,null,null,null),se=ie.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showStatistics?a("div",{staticClass:"d-flex justify-content-center"},[a("div",{staticClass:"text-primary text-subtitle"},[a("div",{staticClass:"d-flex align-items-center mb-1"},[a("div",{staticClass:"text-success me-1"},[e._v(" Pedidos registrados: "),a("b",[e._v(" "+e._s(e.data.created_orders)+" "),e.data.created_orders>0?[e._v(" ("+e._s(e.data.created_shirts)+" camisas) ")]:e._e()],2)]),a("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{icon:e.icons.faExclamationCircle,size:"lg",content:"Estatísticas feitas com relação na data de cadastro dos pedidos, por isso, não tem relação com a lista de pagamentos que podem ter datas diferentes."}})],1),e.data.created_orders>0?[a("b",[e._v("DOS QUAIS:")]),a("div",[e._v(" Fechados: "),a("b",[e._v(" "+e._s(e.data.closed_orders)+" "),e.data.closed_shirts>0?[e._v(" ("+e._s(e.data.closed_shirts)+" camisas) ")]:e._e()],2)]),a("div",[e._v(" Sem pagamentos: "),a("b",[e._v(e._s(e.data.no_payments_orders)+" "),e.data.no_payments_shirts>0?[e._v(" ("+e._s(e.data.no_payments_shirts)+" camisas) ")]:e._e()],2)])]:e._e()],2)]):e._e(),e.showBalance?a("div",{staticClass:"text-center"},[a("h5",{staticClass:"fw-bold mt-3",class:e.data.balance>0?"text-success":"text-danger"},[e._v(" BALANÇO FINAL: "+e._s(e.$helpers.toBRL(e.data.balance))+" ")])]):e._e()])},oe=[],le={props:{data:{type:Object,default:function(){return{}}},showStatistics:{type:Boolean,default:!1},showBalance:{type:Boolean,default:!1}},data:function(){return{icons:{faExclamationCircle:l.RLE}}}},de=le,ce=(0,h.Z)(de,re,oe,!1,null,null,null),ue=ce.exports,me={components:{CashFlowBodyTable:se,CashFlowBodyStatistics:ue},props:{isLoading:{type:Boolean,default:!1},filterDates:{type:Object,default:function(){return{}}},data:{type:Array,default:function(){return[]}},pagination:{type:Object,default:function(){return{}}},page:{type:Number,required:!0},statistics:{type:Object,default:function(){return{}}},showStatistics:{type:Boolean,default:!1},showBalance:{type:Boolean,default:!1}},data:function(){return{icons:{faCashRegister:l.J4t,faExclamationCircle:l.RLE}}},computed:{displayFilteredDate:function(){var e=this.filterDates,t=e.start_date,a=e.final_date;return t&&a?"".concat(t," ~ ").concat(a):"".concat(t)}},methods:{isEmpty:C.Z}},pe=me,ve=(0,h.Z)(pe,_,w,!1,null,null,null),fe=ve.exports,he={metaInfo:function(){return{title:"Fluxo de caixa"}},components:{TheCashFlowFilter:k,TheCashFlowBody:fe},apollo:{cashFlowEntries:{query:d.GetCashFlowEntries,variables:function(){return{page:this.page,first:10,where:this.where}},result:function(e){var t=e.loading;if(!t){var a=this.filterForm,n=a.start_date,i=a.final_date;this.filterDates={start_date:n,final_date:i}}},error:function(e){(0,o.S)(this,e,{formProp:"filterForm"}),this.where={}}}},data:function(){return{cashFlowEntries:{data:[],paginatorInfo:{}},filterForm:new r.Z({start_date:"",final_date:"",showStatistics:!1,showBalance:!1}),filterDates:{},statistics:{},page:1,search:"",where:{},icons:{faSearch:l.wn1}}},computed:{isLoading:function(){return!!this.$apollo.queries.cashFlowEntries.loading}},methods:{onSearch:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.search,e.where={column:"DESCRIPTION",operator:"LIKE",value:"%".concat(a,"%")};case 2:case"end":return t.stop()}}),t)})))()},onSearchClear:function(){this.search="",this.where={}},onFilterClear:function(){this.filterForm.reset(),this.filterDates={},this.where={}},submitStatistics:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function a(){var n,i,s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.start_date,i=e.final_date,a.prev=1,a.next=4,t.$apollo.query({query:d.GetCashFlowStatistics,variables:{input:{start_date:n,final_date:i}}});case 4:s=a.sent,r=s.data,t.statistics=r.cashFlowStatistics,a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](1);case 11:case"end":return a.stop()}}),a,null,[[1,9]])})))()},onSubmit:function(){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function t(){var a,n,i,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.filterForm.data(),n=a.showStatistics,i=a.showBalance,s=a.start_date,r=a.final_date,(n||i)&&e.submitStatistics(a),!s||!r){t.next=7;break}return e.where={column:"DATE",operator:"BETWEEN",value:[s,r]},t.abrupt("return");case 7:e.where={column:"DATE",operator:"EQ",value:s};case 8:case"end":return t.stop()}}),t)})))()}}},ye=he,ke=(0,h.Z)(ye,n,i,!1,null,null,null),_e=ke.exports}}]);
//# sourceMappingURL=cash-flow-legacy.3974df66.js.map