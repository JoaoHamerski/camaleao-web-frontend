(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[755],{1136:function(e,t,i){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"activities"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"page"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderBy"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"QueryActivitiesOrderByOrderByClause"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"where"}},type:{kind:"NamedType",name:{kind:"Name",value:"QueryActivitiesWhereWhereConditions"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activities"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"page"},value:{kind:"Variable",name:{kind:"Name",value:"page"}}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"Variable",name:{kind:"Name",value:"orderBy"}}},{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"Variable",name:{kind:"Name",value:"where"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paginatorInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"perPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentPage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"data"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"log_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderSubject"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"ClientSubject"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"causer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserCauser"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:546}};n.loc.source={body:'#import "./ActivityFragments.gql"\n\nquery activities (\n  $first: Int!\n  $page: Int\n  $orderBy: [QueryActivitiesOrderByOrderByClause!]\n  $where: QueryActivitiesWhereWhereConditions\n) {\n  activities (first: $first page: $page orderBy: $orderBy where: $where) {\n    paginatorInfo {\n      total\n      perPage\n      currentPage\n    }\n\n    data {\n      id\n      log_name\n      description\n      subject {\n        ...OrderSubject\n        ...ClientSubject\n      }\n      causer {\n        ...UserCauser\n      }\n      properties\n      created_at\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!a[t]&&(a[t]=!0,!0)}))}function s(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&t.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){s(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){s(e,t)})),e.definitions&&e.definitions.forEach((function(e){s(e,t)}))}n.definitions=n.definitions.concat(r(i(5890).definitions));var o={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}function l(e,t){var i={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var n=o[t]||new Set,a=new Set,r=new Set;n.forEach((function(e){r.add(e)}));while(r.size>0){var s=r;r=new Set,s.forEach((function(e){if(!a.has(e)){a.add(e);var t=o[e]||new Set;t.forEach((function(e){r.add(e)}))}}))}return a.forEach((function(t){var n=d(e,t);n&&i.definitions.push(n)})),i}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;s(e,t),o[e.name.value]=t}}))})(),e.exports=n,e.exports.activities=l(n,"activities")},5890:function(e){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserCauser"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OrderSubject"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Order"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"client"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClientSubject"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Client"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}],loc:{start:0,end:179}};t.loc.source={body:"fragment UserCauser on User {\n  id\n  name\n  role {\n    id\n    name\n  }\n}\n\nfragment OrderSubject on Order {\n  id\n  client {\n    id\n  }\n}\n\nfragment ClientSubject on Client {\n  id\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}function r(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,s=new Set,o=new Set;r.forEach((function(e){o.add(e)}));while(o.size>0){var d=o;o=new Set,d.forEach((function(e){if(!s.has(e)){s.add(e);var t=n[e]||new Set;t.forEach((function(e){o.add(e)}))}}))}return s.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(function(){t.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),n[e.name.value]=t}}))})(),e.exports=t,e.exports.UserCauser=r(t,"UserCauser"),e.exports.OrderSubject=r(t,"OrderSubject"),e.exports.ClientSubject=r(t,"ClientSubject")},2077:function(e){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"User"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"users"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userCreate"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userChangeRole"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"new_role_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userChangeRole"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"new_role_id"},value:{kind:"Variable",name:{kind:"Name",value:"new_role_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userDelete"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"auth_password"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"auth_password"},value:{kind:"Variable",name:{kind:"Name",value:"auth_password"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]}]}}]}}],loc:{start:0,end:478}};t.loc.source={body:"fragment User on User {\n  id\n  name\n  email\n  created_at\n  role {\n    id\n    name\n  }\n}\n\nquery users {\n  users {\n    ...User\n  }\n}\n\nmutation userCreate($input: UserInput!) {\n  userCreate(input: $input) {\n    ...User\n  }\n}\n\nmutation userChangeRole ($id: ID! $new_role_id: Int) {\n  userChangeRole(id: $id new_role_id: $new_role_id){\n    ...User\n  }\n}\n\nmutation userDelete($id: ID! $auth_password: String!) {\n  userDelete(id: $id auth_password: $auth_password) {\n    ...User\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var n={};function a(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}function r(e,t){var i={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,s=new Set,o=new Set;r.forEach((function(e){o.add(e)}));while(o.size>0){var d=o;o=new Set,d.forEach((function(e){if(!s.has(e)){s.add(e);var t=n[e]||new Set;t.forEach((function(e){o.add(e)}))}}))}return s.forEach((function(t){var n=a(e,t);n&&i.definitions.push(n)})),i}(function(){t.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),n[e.name.value]=t}}))})(),e.exports=t,e.exports.User=r(t,"User"),e.exports.users=r(t,"users"),e.exports.userCreate=r(t,"userCreate"),e.exports.userChangeRole=r(t,"userChangeRole"),e.exports.userDelete=r(t,"userDelete")},631:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return pe}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col col-sm-10 mx-auto py-5"},[i("TheActivitiesFilter",{staticClass:"mb-2",attrs:{"is-loading":e.isLoading},on:{filtered:e.onFilter,clear:e.clearFilter}}),i("TheActivitiesCard",{attrs:{activities:e.activities.data,"is-loading":e.isLoading}}),i("AppPaginator",{staticClass:"mt-2",attrs:{pagination:e.activities.paginatorInfo,loading:e.isLoading},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)},a=[],r=i(3871),s=i(3445),o=i(9697),d=i(1136),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("AppCard",{staticClass:"position-relative",scopedSlots:e._u([{key:"header",fn:function(){return[i("div",{staticClass:"d-flex justify-content-between align-items-center"},[i("h6",{staticClass:"fw-bold mb-0"},[i("FontAwesomeIcon",{attrs:{icon:e.icons.faListAlt,"fixed-width":""}}),e._v(" Atividades do sistema ")],1),i("ActivitiesLegendIcon")],1)]},proxy:!0},{key:"body",fn:function(){return[i("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e.activities.length?[i("ul",{staticClass:"list-group list-group-flush"},e._l(e.activities,(function(e){return i("ActivityItem",{key:e.id,attrs:{item:e}})})),1)]:[i("div",{staticClass:"text-center text-secondary my-5"},[e._v(" Nenhum registro encontrado ")])]]},proxy:!0}])})},u=[],c=i(1436),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"list-group-item"},[i("ActivityItemText",e._b({},"ActivityItemText",{item:e.item,text:e.text,description:e.description,attributes:e.attributes},!1)),e.renderPropChanges?i("ActivityItemChanges",{attrs:{item:e.item,"props-map":e.properties}}):e._e()],1)},p=[],v=(i(6755),i(2526),i(1817),i(2222),i(9254),i(7162)),f=i(7859),k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("AppCollapsible",{attrs:{id:"description_"+e.item.id,"header-class":"link-primary small","hide-arrow":""},scopedSlots:e._u([{key:"header",fn:function(){return[e._v(" "+e._s(e.collapse?"Ocultar alterações ":"Ver alterações")+" ")]},proxy:!0},{key:"body",fn:function(){return[i("div",{staticClass:"activity-item-changes table-responsive"},[i("ActivityItemChangesProps",{attrs:{"props-old":e.old,"props-updated":e.updated,map:e.propsMap}})],1)]},proxy:!0}]),model:{value:e.collapse,callback:function(t){e.collapse=t},expression:"collapse"}})},h=[],g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table table-sm"},[e._m(0),i("tbody",[e._l(e.mapKeys,(function(t){return[e.propsKeys.includes(t)?i("tr",{key:t},[i("td",{staticClass:"fw-bold w-25"},[e._v(" "+e._s(e.getFormattedKey(t))+" ")]),i("td",{domProps:{innerHTML:e._s(e.getFormattedProp(e.propsOld[t],t))}}),i("td",{domProps:{innerHTML:e._s(e.getFormattedProp(e.propsUpdated[t],t))}})]):e._e()]}))],2)])])},y=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th"),i("th",[e._v("DE")]),i("th",[e._v("PARA")])])])}],b=(i(7941),i(1249),i(9600),{props:{propsOld:{type:Object,required:!0},propsUpdated:{type:Object,required:!0},map:{type:Object,required:!0}},computed:{propsKeys:function(){return Object.keys(this.propsOld)},mapKeys:function(){return Object.keys(this.map)}},methods:{formatDatetime:f.DZ,formatCurrencyBRL:f.gv,formatPhone:f.CN,getFormattedKey:function(e){var t=this.map[e];return t.text},handleBoolean:function(e,t){return t[null!==e?!!e:null]},handleList:function(e){if(!e.length)return"N/A";var t=e.map((function(e){return'<li class="list-group-item">'.concat(e,"</li>")}));return'<ul class="list-group list-group-sm">'.concat(t.join(""),"</ul>")},handleType:function(e,t){return"boolean"===t.type?this.handleBoolean(e,t.handle):"list"===t.type?this.handleList(e):void 0},getFormattedProp:function(e,t){var i=this.map[t];if(i.type)return this.handleType(e,i);if(!e)return"N/A";if(i.format){var n="format"+(0,v.Z)(i.format);return this[n](e)}return e}}}),S=b,N=i(1001),x=(0,N.Z)(S,g,y,!1,null,null,null),_=x.exports,C={components:{ActivityItemChangesProps:_},props:{item:{type:Object,default:function(){return{}}},propsMap:{type:Object,required:!0}},data:function(){return{collapse:!1}},computed:{properties:function(){return JSON.parse(this.item.properties)},old:function(){return this.properties.old},updated:function(){return this.properties.attributes}}},F=C,w=(0,N.Z)(F,k,h,!1,null,"93d31eea",null),D=w.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-between align-items-sm-center"},[i("div",{class:{"text-decoration-line-through":e.isItemDeleted}},[i("FontAwesomeIcon",{staticClass:"me-2",class:{"text-success":"created"===e.eventType,"text-primary":"updated"===e.eventType,"text-danger":"deleted"===e.eventType},attrs:{icon:e.icons[e.item.log_name],"fixed-width":""}}),e.userDeletedItself?i("span",[i("b",[e._v(e._s(e.attributes.name))]),e._v(" deletou a própria conta ")]):e.userUpdatedItself?i("span",[i("b",[e._v(e._s(e.item.subject.name||e.attributes.name))]),e._v(" alterou dados da própria conta ")]):i("span",{class:e.$isMobile&&"small",domProps:{innerHTML:e._s(e.text)}})],1),i("div",{staticClass:"small text-secondary text-sm-center d-flex d-sm-block my-2 my-sm-0"},[i("div",[e._v(" "+e._s(e.formatDatetime(e.item.created_at))+"   ")]),i("div",[e._v(e._s(e.formatDatetime(e.item.created_at,"HH:mm")))])])])},T=[],O=i(4367),j=(i(8309),{orders:c.G1z,clients:c.FVb,payments:c.egO,notes:c.L4e,expenses:c.hU3,users:c.FVb,cities:c.SBo,shipping_companies:c.$KU,branches:c.P88,clothing_types:c.Dfm,commission_users:c.hVM,configs_orders:c.G1z}),E={props:{item:{type:Object,required:!0},description:{type:Object,required:!0},attributes:{type:Object,required:!0},text:{type:String,required:!0}},data:function(){return{icons:(0,O.Z)({},j)}},computed:{eventType:function(){return this.description.type},userDeletedItself:function(){var e,t;return"deleted"===this.eventType&&(null===(e=this.description)||void 0===e||null===(t=e.causerProps)||void 0===t?void 0:t.name)===this.attributes.name},userUpdatedItself:function(){var e,t;return"updated"===this.eventType&&(null===(e=this.description)||void 0===e||null===(t=e.causerProps)||void 0===t?void 0:t.name)===this.attributes.name},isItemDeleted:function(){return"configs"!==this.description.type&&(!this.item.subject&&"deleted"!==this.description.type)}},methods:{formatDatetime:f.DZ}},U=E,V=(0,N.Z)(U,A,T,!1,null,null,null),I=V.exports,$={components:{ActivityItemChanges:D,ActivityItemText:I},props:{item:{type:Object,default:function(){return{}}}},computed:{isConfig:function(){return this.item.log_name.startsWith("configs")},renderPropChanges:function(){return"updated"===this.description.type&&!this.isConfig},properties:function(){var e=this.item.log_name;return i(3341)("./".concat(e,".map.json"))},description:function(){return JSON.parse(this.item.description)},attributes:function(){var e=JSON.parse(this.item.properties);return(null===e||void 0===e?void 0:e.attributes)||{}},text:function(){var e=this.description,t=e.placeholderText,i=e.causerProps,n=e.subjectProps,a=e.attributesProps,r=this.$helpers.replaceStrArray(":causer",this.getValuesToReplace(i,!0),t),s=this.$helpers.replaceStrArray(":subject",this.getValuesToReplace(n,!1),r),o=this.$helpers.replaceStrArray(":attribute",this.getValuesToReplace(a,!1),s);return o}},methods:{formatDatetime:f.DZ,formatCurrencyBRL:f.gv,formatPhone:f.CN,getFormattedHref:function(e,t){return'<a class="text-decoration-none" href="'.concat(e,'" target="_blank">').concat(t,"</a>")},getOrderUrl:function(e){if(this.item.subject){var t=this.item.subject,i=t.id,n=t.client,a=this.$helpers.getUrl("orders.show",{client:n.id,order:i});return this.getFormattedHref(a,e)}return e},getClientUrl:function(e){if(this.item.subject){var t,i,n=(null===(t=this.item.subject)||void 0===t||null===(i=t.client)||void 0===i?void 0:i.id)||this.item.subject.id,a=this.$helpers.getUrl("clients.show",{client:n});return this.getFormattedHref(a,e)}return e},getFormattedValue:function(e,t){var i=this.properties[e];if(void 0===i)return t;if(i.format){var n="format"+(0,v.Z)(i.format);return this[n](t)}return i.link?this[i.method](t):t},getValuesToReplace:function(e,t){var i=this;return(0,r.Z)(e,(function(e,n){return t&&i.item.causer?'<span class="fw-bold">'.concat(i.item.causer[n],"</span>"):t&&!i.item.causer?'<span class="fw-bold">[Não identificável]</span>':t?"-":'<span class="fw-bold">'.concat(i.getFormattedValue(n,e),"</span>")}))}}},L=$,P=(0,N.Z)(L,m,p,!1,null,null,null),B=P.exports,R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Tippy",{attrs:{theme:"no-padding light-border",for:"activities-legend-icon",placement:"left"}},[i("ul",{staticClass:"list-group list-group-sm text-start"},[i("li",{staticClass:"list-group-item"},[i("b",{staticClass:"text-success"},[e._v("Ícone verde: ")]),e._v("Atividade de criação ")]),i("li",{staticClass:"list-group-item"},[i("b",{staticClass:"text-primary"},[e._v("Ícone azul: ")]),e._v("Atividade de alteração ")]),i("li",{staticClass:"list-group-item"},[i("b",{staticClass:"text-danger"},[e._v("Ícone vermelho: ")]),e._v("Atividade de exclusão ")])])]),i("FontAwesomeIcon",{attrs:{name:"activities-legend-icon",icon:e.icons.faExclamationCircle}})],1)},q=[],Z=i(7309),J={components:{Tippy:Z.Jx},data:function(){return{icons:{faExclamationCircle:c.RLE}}}},Q=J,M=(0,N.Z)(Q,R,q,!1,null,null,null),W=M.exports,z={components:{ActivityItem:B,ActivitiesLegendIcon:W},props:{activities:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1}},data:function(){return{icons:{faListAlt:c.zDS}}}},H=z,K=(0,N.Z)(H,l,u,!1,null,null,null),G=K.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("AppCard",{attrs:{color:"success",collapsible:""},scopedSlots:e._u([{key:"header",fn:function(){return[i("h6",{staticClass:"fw-bold mb-0"},[i("FontAwesomeIcon",{attrs:{icon:e.icons.faFilter,"fixed-width":""}}),e._v(" Filtrar atividades ")],1)]},proxy:!0},{key:"body",fn:function(){return[i("AppForm",{attrs:{form:e.form,"on-submit":e.onSubmit}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm"},[i("AppSimpleSelect",{attrs:{id:"causer_id",name:"causer_id",placeholder:"Selecione um usuário",options:e.users,"label-prop":"name","value-prop":"id"},model:{value:e.form.causer_id,callback:function(t){e.$set(e.form,"causer_id",t)},expression:"form.causer_id"}},[e._v(" Usuário: ")])],1),i("div",{staticClass:"col-12 col-sm"},[i("AppSimpleSelect",{attrs:{id:"subject_type",name:"subject_type",placeholder:"Selecione uma entidade",options:e.SUBJECT_TYPES,"label-prop":"text","value-prop":"value"},model:{value:e.form.subject_type,callback:function(t){e.$set(e.form,"subject_type",t)},expression:"form.subject_type"}},[e._v(" Atividades em: ")])],1)]),i("div",[i("AppInput",{attrs:{id:"date",name:"date",type:"date",placeholder:"Digite uma data...",mask:e.maskDate},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},[e._v(" Data: ")])],1),i("div",[i("AppButton",{staticClass:"me-2",attrs:{color:"success","btn-class":"fw-bold",loading:e.isLoading}},[e._v(" Filtrar ")]),i("AppButton",{attrs:{type:"button",color:"light",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.onClearFilterClick.apply(null,arguments)}}},[e._v(" Limpar filtros ")])],1)])]},proxy:!0}])})},X=[],ee=i(4082),te=i(2077),ie=i(5539),ne=[{text:"Clientes",value:"Client"},{text:"Pedidos",value:"Order"},{text:"Pagamentos",value:"Payment"},{text:"Comissões",value:"CommissionUser"},{text:"Despesas",value:"Expense"},{text:"Cidades",value:"City"},{text:"Filiais",value:"Branch"},{text:"Transportadoras",value:"ShippingCompany"},{text:"Tipos de Roupas",value:"ClothingType"},{text:"Anotações",value:"Note"},{text:"Usuários",value:"User"}],ae={props:{isLoading:{type:Boolean,default:!1}},apollo:{users:{query:te.users}},data:function(){return{maskDate:ee.A3,SUBJECT_TYPES:ne,users:[],form:new ie.Z({causer_id:"",subject_type:"",date:""}),icons:{faFilter:c.G_j}}},methods:{onSubmit:function(){var e=this.form.data();this.$emit("filtered",e)},onClearFilterClick:function(){this.form.reset(),this.$emit("clear")}}},re=ae,se=(0,N.Z)(re,Y,X,!1,null,null,null),oe=se.exports,de=i(9490),le=[{prop:"causer_id",column:"CAUSER_ID",operator:"EQ"},{prop:"subject_type",column:"SUBJECT_TYPE",operator:"EQ"},{prop:"date",column:"CREATED_AT",operator:"EQ"}],ue={components:{TheActivitiesCard:G,TheActivitiesFilter:oe},metaInfo:{title:function(){return"Atividades do sistema"}},apollo:{activities:{query:d.activities,variables:function(){return{first:10,page:this.page,orderBy:[{column:"CREATED_AT",order:"DESC"}],where:this.where}},fetchPolicy:"cache-and-network",deep:!0}},data:function(){return{page:1,where:{},activities:{data:[],paginatorInfo:{}}}},computed:{isLoading:function(){return!!this.$apollo.queries.activities.loading}},methods:{getValueFromParam:function(e,t){if("subject_type"===t)return"App\\Models\\".concat(e[t]);if("date"===t){var i=de.ou.fromFormat(e[t],"dd/MM/y");return i.toSQL()}return e[t]},getAllFilterQueries:function(e,t){var i=this;return(0,r.Z)(e,(function(e){var n=e.prop,a=e.column,r=e.operator;return{column:a,operator:r,value:i.getValueFromParam(t,n)}}))},onFilter:function(e){var t=(0,s.Z)(le,(function(t){return!(0,o.Z)(e[t.prop])}));this.page=1,(0,o.Z)(t)?this.where={}:this.where={AND:this.getAllFilterQueries(t,e)}},clearFilter:function(){this.page=1,this.where={}}}},ce=ue,me=(0,N.Z)(ce,n,a,!1,null,null,null),pe=me.exports},4230:function(e,t,i){var n=i(1702),a=i(4488),r=i(1340),s=/"/g,o=n("".replace);e.exports=function(e,t,i,n){var d=r(a(e)),l="<"+t;return""!==i&&(l+=" "+i+'="'+o(r(n),s,"&quot;")+'"'),l+">"+d+"</"+t+">"}},3429:function(e,t,i){var n=i(7293);e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},9254:function(e,t,i){"use strict";var n=i(2109),a=i(4230),r=i(3429);n({target:"String",proto:!0,forced:r("link")},{link:function(e){return a(this,"a","href",e)}})},6755:function(e,t,i){"use strict";var n=i(2109),a=i(1702),r=i(1236).f,s=i(7466),o=i(1340),d=i(3929),l=i(4488),u=i(4964),c=i(1913),m=a("".startsWith),p=a("".slice),v=Math.min,f=u("startsWith"),k=!c&&!f&&!!function(){var e=r(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!k&&!f},{startsWith:function(e){var t=o(l(this));d(e);var i=s(v(arguments.length>1?arguments[1]:void 0,t.length)),n=o(e);return m?m(t,n,i):p(t,i,i+n.length)===n}})},3341:function(e,t,i){var n={"./branches.map.json":1505,"./cities.map.json":9686,"./clients.map.json":3338,"./clothing_types.map.json":2899,"./commission_users.map.json":617,"./configs_orders.map.json":4719,"./expenses.map.json":7148,"./notes.map.json":164,"./orders.map.json":9513,"./payments.map.json":6091,"./shipping_companies.map.json":9728,"./users.map.json":8980};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id=3341},1505:function(e){"use strict";e.exports=JSON.parse('{"shippingCompany.name":{"text":"Transportadora"},"city.name":{"text":"Cidade"},"cities":{"text":"Cidades","type":"list"}}')},9686:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome"},"state.name":{"text":"Estado"}}')},3338:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome","link":true,"method":"getClientUrl"},"phone":{"text":"Telefone","format":"phone"},"branchCity.name":{"text":"Filial"},"city.name":{"text":"Cidade"},"shippingCompany.name":{"text":"Transportadora"}}')},2899:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome"},"commission":{"text":"Comissão","format":"currencyBRL"},"is_hidden":{"text":"Exibição","type":"boolean","handle":{"false":"Exibido","true":"Oculto"}}}')},617:function(e){"use strict";e.exports=JSON.parse('{"commission_value":{"format":"currencyBRL"},"confirmed_at":{"text":"Confirmação","type":"boolean","handle":{"null":"Não confirmado","true":"Confirmado"}}}')},4719:function(e){"use strict";e.exports=JSON.parse('{"commission_value":{"format":"currencyBRL"}}')},7148:function(e){"use strict";e.exports=JSON.parse('{"description":{"text":"Descrição"},"value":{"text":"Valor","format":"currencyBRL"},"type.name":{"text":"Tipo"},"via.name":{"text":"Via"},"date":{"text":"Data","format":"datetime"}}')},164:function(e){"use strict";e.exports=JSON.parse('{"text":{"text":"Anotação"}}')},9513:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome"},"code":{"text":"Código","link":true,"method":"getOrderUrl"},"price":{"text":"Preço","format":"currencyBRL"},"quantity":{"text":"Quantidade"},"client.name":{"text":"Cliente","link":true,"method":"getClientUrl"},"discount":{"text":"Desconto","format":"currencyBRL"},"status.text":{"text":"Status"},"closed_at":{"text":"Estado","type":"boolean","handle":{"null":"Aberto","true":"Fechado"}},"delivery_date":{"text":"Data de entrega","format":"datetime"},"production_date":{"text":"Data de produção","format":"datetime"},"art_paths":{"text":"Imagens da arte"},"size_paths":{"text":"Imagens do tamanho"},"payment_voucher_paths":{"text":"Comprovantes de pagamento"}}')},6091:function(e){"use strict";e.exports=JSON.parse('{"value":{"text":"Valor","format":"currencyBRL"},"date":{"text":"Data","format":"date"},"note":{"text":"Anotação"},"is_confirmed":{"text":"Confirmaçao","type":"boolean","handle":{"null":"Pendente","true":"Confirmado","false":"Rejeitado"}},"via.name":{"text":"Via"}}')},9728:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome"}}')},8980:function(e){"use strict";e.exports=JSON.parse('{"name":{"text":"Nome"},"email":{"text":"E-mail"},"role.name":{"text":"Privilégio"}}')}}]);
//# sourceMappingURL=activities-legacy.43c1f2c1.js.map