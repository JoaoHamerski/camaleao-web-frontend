"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[775],{2910:function(t,a,s){s.r(a),s.d(a,{default:function(){return E}});var o=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"py-5"},[s("div",{staticClass:"col col-sm-6 mx-auto"},[s("AppCard",{scopedSlots:t._u([{key:"header",fn:function(){return[s("h6",{staticClass:"fw-bold mb-0"},[s("FontAwesomeIcon",{attrs:{icon:t.icons.faUser}}),t._v(" Minha conta ")],1)]},proxy:!0},{key:"body",fn:function(){return[s("ModalEditAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onEditAccountSuccess},model:{value:t.modalEditAccount,callback:function(a){t.modalEditAccount=a},expression:"modalEditAccount"}}),s("ModalDeleteAccount",{attrs:{"auth-user":t.authUser},on:{success:t.onDeleteAccountSuccess},model:{value:t.modalDeleteAccount,callback:function(a){t.modalDeleteAccount=a},expression:"modalDeleteAccount"}}),s("div",{staticClass:"text-center mb-3"},[s("FontAwesomeIcon",{staticClass:"text-primary",attrs:{icon:t.icons.faUserCircle,size:"5x"}})],1),s("ul",{staticClass:"list-group list-group-flush"},[s("li",{staticClass:"list-group-item"},[s("b",[t._v("Nome: ")]),t._v(" "+t._s(t.authUser.name)+" ")]),s("li",{staticClass:"list-group-item"},[s("b",[t._v("E-mail: ")]),t._v(" "+t._s(t.authUser.email)+" ")]),s("li",{staticClass:"list-group-item"},[s("b",[t._v("Nível de usuário: ")]),t._v(" "+t._s(t.authUser.role.name)+" ")]),s("li",{staticClass:"list-group-item"},[s("b",[t._v("Senha: ")]),t._v(" ***** ")]),s("li",{staticClass:"list-group-item"},[s("b",[t._v("Criada em:")]),t._v(" "+t._s(t.formatDatetime(t.authUser.created_at))+" ")])]),s("div",{staticClass:"mt-3"},[s("AppButton",{attrs:{block:"",outlined:"","btn-class":"fw-bold",icon:t.icons.faEdit},on:{click:function(a){return a.preventDefault(),t.onEditAccountClick.apply(null,arguments)}}},[t._v(" Editar dados ")])],1),s("div",{staticClass:"text-end text-subtitle mt-2"},[s("span",{staticClass:"link-danger clickable",on:{click:function(a){return a.preventDefault(),t.onDeleteAccountClick.apply(null,arguments)}}},[s("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")],1)])]},proxy:!0}])})],1)])},e=[],n=s(1436),r=s(7859),i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("AppModal",t._g({attrs:{id:"modalEditAccount",value:t.value,centered:""},on:{show:t.onModalShow},scopedSlots:t._u([{key:"title",fn:function(){return[s("FontAwesomeIcon",{attrs:{icon:t.icons.faEdit}}),t._v(" Editar dados da sua conta ")]},proxy:!0},{key:"body",fn:function(){return[t.value?s("AppForm",{attrs:{form:t.form,"on-submit":t.onSubmit}},[s("AppInput",{attrs:{id:"name",name:"name",placeholder:"Seu nome...",error:t.form.errors.get("name"),autocomplete:"name"},model:{value:t.form.name,callback:function(a){t.$set(t.form,"name",a)},expression:"form.name"}},[t._v(" Nome: ")]),s("AppInput",{attrs:{id:"email",name:"email",placeholder:"Seu email...",error:t.form.errors.get("email"),autocomplete:"email"},model:{value:t.form.email,callback:function(a){t.$set(t.form,"email",a)},expression:"form.email"}},[t._v(" E-mail: ")]),s("AppCheckbox",{attrs:{id:"changePassword"},model:{value:t.changePassword,callback:function(a){t.changePassword=a},expression:"changePassword"}},[t._v(" Alterar senha ")]),t.changePassword?[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm"},[s("AppInput",{attrs:{id:"password",name:"password",autocomplete:"new-password",error:t.form.errors.get("password"),"default-margin":!1,type:"password"},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}},[t._v(" Nova senha: ")])],1),s("div",{staticClass:"col-12 col-sm"},[s("AppInput",{attrs:{id:"password_confirmation",name:"password_confirmation",autocomplete:"new-password",error:t.form.errors.get("password_confirmation"),"default-margin":!1,type:"password"},model:{value:t.form.password_confirmation,callback:function(a){t.$set(t.form,"password_confirmation",a)},expression:"form.password_confirmation"}},[t._v(" Confirme a senha: ")])],1)]),s("small",{staticClass:"form-text"},[t._v("Você também pode deixar em branco caso não queira alterá-la")])]:t._e(),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col"},[s("AppButton",{attrs:{block:"",color:"success","btn-class":"fw-bold",loading:t.isLoading}},[t._v(" Atualizar ")])],1),s("div",{staticClass:"col"},[s("AppButton",{attrs:{block:"",color:"light",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],2):t._e()]},proxy:!0}])},t.$listeners))},l=[],c=s(5539),u=s(1594),d=s(3258),m={props:{value:{type:Boolean,default:!1},authUser:{type:Object,default:()=>({})}},data(){return{changePassword:!1,isLoading:!1,icons:{faEdit:n.Xcf},form:new c.Z({name:"",email:"",password:"",password_confirmation:""})}},methods:{onModalShow(){const{name:t,email:a}=this.authUser;this.form.name=t,this.form.email=a},async onSubmit(){const t=this.form.data();this.isLoading=!0;try{await this.$apollo.mutate({mutation:d.UpdateAuthUser,variables:{input:t}}),(0,u.s)(this,{message:"Dados atualizados!"})}catch(a){(0,u.S)(this,a)}this.isLoading=!1}}},p=m,f=s(1001),h=(0,f.Z)(p,i,l,!1,null,null,null),v=h.exports,w=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("AppModal",t._g({attrs:{id:"modalDeleteAccount",value:t.value,color:"danger",centered:""},scopedSlots:t._u([{key:"title",fn:function(){return[s("FontAwesomeIcon",{attrs:{icon:t.icons.faTrashAlt}}),t._v(" Deletar conta ")]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"text-center"},[s("FontAwesomeIcon",{staticClass:"text-danger",attrs:{size:"5x",icon:t.icons.faTrashAlt}}),s("h6",{staticClass:"fw-bold mt-3"},[t._v(" Você tem certeza que deseja deletar a sua conta? ")])],1),s("AppForm",{staticClass:"mt-5",attrs:{form:t.form,"on-submit":t.onSubmit,autocomplete:"off"}},[s("input",{staticClass:"d-none",attrs:{type:"email",name:"email",autocomplete:"off"}}),s("AppInput",{attrs:{id:"password",name:"password",placeholder:"Sua senha...",error:t.form.errors.get("password"),type:"password",autocomplete:"new-password"},model:{value:t.form.password,callback:function(a){t.$set(t.form,"password",a)},expression:"form.password"}},[t._v(" Confirme sua senha: ")]),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col"},[s("AppButton",{attrs:{color:"success","btn-class":"fw-bold",block:"",loading:t.isLoading}},[t._v(" Confirmar ")])],1),s("div",{staticClass:"col"},[s("AppButton",{attrs:{color:"light",block:"",type:"button","data-bs-dismiss":"modal",disabled:t.isLoading}},[t._v(" Cancelar ")])],1)])],1)]},proxy:!0}])},t.$listeners))},A=[],b={props:{value:{type:Boolean,default:!1}},data(){return{isLoading:!1,form:new c.Z({password:""}),icons:{faTrashAlt:n.I7k}}},methods:{async onSubmit(){const{password:t}=this.form.data();this.isLoading=!0;try{await this.$apollo.mutate({mutation:d.DeleteAuthUser,variables:{password:t}}),(0,u.s)(this,{message:"Sua conta foi deletada!"})}catch(a){(0,u.S)(this,a)}this.isLoading=!1}}},_=b,C=(0,f.Z)(_,w,A,!1,null,null,null),g=C.exports,k={metaInfo:{title(){return"Minha conta"}},components:{ModalEditAccount:v,ModalDeleteAccount:g},data(){return{modalEditAccount:!1,modalDeleteAccount:!1,icons:{faUser:n.ILF,faUserCircle:n.m08,faTrashAlt:n.I7k,faEdit:n.Xcf}}},computed:{authUser(){return this.$store.getters["auth/authUser"]}},methods:{formatDatetime:r.DZ,onEditAccountClick(){this.modalEditAccount=!0},async onEditAccountSuccess(){this.modalEditAccount=!1,await this.$store.dispatch("auth/getAuthUser")},onDeleteAccountClick(){this.modalDeleteAccount=!0},onDeleteAccountSuccess(){this.modalDeleteAccount=!1,this.$nextTick((async()=>{await this.$store.dispatch("auth/logout")}))}}},y=k,x=(0,f.Z)(y,o,e,!1,null,null,null),E=x.exports}}]);
//# sourceMappingURL=my-acount.edd79038.js.map