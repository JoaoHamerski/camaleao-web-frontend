"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[905],{2498:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-5"},[n("div",{staticClass:"d-flex justify-content-between mb-2"},[n("AppButton",{attrs:{"btn-class":"fw-bold",color:"success",icon:e.icons.faPlus},on:{click:function(t){return t.preventDefault(),e.onNewBranchClick.apply(null,arguments)}}},[e._v(" Nova filial ")]),n("AppButton",{attrs:{"btn-class":"fw-bold",icon:e.icons.faTruck},on:{click:function(t){return t.preventDefault(),e.onShippingCompaniesClick.apply(null,arguments)}}},[e._v(" Transportadoras ")])],1),n("ModalNewBranch",{attrs:{cities:e.cities,"shipping-companies":e.shippingCompanies},on:{success:e.onNewBranch},model:{value:e.modalNewBranch,callback:function(t){e.modalNewBranch=t},expression:"modalNewBranch"}}),n("ModalShippingCompanies",{attrs:{"shipping-companies":e.shippingCompanies,"is-loading":e.isShippingCompaniesLoading},model:{value:e.modalShippingCompanies,callback:function(t){e.modalShippingCompanies=t},expression:"modalShippingCompanies"}}),n("TheBranchesCard",{attrs:{branches:e.branches,cities:e.cities,"shipping-companies":e.shippingCompanies,"is-loading":e.isBranchesLoading}})],1)},a=[],o=n(1436),s=n(3611),r=n(5569),c=n(448),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppCard",{attrs:{color:"camaleao"},scopedSlots:e._u([{key:"header",fn:function(){return[n("h6",{staticClass:"fw-bold mb-0"},[n("FontAwesomeIcon",{attrs:{icon:e.icons.faBuilding,"fixed-width":""}}),e._v(" Gerenciamento de filiais ")],1)]},proxy:!0},{key:"body",fn:function(){return[n("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),n("ModalEditBranch",{attrs:{branch:e.modalEditBranch.branch,cities:e.cities,"shipping-companies":e.shippingCompanies},on:{success:e.onEditSuccess},model:{value:e.modalEditBranch.value,callback:function(t){e.$set(e.modalEditBranch,"value",t)},expression:"modalEditBranch.value"}}),n("ModalDeleteBranch",{attrs:{branch:e.modalDeleteBranch.branch},on:{success:e.onDeleteSuccess},model:{value:e.modalDeleteBranch.value,callback:function(t){e.$set(e.modalDeleteBranch,"value",t)},expression:"modalDeleteBranch.value"}}),n("TheBranchesCardTable",{attrs:{items:e.branches},on:{action:e.onActionClicked}})]},proxy:!0}])})},u=[],p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppTable",{attrs:{"row-class":function(){return"align-middle"},items:e.items,headers:e.headers},scopedSlots:e._u([{key:"items.city",fn:function(t){var i=t.item;return[i.city?n("span",[e._v(" "+e._s(e.getCityName(i.city))+" ")]):n("span",{staticClass:"fw-bold text-danger"},[e._v(" [DELETADA] ")])]}},{key:"items.shipping_company",fn:function(t){var i=t.item;return[i.shipping_company?[e._v(" "+e._s(i.shipping_company.name)+" ")]:[n("div",{staticClass:"text-danger fw-bold"},[e._v(" [DELETADA] ")])]]}},{key:"items.cities",fn:function(t){var i=t.item;return[i.cities.length?n("ul",{staticClass:"list-group list-group-sm"},e._l(i.cities,(function(t){return n("li",{key:t.id,staticClass:"list-group-item"},[e._v(" "+e._s(e.getCityName(t))+" ")])})),0):n("div",{staticClass:"text-center text-secondary"},[e._v(" N/A ")])]}},{key:"items.actions",fn:function(t){var i=t.item;return[n("div",{staticClass:"mb-1"},[n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{"btn-class":"btn-sm",icon:e.icons.faEdit,outlined:"",content:"Editar"},on:{click:function(t){return t.preventDefault(),e.onActionClick(i,"edit")}}})],1),n("div",[n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{"btn-class":"btn-sm",icon:e.icons.faTrashAlt,outlined:"",color:"danger",content:"Deletar"},on:{click:function(t){return t.preventDefault(),e.onActionClick(i,"delete")}}})],1)]}}],null,!0)})},d=[],m=(n(2222),n(8309),{props:{items:{type:Array,default:function(){return[]}}},data:function(){return{icons:{faEdit:o.Xcf,faTrashAlt:o.I7k}}},computed:{headers:function(){return[{text:"Filial",value:"city"},{text:"Transportadora",value:"shipping_company"},{text:"Cidades",value:"cities"},{text:"Ações",value:"actions",align:"center"}]}},methods:{onActionClick:function(e,t){this.$emit("action",{item:e,action:t})},getCityName:function(e){return e.state?"".concat(e.name," - ").concat(e.state.abbreviation):e.name}}}),f=m,h=n(1001),v=(0,h.Z)(f,p,d,!1,null,null,null),y=v.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppModal",e._g({attrs:{id:"modalEditBranch",value:e.value,centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faBuilding,"fixed-width":""}}),e._v(" Editar filial ")]},proxy:!0},{key:"body",fn:function(){return[e.value?n("BranchForm",{attrs:{"is-edit":!0,branch:e.branch,cities:e.cities,"shipping-companies":e.shippingCompanies},on:{success:e.onSuccess}}):e._e()]},proxy:!0}])},e.$listeners))},g=[],b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppForm",{attrs:{form:e.form,"on-submit":e.onSubmit}},[n("AppSelect",{attrs:{name:"city_id",options:e.cities,"custom-label":e.customCityLabel,placeholder:"Selecione uma cidade",error:e.form.errors.get("city_id")},scopedSlots:e._u([{key:"hint",fn:function(){return[e._v(" A lista de filiais é sincronizada com a lista de cidades no sistema. "),n("FontAwesomeIcon",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-primary",attrs:{icon:e.icons.faQuestionCircle,content:"Isso significa que caso o nome de uma cidade seja alterado, é refletido no nome da cidade da filial."}})]},proxy:!0}]),model:{value:e.form.branch_id,callback:function(t){e.$set(e.form,"branch_id",t)},expression:"form.branch_id"}},[e._v(" Filial: ")]),n("AppSelect",{attrs:{name:"shipping_company_id",options:e.shippingCompanies,"custom-label":function(e){return e.name},placeholder:"Selecione uma transportadora",error:e.form.errors.get("shipping_company_id")},model:{value:e.form.shipping_company_id,callback:function(t){e.$set(e.form,"shipping_company_id",t)},expression:"form.shipping_company_id"}},[e._v(" Transportadoras: ")]),n("AppSelect",{attrs:{name:"cities_id",options:e.cities,"custom-label":function(t){return e.customCityLabel(t,!0)},multiple:!0,"close-on-select":!1,"track-by":"id",placeholder:"Selecione uma cidade",error:e.form.errors.get("cities_id")},scopedSlots:e._u([{key:"hint",fn:function(){return[e._v(" Caso selecione uma cidade que já está em uma filial, ela será removida da filial a que pertence. ")]},proxy:!0}]),model:{value:e.form.cities_id,callback:function(t){e.$set(e.form,"cities_id",t)},expression:"form.cities_id"}},[e._v(" Cidades: ")]),n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col"},[n("AppButton",{attrs:{"btn-class":"fw-bold",color:"success",block:"",loading:e.isLoading}},[e._v(" "+e._s(e.isEdit?"Atualizar":"Cadastrar")+" ")])],1),n("div",{staticClass:"col"},[n("AppButton",{attrs:{color:"light",block:"","data-bs-dismiss":"modal",type:"button"}},[e._v(" Fechar ")])],1)])],1)},_=[],k=n(6198),w=n(4367),A=(n(5666),n(9826),n(1539),n(6699),n(2023),n(1249),n(1594)),x=n(3871),B=n(3445),S=n(5539),E={props:{isEdit:{type:Boolean,default:!1},shippingCompanies:{type:Array,default:function(){return[]}},cities:{type:Array,default:function(){return[]}},branch:{type:Object,default:null}},data:function(){return{icons:{faQuestionCircle:o.sph},isLoading:!1,form:new S.Z({branch_id:"",shipping_company_id:"",cities_id:[]})}},mounted:function(){this.isEdit&&this.populateForm()},methods:{populateForm:function(){var e=this,t=(0,x.Z)(this.branch.cities,"id");this.form.branch_id=this.cities.find((function(t){var n,i;return t.id===(null===(n=e.branch)||void 0===n||null===(i=n.city)||void 0===i?void 0:i.id)||""})),this.form.shipping_company_id=this.shippingCompanies.find((function(t){var n,i;return t.id===(null===(n=e.branch)||void 0===n||null===(i=n.shipping_company)||void 0===i?void 0:i.id)||""})),this.form.cities_id=(0,B.Z)(this.cities,(function(e){return t.includes(e.id)}))},getCityName:function(e){return e.state?"".concat(e.name," - ").concat(e.state.abbreviation):e.name},isCityAlreadyOnBranch:function(e,t){return this.isEdit?t&&e.branch&&!(0,x.Z)(this.branch.cities,"id").includes(e.id):t&&e.branch},customCityLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getCityName(e);return this.isCityAlreadyOnBranch(e,t)?"".concat(n," - (Já em uma filial)"):n},getFormattedData:function(){var e,t,n=(0,w.Z)({},this.form.data());return n.branch_id=(null===(e=n.branch_id)||void 0===e?void 0:e.id)||"",n.shipping_company_id=(null===(t=n.shipping_company_id)||void 0===t?void 0:t.id)||"",n.cities_id=n.cities_id.map((function(e){return e.id})),n},create:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$apollo.mutate({mutation:s.CreateBranch,variables:{input:e},refetchQueries:[s.GetBranches,c.GetCities]});case 3:t.$helpers.clearCacheFrom({fieldName:"cities"}),(0,A.s)(t,{message:"Filial registrada!",resetForm:!0}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),(0,A.S)(t,n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},update:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$apollo.mutate({mutation:s.UpdateBranch,variables:{id:t.branch.id,input:e},refetchQueries:[c.GetCities]});case 3:t.$helpers.clearCacheFrom({fieldName:"branches"}),(0,A.s)(t,{message:"Filial atualizada!",resetForm:!0}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),(0,A.S)(t,n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onSubmit:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.getFormattedData(),e.isLoading=!0,!e.isEdit){t.next=7;break}return t.next=5,e.update(n);case 5:t.next=9;break;case 7:return t.next=9,e.create(n);case 9:e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()}}},N=E,$=(0,h.Z)(N,b,_,!1,null,null,null),D=$.exports,T={components:{BranchForm:D},props:{value:{type:Boolean,default:!1},branch:{type:Object,default:null},shippingCompanies:{type:Array,default:function(){return[]}},cities:{type:Array,default:function(){return[]}}},data:function(){return{icons:{faBuilding:o.P88}}},methods:{onSuccess:function(){this.$emit("success")}}},L=T,F=(0,h.Z)(L,C,g,!1,null,null,null),Z=F.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppModal",e._g({attrs:{id:"modalDeleteBranch",value:e.value,color:"danger",centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faTrashAlt,"fixed-width":""}}),e._v(" Deletar filial ")]},proxy:!0},e.branch?{key:"body",fn:function(){return[n("div",[n("div",{staticClass:"text-center"},[n("FontAwesomeIcon",{staticClass:"text-danger",attrs:{icon:e.icons.faTrashAlt,size:"5x"}}),n("h6",{staticClass:"text-danger fw-bold mt-3"},[e._v(" Você está deletando a filial: ")])],1),n("div",[n("h5",{staticClass:"fw-bold text-center"},[e._v(" "+e._s(e.getCityName(e.branch.city))+" ")])]),n("div",{staticClass:"mt-3"},[n("div",[n("b",[e._v("Transportadora:")]),e._v(" "+e._s(e.$helpers.fallback(e.branch.shipping_company,"name"))+" ")]),n("div",{staticClass:"mt-2"},[n("div",{staticClass:"mb-2"},[n("b",[e._v("Cidades:")])]),e.branch.cities.length?n("div",[n("ul",{staticClass:"list-group list-group-sm"},e._l(e.branch.cities,(function(t){return n("li",{key:t.id,staticClass:"list-group-item"},[e._v(" "+e._s(e.getCityName(t))+" ")])})),0)]):n("div",[e._v(" N/A ")])])])]),n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col"},[n("AppButton",{attrs:{color:"success",block:"","btn-class":"fw-bold",loading:e.isLoading},on:{click:function(t){return t.preventDefault(),e.onConfirmClick.apply(null,arguments)}}},[e._v(" Confirmar ")])],1),n("div",{staticClass:"col"},[n("AppButton",{attrs:{color:"light",block:"","data-bs-dismiss":"modal"}},[e._v(" Cancelar ")])],1)])]},proxy:!0}:null],null,!0)},e.$listeners))},M=[],R={props:{value:{type:Boolean,default:!1},branch:{type:Object,default:null}},data:function(){return{isLoading:!1,icons:{faTrashAlt:o.I7k}}},methods:{onConfirmClick:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:s.DeleteBranch,variables:{id:e.branch.id}});case 4:e.$helpers.clearCacheFrom({id:e.branch.id,__typename:"Branch"}),e.$toast.success("Filial deletada!"),e.$emit("success"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$toast.error("Ops! Algo deu errado, tente novamente!");case 12:e.isLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getCityName:function(e){return e?e.state?"".concat(e.name," - ").concat(e.state.abbreviation):e.name:"N/A"}}},j=R,q=(0,h.Z)(j,I,M,!1,null,null,null),G=q.exports,O={components:{TheBranchesCardTable:y,ModalEditBranch:Z,ModalDeleteBranch:G},props:{isLoading:{type:Boolean,default:!1},branches:{type:Array,default:function(){return[]}},shippingCompanies:{type:Array,default:function(){return[]}},cities:{type:Array,default:function(){return[]}}},data:function(){return{modalDeleteBranch:{value:!1,branch:null},modalEditBranch:{value:!1,branch:null},icons:{faBuilding:o.P88}}},methods:{onDeleteSuccess:function(){this.modalDeleteBranch.value=!1,this.modalDeleteBranch.branch=null},onEditSuccess:function(){this.modalEditBranch.value=!1,this.modalEditBranch.branch=null},onActionClicked:function(e){var t=e.item,n=e.action;"edit"===n&&(this.modalEditBranch.branch=t,this.modalEditBranch.value=!0),"delete"===n&&(this.modalDeleteBranch.branch=t,this.modalDeleteBranch.value=!0)}}},P=O,z=(0,h.Z)(P,l,u,!1,null,null,null),Q=z.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppModal",e._g({attrs:{id:"modalShippingCompanies",value:e.value,centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faTruck,"fixed-width":""}}),e._v(" Transportadoras ")]},proxy:!0},{key:"body",fn:function(){return[n("AppLoading",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),n("AppTransition",{attrs:{enter:"fadeIn",mode:"out-in",speed:"faster"}},[e.companyToDelete?n("div",{key:"deleteTemplate"},[n("ModalShippingCompaniesDelete",{attrs:{company:e.companyToDelete},on:{success:e.onDeleteSuccess,cancel:e.onDeleteCancel}})],1):n("div",{key:"modalTemplate"},[n("div",{staticClass:"mb-3"},[n("AppButton",{attrs:{icon:e.icons.faPlus,"btn-class":"fw-bold btn-sm",color:"success"},on:{click:function(t){return t.preventDefault(),e.onNewCompanyClick.apply(null,arguments)}}},[e._v(" Nova transportadora ")])],1),n("ModalShippingCompaniesTable",{attrs:{items:e.shippingCompanies},on:{action:e.onAction}}),n("div",{staticClass:"mt-3"},[e.newCompany?n("div",[n("AppForm",{attrs:{form:e.form,"on-submit":e.onSubmit}},[n("AppInput",{ref:"newShippingCompanyInput",attrs:{name:"name",placeholder:"Nome da nova transportadora...",error:e.form.errors.get("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1):e._e(),n("div",{staticClass:"d-flex ",class:e.newCompany?"justify-content-between":"justify-content-end"},[e.newCompany?n("div",[n("AppButton",{staticClass:"me-2",attrs:{"btn-class":"fw-bold",color:"success",loading:e.isLoadingNewCompany},on:{click:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[e._v(" Salvar ")]),n("AppButton",{attrs:{color:"light"},on:{click:function(t){return t.preventDefault(),e.onCancelNewCompanyClick.apply(null,arguments)}}},[e._v(" Cancelar ")])],1):e._e(),n("AppButton",{attrs:{"data-bs-dismiss":"modal",color:"light"}},[e._v(" Fechar ")])],1)])],1)])]},proxy:!0}])},e.$listeners))},K=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppTable",{attrs:{headers:e.headers,items:e.items},scopedSlots:e._u([{key:"items.name",fn:function(t){var i=t.item;return[n("div",{staticClass:"w-100"},[e.isEditing(i)?[n("AppForm",{attrs:{form:e.form,"on-submit":function(){return e.onSubmitEdit(i)}}},[n("AppInput",{ref:"editCompanyNameInput",attrs:{"input-class":"form-control-sm",name:"name",placeholder:"Nome da transportadora...","default-margin":!1,error:e.form.errors.get("name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)]:[e._v(" "+e._s(i.name)+" ")]],2)]}},{key:"items.actions",fn:function(t){var i=t.item;return[e.isEditing(i)?n("div",[n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"me-1",attrs:{"btn-class":"btn-sm fw-bold",color:"success",icon:e.icons.faCheck,content:"Salvar",loading:e.edit.isLoading},on:{click:function(t){return t.preventDefault(),e.onSubmitEdit(i)}}}),n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ms-1",attrs:{"btn-class":"btn-sm",color:"light",icon:e.icons.faTimes,disabled:e.edit.isLoading,content:"Cancelar"},on:{click:function(t){return t.preventDefault(),e.onCancelEditClick(i)}}})],1):n("div",{staticClass:"d-flex justify-content-center"},[n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"me-1",attrs:{icon:e.icons.faEdit,"btn-class":"btn-sm",outlined:"",content:"Editar"},on:{click:function(t){return t.preventDefault(),e.onEditClick(i)}}}),n("AppButton",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ms-1",attrs:{icon:e.icons.faTrashAlt,color:"danger","btn-class":"btn-sm",outlined:"",content:"Deletar"},on:{click:function(t){return t.preventDefault(),e.onActionButtonClick("delete",i)}}})],1)]}}],null,!0)})},X=[],J={props:{items:{type:Array,default:function(){return[]}}},data:function(){return{edit:{id:"",isLoading:!1},form:new S.Z({name:""}),icons:{faEdit:o.Xcf,faTrashAlt:o.I7k,faCheck:o.LEp,faTimes:o.NBC}}},computed:{headers:function(){return[{text:"Nome",value:"name"},{text:"Ações",value:"actions",align:"center"}]}},methods:{isEditing:function(e){var t=e.id;return this.edit.id===t},onSubmitEdit:function(e){var t=this;return(0,k.Z)(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.id,a=t.form.data(),t.edit.isLoading=!0,n.prev=3,n.next=6,t.$apollo.mutate({mutation:r.UpdateShippingCompany,variables:{id:i,name:a.name}});case 6:t.edit.id="",t.$toast.success("Transportadora editada!"),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](3),(0,A.S)(t,n.t0);case 13:t.edit.isLoading=!1;case 14:case"end":return n.stop()}}),n,null,[[3,10]])})))()},onEditClick:function(e){var t=this,n=e.id,i=e.name;this.edit.id=n,this.form.name=i,this.$nextTick((function(){t.$refs.editCompanyNameInput.focusInput()}))},onCancelEditClick:function(e){this.edit.id=""},onActionButtonClick:function(e,t){this.$emit("action",{action:e,item:t})}}},H=J,W=(0,h.Z)(H,V,X,!1,null,null,null),Y=W.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"text-center"},[n("FontAwesomeIcon",{staticClass:"text-danger",attrs:{icon:e.icons.faTrashAlt,size:"5x"}}),n("h6",{staticClass:"text-danger fw-bold mt-3"},[e._v(" Você está deletando a transportadora: ")])],1),n("h5",{staticClass:"fw-bold text-center my-4"},[e._v(" "+e._s(e.company.name)+" ")]),e._m(0),n("div",{staticClass:"row mt-4"},[n("div",{staticClass:"col"},[n("AppButton",{attrs:{color:"success","btn-class":"fw-bold",block:"",loading:e.isLoading},on:{click:function(t){return t.preventDefault(),e.onConfirmClick.apply(null,arguments)}}},[e._v(" Confirmar ")])],1),n("div",{staticClass:"col"},[n("AppButton",{attrs:{color:"light",block:""},on:{click:function(t){return t.preventDefault(),e.onCancelClick.apply(null,arguments)}}},[e._v(" Cancelar ")])],1)])])},te=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{},[e._v(" Ao deletar a transportadora você terá que: ")]),n("ul",{staticClass:"text-subtitle"},[n("li",[e._v("Atualizar as filiais da transportadora.")]),n("li",[e._v("Atualizar os clientes registrados nessa transportadora.")])])])}],ne={props:{company:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,icons:{faTrashAlt:o.I7k}}},methods:{onConfirmClick:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,e.$apollo.mutate({mutation:r.DeleteShippingCompany,variables:{id:e.company.id}});case 4:e.$helpers.clearCacheFrom({id:e.company.id,__typename:"ShippingCompany"}),(0,A.s)(e,{message:"Transportadora deletada!"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$toast.error("Ops! Algo deu errado, tente novamente.");case 11:e.isLoading=!1;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},onCancelClick:function(){this.$emit("cancel")}}},ie=ne,ae=(0,h.Z)(ie,ee,te,!1,null,null,null),oe=ae.exports,se={components:{ModalShippingCompaniesTable:Y,ModalShippingCompaniesDelete:oe},props:{value:{type:Boolean,default:!1},shippingCompanies:{type:Array,default:function(){return[]}},isLoading:{type:Boolean,default:!1}},data:function(){return{isLoadingNewCompany:!1,newCompany:!1,companyToDelete:null,form:new S.Z({name:""}),icons:{faTruck:o.$KU,faPlus:o.r8p}}},methods:{onNewCompanyClick:function(){var e=this;this.newCompany=!0,this.$nextTick((function(){e.$refs.newShippingCompanyInput.focusInput()}))},onCancelNewCompanyClick:function(){this.newCompany=!1},onDeleteSuccess:function(){this.companyToDelete=null},onDeleteCancel:function(){this.companyToDelete=null},onAction:function(e){var t=e.action,n=e.item;"delete"===t&&(this.companyToDelete=n)},onSubmit:function(){var e=this;return(0,k.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.form.data(),e.isLoadingNewCompany=!0,t.prev=2,t.next=5,e.$apollo.mutate({mutation:r.CreateShippingCompany,variables:{name:n.name},refetchQueries:["GetShippingCompanies"]});case 5:e.$toast.success("Transportadora registrada!"),e.form.reset(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),(0,A.S)(e,t.t0);case 12:e.isLoadingNewCompany=!1;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}},re=se,ce=(0,h.Z)(re,U,K,!1,null,null,null),le=ce.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("AppModal",e._g({attrs:{id:"modalNewBranch",value:e.value,color:"success",centered:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("FontAwesomeIcon",{attrs:{icon:e.icons.faPlus,"fixed-width":""}}),e._v(" Nova Filial ")]},proxy:!0},{key:"body",fn:function(){return[n("BranchForm",{attrs:{cities:e.cities,"shipping-companies":e.shippingCompanies},on:{success:e.onSuccess}})]},proxy:!0}])},e.$listeners))},pe=[],de={components:{BranchForm:D},props:{value:{type:Boolean,default:!1},shippingCompanies:{type:Array,default:function(){return[]}},cities:{type:Array,default:function(){return[]}}},data:function(){return{icons:{faPlus:o.r8p}}},methods:{onSuccess:function(){this.$emit("success")}}},me=de,fe=(0,h.Z)(me,ue,pe,!1,null,null,null),he=fe.exports,ve={metaInfo:{title:function(){return"Filiais"}},components:{TheBranchesCard:Q,ModalShippingCompanies:le,ModalNewBranch:he},apollo:{branches:{query:s.GetBranches},cities:{query:c.GetCities},shippingCompanies:{query:r.GetShippingCompanies}},data:function(){return{branches:[],shippingCompanies:[],cities:[],modalShippingCompanies:!1,modalNewBranch:!1,icons:{faPlus:o.r8p,faTruck:o.$KU}}},computed:{isShippingCompaniesLoading:function(){return!!this.$apollo.queries.shippingCompanies.loading},isBranchesLoading:function(){return!!this.$apollo.queries.branches.loading}},methods:{onNewBranchClick:function(){this.modalNewBranch=!0},onNewBranch:function(){this.modalNewBranch=!1},onShippingCompaniesClick:function(){this.modalShippingCompanies=!0}}},ye=ve,Ce=(0,h.Z)(ye,i,a,!1,null,null,null),ge=Ce.exports}}]);
//# sourceMappingURL=branches-legacy.9e1a19f3.js.map